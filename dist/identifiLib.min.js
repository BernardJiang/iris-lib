!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.identifiLib=e()}(this,function(){"use strict";var t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function n(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function r(t,e){return t(e={exports:{}},e.exports),e.exports}var i=r(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),s=r(function(t){var e=t.exports={version:"2.5.3"};"number"==typeof __e&&(__e=e)}),o=(s.version,function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}),a=function(t,e,n){if(o(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},h=function(t){return"object"==typeof t?null!==t:"function"==typeof t},u=function(t){if(!h(t))throw TypeError(t+" is not an object!");return t},c=function(t){try{return!!t()}catch(t){return!0}},f=!c(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),l=i.document,d=h(l)&&h(l.createElement),p=function(t){return d?l.createElement(t):{}},g=!f&&!c(function(){return 7!=Object.defineProperty(p("div"),"a",{get:function(){return 7}}).a}),y=function(t,e){if(!h(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!h(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!h(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!h(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},v=Object.defineProperty,m={f:f?Object.defineProperty:function(t,e,n){if(u(t),e=y(e,!0),u(n),g)try{return v(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},b=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},S=f?function(t,e,n){return m.f(t,e,b(1,n))}:function(t,e,n){return t[e]=n,t},w=function(t,e,n){var r,o,h,u=t&w.F,c=t&w.G,f=t&w.S,l=t&w.P,d=t&w.B,p=t&w.W,g=c?s:s[e]||(s[e]={}),y=g.prototype,v=c?i:f?i[e]:(i[e]||{}).prototype;for(r in c&&(n=e),n)(o=!u&&v&&void 0!==v[r])&&r in g||(h=o?v[r]:n[r],g[r]=c&&"function"!=typeof v[r]?n[r]:d&&o?a(h,i):p&&v[r]==h?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(h):l&&"function"==typeof h?a(Function.call,h):h,l&&((g.virtual||(g.virtual={}))[r]=h,t&w.R&&y&&!y[r]&&S(y,r,h)))};w.F=1,w.G=2,w.S=4,w.P=8,w.B=16,w.W=32,w.U=64,w.R=128;var x,k=w,E={}.hasOwnProperty,A=function(t,e){return E.call(t,e)},F={}.toString,C=function(t){return F.call(t).slice(8,-1)},T=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==C(t)?t.split(""):Object(t)},D=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},P=function(t){return T(D(t))},I=Math.ceil,R=Math.floor,_=function(t){return isNaN(t=+t)?0:(t>0?R:I)(t)},B=Math.min,H=function(t){return t>0?B(_(t),9007199254740991):0},N=Math.max,O=Math.min,j=i["__core-js_shared__"]||(i["__core-js_shared__"]={}),L=function(t){return j[t]||(j[t]={})},M=0,V=Math.random(),U=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++M+V).toString(36))},K=L("keys"),q=function(t){return K[t]||(K[t]=U(t))},z=(x=!1,function(t,e,n){var r,i=P(t),s=H(i.length),o=function(t,e){return(t=_(t))<0?N(t+e,0):O(t,e)}(n,s);if(x&&e!=e){for(;s>o;)if((r=i[o++])!=r)return!0}else for(;s>o;o++)if((x||o in i)&&i[o]===e)return x||o||0;return!x&&-1}),Y=q("IE_PROTO"),G=function(t,e){var n,r=P(t),i=0,s=[];for(n in r)n!=Y&&A(r,n)&&s.push(n);for(;e.length>i;)A(r,n=e[i++])&&(~z(s,n)||s.push(n));return s},J="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),W=Object.keys||function(t){return G(t,J)},$={f:Object.getOwnPropertySymbols},X={f:{}.propertyIsEnumerable},Z=function(t){return Object(D(t))},Q=Object.assign,tt=!Q||c(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=Q({},t)[n]||Object.keys(Q({},e)).join("")!=r})?function(t,e){for(var n=Z(t),r=arguments.length,i=1,s=$.f,o=X.f;r>i;)for(var a,h=T(arguments[i++]),u=s?W(h).concat(s(h)):W(h),c=u.length,f=0;c>f;)o.call(h,a=u[f++])&&(n[a]=h[a]);return n}:Q;k(k.S+k.F,"Object",{assign:tt});var et=s.Object.assign,nt=n(r(function(t){t.exports={default:et,__esModule:!0}})),rt=r(function(t,e){t.exports=e=window.fetch,e.Headers=window.Headers,e.Request=window.Request,e.Response=window.Response}),it=(rt.Headers,rt.Request,rt.Response,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),st=[],ot=[],at="undefined"!=typeof Uint8Array?Uint8Array:Array,ht=!1;function ut(){ht=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,n=t.length;e<n;++e)st[e]=t[e],ot[t.charCodeAt(e)]=e;ot["-".charCodeAt(0)]=62,ot["_".charCodeAt(0)]=63}function ct(t,e,n){for(var r,i,s=[],o=e;o<n;o+=3)r=(t[o]<<16)+(t[o+1]<<8)+t[o+2],s.push(st[(i=r)>>18&63]+st[i>>12&63]+st[i>>6&63]+st[63&i]);return s.join("")}function ft(t){var e;ht||ut();for(var n=t.length,r=n%3,i="",s=[],o=0,a=n-r;o<a;o+=16383)s.push(ct(t,o,o+16383>a?a:o+16383));return 1===r?(e=t[n-1],i+=st[e>>2],i+=st[e<<4&63],i+="=="):2===r&&(e=(t[n-2]<<8)+t[n-1],i+=st[e>>10],i+=st[e>>4&63],i+=st[e<<2&63],i+="="),s.push(i),s.join("")}function lt(t,e,n,r,i){var s,o,a=8*i-r-1,h=(1<<a)-1,u=h>>1,c=-7,f=n?i-1:0,l=n?-1:1,d=t[e+f];for(f+=l,s=d&(1<<-c)-1,d>>=-c,c+=a;c>0;s=256*s+t[e+f],f+=l,c-=8);for(o=s&(1<<-c)-1,s>>=-c,c+=r;c>0;o=256*o+t[e+f],f+=l,c-=8);if(0===s)s=1-u;else{if(s===h)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,r),s-=u}return(d?-1:1)*o*Math.pow(2,s-r)}function dt(t,e,n,r,i,s){var o,a,h,u=8*s-i-1,c=(1<<u)-1,f=c>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:s-1,p=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-o))<1&&(o--,h*=2),(e+=o+f>=1?l/h:l*Math.pow(2,1-f))*h>=2&&(o++,h/=2),o+f>=c?(a=0,o=c):o+f>=1?(a=(e*h-1)*Math.pow(2,i),o+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;t[n+d]=255&a,d+=p,a/=256,i-=8);for(o=o<<i|a,u+=i;u>0;t[n+d]=255&o,d+=p,o/=256,u-=8);t[n+d-p]|=128*g}var pt={}.toString,gt=Array.isArray||function(t){return"[object Array]"==pt.call(t)};bt.TYPED_ARRAY_SUPPORT=void 0===it.TYPED_ARRAY_SUPPORT||it.TYPED_ARRAY_SUPPORT;var yt=vt();function vt(){return bt.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function mt(t,e){if(vt()<e)throw new RangeError("Invalid typed array length");return bt.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=bt.prototype:(null===t&&(t=new bt(e)),t.length=e),t}function bt(t,e,n){if(!(bt.TYPED_ARRAY_SUPPORT||this instanceof bt))return new bt(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return xt(this,t)}return St(this,t,e,n)}function St(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);bt.TYPED_ARRAY_SUPPORT?(t=e).__proto__=bt.prototype:t=kt(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!bt.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|Ft(e,n),i=(t=mt(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(At(e)){var n=0|Et(e.length);return 0===(t=mt(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?mt(t,0):kt(t,e);if("Buffer"===e.type&&gt(e.data))return kt(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function wt(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function xt(t,e){if(wt(e),t=mt(t,e<0?0:0|Et(e)),!bt.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function kt(t,e){var n=e.length<0?0:0|Et(e.length);t=mt(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function Et(t){if(t>=vt())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+vt().toString(16)+" bytes");return 0|t}function At(t){return!(null==t||!t._isBuffer)}function Ft(t,e){if(At(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Zt(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Qt(t).length;default:if(r)return Zt(t).length;e=(""+e).toLowerCase(),r=!0}}function Ct(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function Tt(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=bt.from(e,r)),At(e))return 0===e.length?-1:Dt(t,e,n,r,i);if("number"==typeof e)return e&=255,bt.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):Dt(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function Dt(t,e,n,r,i){var s,o=1,a=t.length,h=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;o=2,a/=2,h/=2,n/=2}function u(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){var c=-1;for(s=n;s<a;s++)if(u(t,s)===u(e,-1===c?0:s-c)){if(-1===c&&(c=s),s-c+1===h)return c*o}else-1!==c&&(s-=s-c),c=-1}else for(n+h>a&&(n=a-h),s=n;s>=0;s--){for(var f=!0,l=0;l<h;l++)if(u(t,s+l)!==u(e,l)){f=!1;break}if(f)return s}return-1}function Pt(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var s=e.length;if(s%2!=0)throw new TypeError("Invalid hex string");r>s/2&&(r=s/2);for(var o=0;o<r;++o){var a=parseInt(e.substr(2*o,2),16);if(isNaN(a))return o;t[n+o]=a}return o}function It(t,e,n,r){return te(Zt(e,t.length-n),t,n,r)}function Rt(t,e,n,r){return te(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function _t(t,e,n,r){return Rt(t,e,n,r)}function Bt(t,e,n,r){return te(Qt(e),t,n,r)}function Ht(t,e,n,r){return te(function(t,e){for(var n,r,i,s=[],o=0;o<t.length&&!((e-=2)<0);++o)n=t.charCodeAt(o),r=n>>8,i=n%256,s.push(i),s.push(r);return s}(e,t.length-n),t,n,r)}function Nt(t,e,n){return 0===e&&n===t.length?ft(t):ft(t.slice(e,n))}function Ot(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var s,o,a,h,u=t[i],c=null,f=u>239?4:u>223?3:u>191?2:1;if(i+f<=n)switch(f){case 1:u<128&&(c=u);break;case 2:128==(192&(s=t[i+1]))&&(h=(31&u)<<6|63&s)>127&&(c=h);break;case 3:s=t[i+1],o=t[i+2],128==(192&s)&&128==(192&o)&&(h=(15&u)<<12|(63&s)<<6|63&o)>2047&&(h<55296||h>57343)&&(c=h);break;case 4:s=t[i+1],o=t[i+2],a=t[i+3],128==(192&s)&&128==(192&o)&&128==(192&a)&&(h=(15&u)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&h<1114112&&(c=h)}null===c?(c=65533,f=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=f}return function(t){var e=t.length;if(e<=jt)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=jt));return n}(r)}bt.poolSize=8192,bt._augment=function(t){return t.__proto__=bt.prototype,t},bt.from=function(t,e,n){return St(null,t,e,n)},bt.TYPED_ARRAY_SUPPORT&&(bt.prototype.__proto__=Uint8Array.prototype,bt.__proto__=Uint8Array),bt.alloc=function(t,e,n){return function(t,e,n,r){return wt(e),e<=0?mt(t,e):void 0!==n?"string"==typeof r?mt(t,e).fill(n,r):mt(t,e).fill(n):mt(t,e)}(null,t,e,n)},bt.allocUnsafe=function(t){return xt(null,t)},bt.allocUnsafeSlow=function(t){return xt(null,t)},bt.isBuffer=ee,bt.compare=function(t,e){if(!At(t)||!At(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,s=Math.min(n,r);i<s;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},bt.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},bt.concat=function(t,e){if(!gt(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return bt.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=bt.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var s=t[n];if(!At(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},bt.byteLength=Ft,bt.prototype._isBuffer=!0,bt.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)Ct(this,e,e+1);return this},bt.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)Ct(this,e,e+3),Ct(this,e+1,e+2);return this},bt.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)Ct(this,e,e+7),Ct(this,e+1,e+6),Ct(this,e+2,e+5),Ct(this,e+3,e+4);return this},bt.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?Ot(this,0,t):function(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return Vt(this,e,n);case"utf8":case"utf-8":return Ot(this,e,n);case"ascii":return Lt(this,e,n);case"latin1":case"binary":return Mt(this,e,n);case"base64":return Nt(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ut(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}.apply(this,arguments)},bt.prototype.equals=function(t){if(!At(t))throw new TypeError("Argument must be a Buffer");return this===t||0===bt.compare(this,t)},bt.prototype.inspect=function(){var t="";return this.length>0&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(t+=" ... ")),"<Buffer "+t+">"},bt.prototype.compare=function(t,e,n,r,i){if(!At(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,i>>>=0,this===t)return 0;for(var s=i-r,o=n-e,a=Math.min(s,o),h=this.slice(r,i),u=t.slice(e,n),c=0;c<a;++c)if(h[c]!==u[c]){s=h[c],o=u[c];break}return s<o?-1:o<s?1:0},bt.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},bt.prototype.indexOf=function(t,e,n){return Tt(this,t,e,n,!0)},bt.prototype.lastIndexOf=function(t,e,n){return Tt(this,t,e,n,!1)},bt.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return Pt(this,t,e,n);case"utf8":case"utf-8":return It(this,t,e,n);case"ascii":return Rt(this,t,e,n);case"latin1":case"binary":return _t(this,t,e,n);case"base64":return Bt(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ht(this,t,e,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},bt.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var jt=4096;function Lt(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function Mt(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function Vt(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",s=e;s<n;++s)i+=Xt(t[s]);return i}function Ut(t,e,n){for(var r=t.slice(e,n),i="",s=0;s<r.length;s+=2)i+=String.fromCharCode(r[s]+256*r[s+1]);return i}function Kt(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function qt(t,e,n,r,i,s){if(!At(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function zt(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,s=Math.min(t.length-n,2);i<s;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function Yt(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,s=Math.min(t.length-n,4);i<s;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function Gt(t,e,n,r,i,s){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function Jt(t,e,n,r,i){return i||Gt(t,0,n,4),dt(t,e,n,r,23,4),n+4}function Wt(t,e,n,r,i){return i||Gt(t,0,n,8),dt(t,e,n,r,52,8),n+8}bt.prototype.slice=function(t,e){var n,r=this.length;if(t=~~t,e=void 0===e?r:~~e,t<0?(t+=r)<0&&(t=0):t>r&&(t=r),e<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),bt.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=bt.prototype;else{var i=e-t;n=new bt(i,void 0);for(var s=0;s<i;++s)n[s]=this[s+t]}return n},bt.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||Kt(t,e,this.length);for(var r=this[t],i=1,s=0;++s<e&&(i*=256);)r+=this[t+s]*i;return r},bt.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||Kt(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},bt.prototype.readUInt8=function(t,e){return e||Kt(t,1,this.length),this[t]},bt.prototype.readUInt16LE=function(t,e){return e||Kt(t,2,this.length),this[t]|this[t+1]<<8},bt.prototype.readUInt16BE=function(t,e){return e||Kt(t,2,this.length),this[t]<<8|this[t+1]},bt.prototype.readUInt32LE=function(t,e){return e||Kt(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},bt.prototype.readUInt32BE=function(t,e){return e||Kt(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},bt.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||Kt(t,e,this.length);for(var r=this[t],i=1,s=0;++s<e&&(i*=256);)r+=this[t+s]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},bt.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||Kt(t,e,this.length);for(var r=e,i=1,s=this[t+--r];r>0&&(i*=256);)s+=this[t+--r]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*e)),s},bt.prototype.readInt8=function(t,e){return e||Kt(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},bt.prototype.readInt16LE=function(t,e){e||Kt(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},bt.prototype.readInt16BE=function(t,e){e||Kt(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},bt.prototype.readInt32LE=function(t,e){return e||Kt(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},bt.prototype.readInt32BE=function(t,e){return e||Kt(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},bt.prototype.readFloatLE=function(t,e){return e||Kt(t,4,this.length),lt(this,t,!0,23,4)},bt.prototype.readFloatBE=function(t,e){return e||Kt(t,4,this.length),lt(this,t,!1,23,4)},bt.prototype.readDoubleLE=function(t,e){return e||Kt(t,8,this.length),lt(this,t,!0,52,8)},bt.prototype.readDoubleBE=function(t,e){return e||Kt(t,8,this.length),lt(this,t,!1,52,8)},bt.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||qt(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,s=0;for(this[e]=255&t;++s<n&&(i*=256);)this[e+s]=t/i&255;return e+n},bt.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||qt(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,s=1;for(this[e+i]=255&t;--i>=0&&(s*=256);)this[e+i]=t/s&255;return e+n},bt.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||qt(this,t,e,1,255,0),bt.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},bt.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||qt(this,t,e,2,65535,0),bt.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):zt(this,t,e,!0),e+2},bt.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||qt(this,t,e,2,65535,0),bt.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):zt(this,t,e,!1),e+2},bt.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||qt(this,t,e,4,4294967295,0),bt.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):Yt(this,t,e,!0),e+4},bt.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||qt(this,t,e,4,4294967295,0),bt.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):Yt(this,t,e,!1),e+4},bt.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);qt(this,t,e,n,i-1,-i)}var s=0,o=1,a=0;for(this[e]=255&t;++s<n&&(o*=256);)t<0&&0===a&&0!==this[e+s-1]&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+n},bt.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);qt(this,t,e,n,i-1,-i)}var s=n-1,o=1,a=0;for(this[e+s]=255&t;--s>=0&&(o*=256);)t<0&&0===a&&0!==this[e+s+1]&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+n},bt.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||qt(this,t,e,1,127,-128),bt.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},bt.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||qt(this,t,e,2,32767,-32768),bt.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):zt(this,t,e,!0),e+2},bt.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||qt(this,t,e,2,32767,-32768),bt.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):zt(this,t,e,!1),e+2},bt.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||qt(this,t,e,4,2147483647,-2147483648),bt.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):Yt(this,t,e,!0),e+4},bt.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||qt(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),bt.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):Yt(this,t,e,!1),e+4},bt.prototype.writeFloatLE=function(t,e,n){return Jt(this,t,e,!0,n)},bt.prototype.writeFloatBE=function(t,e,n){return Jt(this,t,e,!1,n)},bt.prototype.writeDoubleLE=function(t,e,n){return Wt(this,t,e,!0,n)},bt.prototype.writeDoubleBE=function(t,e,n){return Wt(this,t,e,!1,n)},bt.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,s=r-n;if(this===t&&n<e&&e<r)for(i=s-1;i>=0;--i)t[i+e]=this[i+n];else if(s<1e3||!bt.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+s),e);return s},bt.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!bt.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var s;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(s=e;s<n;++s)this[s]=t;else{var o=At(t)?t:Zt(new bt(t,r).toString()),a=o.length;for(s=0;s<n-e;++s)this[s+e]=o[s%a]}return this};var $t=/[^+\/0-9A-Za-z-_]/g;function Xt(t){return t<16?"0"+t.toString(16):t.toString(16)}function Zt(t,e){var n;e=e||1/0;for(var r=t.length,i=null,s=[],o=0;o<r;++o){if((n=t.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(o+1===r){(e-=3)>-1&&s.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&s.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;s.push(n)}else if(n<2048){if((e-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function Qt(t){return function(t){var e,n,r,i,s,o;ht||ut();var a=t.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");s="="===t[a-2]?2:"="===t[a-1]?1:0,o=new at(3*a/4-s),r=s>0?a-4:a;var h=0;for(e=0,n=0;e<r;e+=4,n+=3)i=ot[t.charCodeAt(e)]<<18|ot[t.charCodeAt(e+1)]<<12|ot[t.charCodeAt(e+2)]<<6|ot[t.charCodeAt(e+3)],o[h++]=i>>16&255,o[h++]=i>>8&255,o[h++]=255&i;return 2===s?(i=ot[t.charCodeAt(e)]<<2|ot[t.charCodeAt(e+1)]>>4,o[h++]=255&i):1===s&&(i=ot[t.charCodeAt(e)]<<10|ot[t.charCodeAt(e+1)]<<4|ot[t.charCodeAt(e+2)]>>2,o[h++]=i>>8&255,o[h++]=255&i),o}(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace($t,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function te(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function ee(t){return null!=t&&(!!t._isBuffer||ne(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&ne(t.slice(0,0))}(t))}function ne(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}var re=Object.freeze({INSPECT_MAX_BYTES:50,kMaxLength:yt,Buffer:bt,SlowBuffer:function(t){return+t!=t&&(t=0),bt.alloc(+t)},isBuffer:ee}),ie={userAgent:!1},se={};if(void 0===oe)var oe={};oe.lang={extend:function(t,e,n){if(!e||!t)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var r=function(){};if(r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t,t.superclass=e.prototype,e.prototype.constructor==Object.prototype.constructor&&(e.prototype.constructor=e),n){var i;for(i in n)t.prototype[i]=n[i];var s=function(){},o=["toString","valueOf"];try{/MSIE/.test(ie.userAgent)&&(s=function(t,e){for(i=0;i<o.length;i+=1){var n=o[i],r=e[n];"function"==typeof r&&r!=Object.prototype[n]&&(t[n]=r)}})}catch(t){}s(t.prototype,n)}}};var ae,he,ue,ce,fe=fe||function(t,e){var n={},r=n.lib={},i=r.Base=function(){function t(){}return{extend:function(e){t.prototype=this;var n=new t;return e&&n.mixIn(e),n.hasOwnProperty("init")||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),s=r.WordArray=i.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=void 0!=e?e:4*t.length},toString:function(t){return(t||a).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes,i=t.sigBytes;if(this.clamp(),r%4)for(var s=0;s<i;s++){var o=n[s>>>2]>>>24-s%4*8&255;e[r+s>>>2]|=o<<24-(r+s)%4*8}else for(s=0;s<i;s+=4)e[r+s>>>2]=n[s>>>2];return this.sigBytes+=i,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=i.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n=[],r=0;r<e;r+=4)n.push(4294967296*t.random()|0);return new s.init(n,e)}}),o=n.enc={},a=o.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var s=e[i>>>2]>>>24-i%4*8&255;r.push((s>>>4).toString(16)),r.push((15&s).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new s.init(n,e/2)}},h=o.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var s=e[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(s))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new s.init(n,e)}},u=o.Utf8={stringify:function(t){try{return decodeURIComponent(escape(h.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return h.parse(unescape(encodeURIComponent(t)))}},c=r.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=u.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,a=i/(4*o),h=(a=e?t.ceil(a):t.max((0|a)-this._minBufferSize,0))*o,u=t.min(4*h,i);if(h){for(var c=0;c<h;c+=o)this._doProcessBlock(r,c);var f=r.splice(0,h);n.sigBytes-=u}return new s.init(f,u)},clone:function(){var t=i.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),f=(r.Hasher=c.extend({cfg:i.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){c.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new f.HMAC.init(t,n).finalize(e)}}}),n.algo={});return n}(Math);!function(t){var e,n=(e=fe).lib,r=n.Base,i=n.WordArray;(e=e.x64={}).Word=r.extend({init:function(t,e){this.high=t,this.low=e}}),e.WordArray=r.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=void 0!=e?e:8*t.length},toX32:function(){for(var t=this.words,e=t.length,n=[],r=0;r<e;r++){var s=t[r];n.push(s.high),n.push(s.low)}return i.create(n,this.sigBytes)},clone:function(){for(var t=r.clone.call(this),e=t.words=this.words.slice(0),n=e.length,i=0;i<n;i++)e[i]=e[i].clone();return t}})}(),fe.lib.Cipher||function(t){var e=(d=fe).lib,n=e.Base,r=e.WordArray,i=e.BufferedBlockAlgorithm,s=d.enc.Base64,o=d.algo.EvpKDF,a=e.Cipher=i.extend({cfg:n.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,n){this.cfg=this.cfg.extend(n),this._xformMode=t,this._key=e,this.reset()},reset:function(){i.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(t){return{encrypt:function(e,n,r){return("string"==typeof n?p:l).encrypt(t,e,n,r)},decrypt:function(e,n,r){return("string"==typeof n?p:l).decrypt(t,e,n,r)}}}});e.StreamCipher=a.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var h=d.mode={},u=function(t,e,n){var r=this._iv;r?this._iv=void 0:r=this._prevBlock;for(var i=0;i<n;i++)t[e+i]^=r[i]},c=(e.BlockCipherMode=n.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}})).extend();c.Encryptor=c.extend({processBlock:function(t,e){var n=this._cipher,r=n.blockSize;u.call(this,t,e,r),n.encryptBlock(t,e),this._prevBlock=t.slice(e,e+r)}}),c.Decryptor=c.extend({processBlock:function(t,e){var n=this._cipher,r=n.blockSize,i=t.slice(e,e+r);n.decryptBlock(t,e),u.call(this,t,e,r),this._prevBlock=i}}),h=h.CBC=c,c=(d.pad={}).Pkcs7={pad:function(t,e){for(var n,i=(n=(n=4*e)-t.sigBytes%n)<<24|n<<16|n<<8|n,s=[],o=0;o<n;o+=4)s.push(i);n=r.create(s,n),t.concat(n)},unpad:function(t){t.sigBytes-=255&t.words[t.sigBytes-1>>>2]}},e.BlockCipher=a.extend({cfg:a.cfg.extend({mode:h,padding:c}),reset:function(){a.reset.call(this);var t=(e=this.cfg).iv,e=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=e.createEncryptor;else n=e.createDecryptor,this._minBufferSize=1;this._mode=n.call(e,this,t&&t.words)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(!0)}else e=this._process(!0),t.unpad(e);return e},blockSize:4});var f=e.CipherParams=n.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),l=(h=(d.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext;return((t=t.salt)?r.create([1398893684,1701076831]).concat(t).concat(e):e).toString(s)},parse:function(t){var e=(t=s.parse(t)).words;if(1398893684==e[0]&&1701076831==e[1]){var n=r.create(e.slice(2,4));e.splice(0,4),t.sigBytes-=16}return f.create({ciphertext:t,salt:n})}},e.SerializableCipher=n.extend({cfg:n.extend({format:h}),encrypt:function(t,e,n,r){r=this.cfg.extend(r);var i=t.createEncryptor(n,r);return e=i.finalize(e),i=i.cfg,f.create({ciphertext:e,key:n,iv:i.iv,algorithm:t,mode:i.mode,padding:i.padding,blockSize:t.blockSize,formatter:r.format})},decrypt:function(t,e,n,r){return r=this.cfg.extend(r),e=this._parse(e,r.format),t.createDecryptor(n,r).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}})),d=(d.kdf={}).OpenSSL={execute:function(t,e,n,i){return i||(i=r.random(8)),t=o.create({keySize:e+n}).compute(t,i),n=r.create(t.words.slice(e),4*n),t.sigBytes=4*e,f.create({key:t,iv:n,salt:i})}},p=e.PasswordBasedCipher=l.extend({cfg:l.cfg.extend({kdf:d}),encrypt:function(t,e,n,r){return n=(r=this.cfg.extend(r)).kdf.execute(n,t.keySize,t.ivSize),r.iv=n.iv,(t=l.encrypt.call(this,t,e,n.key,r)).mixIn(n),t},decrypt:function(t,e,n,r){return r=this.cfg.extend(r),e=this._parse(e,r.format),n=r.kdf.execute(n,t.keySize,t.ivSize,e.salt),r.iv=n.iv,l.decrypt.call(this,t,e,n.key,r)}})}(),function(){for(var t=fe,e=t.lib.BlockCipher,n=t.algo,r=[],i=[],s=[],o=[],a=[],h=[],u=[],c=[],f=[],l=[],d=[],p=0;256>p;p++)d[p]=128>p?p<<1:p<<1^283;var g=0,y=0;for(p=0;256>p;p++){var v=(v=y^y<<1^y<<2^y<<3^y<<4)>>>8^255&v^99;r[g]=v,i[v]=g;var m=d[g],b=d[m],S=d[b],w=257*d[v]^16843008*v;s[g]=w<<24|w>>>8,o[g]=w<<16|w>>>16,a[g]=w<<8|w>>>24,h[g]=w,w=16843009*S^65537*b^257*m^16843008*g,u[v]=w<<24|w>>>8,c[v]=w<<16|w>>>16,f[v]=w<<8|w>>>24,l[v]=w,g?(g=m^d[d[d[S^m]]],y^=d[d[y]]):g=y=1}var x=[0,1,2,4,8,16,32,64,128,27,54];n=n.AES=e.extend({_doReset:function(){for(var t=(n=this._key).words,e=n.sigBytes/4,n=4*((this._nRounds=e+6)+1),i=this._keySchedule=[],s=0;s<n;s++)if(s<e)i[s]=t[s];else{var o=i[s-1];s%e?6<e&&4==s%e&&(o=r[o>>>24]<<24|r[o>>>16&255]<<16|r[o>>>8&255]<<8|r[255&o]):(o=r[(o=o<<8|o>>>24)>>>24]<<24|r[o>>>16&255]<<16|r[o>>>8&255]<<8|r[255&o],o^=x[s/e|0]<<24),i[s]=i[s-e]^o}for(t=this._invKeySchedule=[],e=0;e<n;e++)s=n-e,o=e%4?i[s]:i[s-4],t[e]=4>e||4>=s?o:u[r[o>>>24]]^c[r[o>>>16&255]]^f[r[o>>>8&255]]^l[r[255&o]]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,s,o,a,h,r)},decryptBlock:function(t,e){var n=t[e+1];t[e+1]=t[e+3],t[e+3]=n,this._doCryptBlock(t,e,this._invKeySchedule,u,c,f,l,i),n=t[e+1],t[e+1]=t[e+3],t[e+3]=n},_doCryptBlock:function(t,e,n,r,i,s,o,a){for(var h=this._nRounds,u=t[e]^n[0],c=t[e+1]^n[1],f=t[e+2]^n[2],l=t[e+3]^n[3],d=4,p=1;p<h;p++){var g=r[u>>>24]^i[c>>>16&255]^s[f>>>8&255]^o[255&l]^n[d++],y=r[c>>>24]^i[f>>>16&255]^s[l>>>8&255]^o[255&u]^n[d++],v=r[f>>>24]^i[l>>>16&255]^s[u>>>8&255]^o[255&c]^n[d++];l=r[l>>>24]^i[u>>>16&255]^s[c>>>8&255]^o[255&f]^n[d++],u=g,c=y,f=v}g=(a[u>>>24]<<24|a[c>>>16&255]<<16|a[f>>>8&255]<<8|a[255&l])^n[d++],y=(a[c>>>24]<<24|a[f>>>16&255]<<16|a[l>>>8&255]<<8|a[255&u])^n[d++],v=(a[f>>>24]<<24|a[l>>>16&255]<<16|a[u>>>8&255]<<8|a[255&c])^n[d++],l=(a[l>>>24]<<24|a[u>>>16&255]<<16|a[c>>>8&255]<<8|a[255&f])^n[d++],t[e]=g,t[e+1]=y,t[e+2]=v,t[e+3]=l},keySize:8});t.AES=e._createHelper(n)}(),function(){function t(t,e){var n=(this._lBlock>>>t^this._rBlock)&e;this._rBlock^=n,this._lBlock^=n<<t}function e(t,e){var n=(this._rBlock>>>t^this._lBlock)&e;this._lBlock^=n,this._rBlock^=n<<t}var n=fe,r=(i=n.lib).WordArray,i=i.BlockCipher,s=n.algo,o=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],a=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],h=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],c=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],f=s.DES=i.extend({_doReset:function(){for(var t=this._key.words,e=[],n=0;56>n;n++){var r=o[n]-1;e[n]=t[r>>>5]>>>31-r%32&1}for(t=this._subKeys=[],r=0;16>r;r++){var i=t[r]=[],s=h[r];for(n=0;24>n;n++)i[n/6|0]|=e[(a[n]-1+s)%28]<<31-n%6,i[4+(n/6|0)]|=e[28+(a[n+24]-1+s)%28]<<31-n%6;for(i[0]=i[0]<<1|i[0]>>>31,n=1;7>n;n++)i[n]>>>=4*(n-1)+3;i[7]=i[7]<<5|i[7]>>>27}for(e=this._invSubKeys=[],n=0;16>n;n++)e[n]=t[15-n]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._subKeys)},decryptBlock:function(t,e){this._doCryptBlock(t,e,this._invSubKeys)},_doCryptBlock:function(n,r,i){this._lBlock=n[r],this._rBlock=n[r+1],t.call(this,4,252645135),t.call(this,16,65535),e.call(this,2,858993459),e.call(this,8,16711935),t.call(this,1,1431655765);for(var s=0;16>s;s++){for(var o=i[s],a=this._lBlock,h=this._rBlock,f=0,l=0;8>l;l++)f|=u[l][((h^o[l])&c[l])>>>0];this._lBlock=h,this._rBlock=a^f}i=this._lBlock,this._lBlock=this._rBlock,this._rBlock=i,t.call(this,1,1431655765),e.call(this,8,16711935),e.call(this,2,858993459),t.call(this,16,65535),t.call(this,4,252645135),n[r]=this._lBlock,n[r+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});n.DES=i._createHelper(f),s=s.TripleDES=i.extend({_doReset:function(){var t=this._key.words;this._des1=f.createEncryptor(r.create(t.slice(0,2))),this._des2=f.createEncryptor(r.create(t.slice(2,4))),this._des3=f.createEncryptor(r.create(t.slice(4,6)))},encryptBlock:function(t,e){this._des1.encryptBlock(t,e),this._des2.decryptBlock(t,e),this._des3.encryptBlock(t,e)},decryptBlock:function(t,e){this._des3.decryptBlock(t,e),this._des2.encryptBlock(t,e),this._des1.decryptBlock(t,e)},keySize:6,ivSize:2,blockSize:2}),n.TripleDES=i._createHelper(s)}(),function(){var t=fe,e=t.lib.WordArray;t.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,r=this._map;t.clamp(),t=[];for(var i=0;i<n;i+=3)for(var s=(e[i>>>2]>>>24-i%4*8&255)<<16|(e[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|e[i+2>>>2]>>>24-(i+2)%4*8&255,o=0;4>o&&i+.75*o<n;o++)t.push(r.charAt(s>>>6*(3-o)&63));if(e=r.charAt(64))for(;t.length%4;)t.push(e);return t.join("")},parse:function(t){var n=t.length,r=this._map;(i=r.charAt(64))&&(-1!=(i=t.indexOf(i))&&(n=i));for(var i=[],s=0,o=0;o<n;o++)if(o%4){var a=r.indexOf(t.charAt(o-1))<<o%4*2,h=r.indexOf(t.charAt(o))>>>6-o%4*2;i[s>>>2]|=(a|h)<<24-s%4*8,s++}return e.create(i,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(t){function e(t,e,n,r,i,s,o){return((t=t+(e&n|~e&r)+i+o)<<s|t>>>32-s)+e}function n(t,e,n,r,i,s,o){return((t=t+(e&r|n&~r)+i+o)<<s|t>>>32-s)+e}function r(t,e,n,r,i,s,o){return((t=t+(e^n^r)+i+o)<<s|t>>>32-s)+e}function i(t,e,n,r,i,s,o){return((t=t+(n^(e|~r))+i+o)<<s|t>>>32-s)+e}for(var s=fe,o=(h=s.lib).WordArray,a=h.Hasher,h=s.algo,u=[],c=0;64>c;c++)u[c]=4294967296*t.abs(t.sin(c+1))|0;h=h.MD5=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,s){for(var o=0;16>o;o++){var a=t[f=s+o];t[f]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}o=this._hash.words;var h,c,f=t[s+0],l=(a=t[s+1],t[s+2]),d=t[s+3],p=t[s+4],g=t[s+5],y=t[s+6],v=t[s+7],m=t[s+8],b=t[s+9],S=t[s+10],w=t[s+11],x=t[s+12],k=t[s+13],E=t[s+14],A=t[s+15],F=o[0],C=i(C=i(C=i(C=i(C=r(C=r(C=r(C=r(C=n(C=n(C=n(C=n(C=e(C=e(C=e(C=e(C=o[1],c=e(c=o[2],h=e(h=o[3],F=e(F,C,c,h,f,7,u[0]),C,c,a,12,u[1]),F,C,l,17,u[2]),h,F,d,22,u[3]),c=e(c,h=e(h,F=e(F,C,c,h,p,7,u[4]),C,c,g,12,u[5]),F,C,y,17,u[6]),h,F,v,22,u[7]),c=e(c,h=e(h,F=e(F,C,c,h,m,7,u[8]),C,c,b,12,u[9]),F,C,S,17,u[10]),h,F,w,22,u[11]),c=e(c,h=e(h,F=e(F,C,c,h,x,7,u[12]),C,c,k,12,u[13]),F,C,E,17,u[14]),h,F,A,22,u[15]),c=n(c,h=n(h,F=n(F,C,c,h,a,5,u[16]),C,c,y,9,u[17]),F,C,w,14,u[18]),h,F,f,20,u[19]),c=n(c,h=n(h,F=n(F,C,c,h,g,5,u[20]),C,c,S,9,u[21]),F,C,A,14,u[22]),h,F,p,20,u[23]),c=n(c,h=n(h,F=n(F,C,c,h,b,5,u[24]),C,c,E,9,u[25]),F,C,d,14,u[26]),h,F,m,20,u[27]),c=n(c,h=n(h,F=n(F,C,c,h,k,5,u[28]),C,c,l,9,u[29]),F,C,v,14,u[30]),h,F,x,20,u[31]),c=r(c,h=r(h,F=r(F,C,c,h,g,4,u[32]),C,c,m,11,u[33]),F,C,w,16,u[34]),h,F,E,23,u[35]),c=r(c,h=r(h,F=r(F,C,c,h,a,4,u[36]),C,c,p,11,u[37]),F,C,v,16,u[38]),h,F,S,23,u[39]),c=r(c,h=r(h,F=r(F,C,c,h,k,4,u[40]),C,c,f,11,u[41]),F,C,d,16,u[42]),h,F,y,23,u[43]),c=r(c,h=r(h,F=r(F,C,c,h,b,4,u[44]),C,c,x,11,u[45]),F,C,A,16,u[46]),h,F,l,23,u[47]),c=i(c,h=i(h,F=i(F,C,c,h,f,6,u[48]),C,c,v,10,u[49]),F,C,E,15,u[50]),h,F,g,21,u[51]),c=i(c,h=i(h,F=i(F,C,c,h,x,6,u[52]),C,c,d,10,u[53]),F,C,S,15,u[54]),h,F,a,21,u[55]),c=i(c,h=i(h,F=i(F,C,c,h,m,6,u[56]),C,c,A,10,u[57]),F,C,y,15,u[58]),h,F,k,21,u[59]),c=i(c,h=i(h,F=i(F,C,c,h,p,6,u[60]),C,c,w,10,u[61]),F,C,l,15,u[62]),h,F,b,21,u[63]);o[0]=o[0]+F|0,o[1]=o[1]+C|0,o[2]=o[2]+c|0,o[3]=o[3]+h|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;n[i>>>5]|=128<<24-i%32;var s=t.floor(r/4294967296);for(n[15+(i+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),n[14+(i+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),e.sigBytes=4*(n.length+1),this._process(),n=(e=this._hash).words,r=0;4>r;r++)i=n[r],n[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);return e},clone:function(){var t=a.clone.call(this);return t._hash=this._hash.clone(),t}}),s.MD5=a._createHelper(h),s.HmacMD5=a._createHmacHelper(h)}(Math),function(){var t=fe,e=(i=t.lib).WordArray,n=i.Hasher,r=[],i=t.algo.SHA1=n.extend({_doReset:function(){this._hash=new e.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=this._hash.words,i=n[0],s=n[1],o=n[2],a=n[3],h=n[4],u=0;80>u;u++){if(16>u)r[u]=0|t[e+u];else{var c=r[u-3]^r[u-8]^r[u-14]^r[u-16];r[u]=c<<1|c>>>31}c=(i<<5|i>>>27)+h+r[u],c=20>u?c+(1518500249+(s&o|~s&a)):40>u?c+(1859775393+(s^o^a)):60>u?c+((s&o|s&a|o&a)-1894007588):c+((s^o^a)-899497514),h=a,a=o,o=s<<30|s>>>2,s=i,i=c}n[0]=n[0]+i|0,n[1]=n[1]+s|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+h|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),e[15+(r+64>>>9<<4)]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=n.clone.call(this);return t._hash=this._hash.clone(),t}});t.SHA1=n._createHelper(i),t.HmacSHA1=n._createHmacHelper(i)}(),function(t){for(var e=fe,n=(i=e.lib).WordArray,r=i.Hasher,i=e.algo,s=[],o=[],a=function(t){return 4294967296*(t-(0|t))|0},h=2,u=0;64>u;){var c;t:{c=h;for(var f=t.sqrt(c),l=2;l<=f;l++)if(!(c%l)){c=!1;break t}c=!0}c&&(8>u&&(s[u]=a(t.pow(h,.5))),o[u]=a(t.pow(h,1/3)),u++),h++}var d=[];i=i.SHA256=r.extend({_doReset:function(){this._hash=new n.init(s.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],s=n[2],a=n[3],h=n[4],u=n[5],c=n[6],f=n[7],l=0;64>l;l++){if(16>l)d[l]=0|t[e+l];else{var p=d[l-15],g=d[l-2];d[l]=((p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3)+d[l-7]+((g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10)+d[l-16]}p=f+((h<<26|h>>>6)^(h<<21|h>>>11)^(h<<7|h>>>25))+(h&u^~h&c)+o[l]+d[l],g=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&i^r&s^i&s),f=c,c=u,u=h,h=a+p|0,a=s,s=i,i=r,r=p+g|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+s|0,n[3]=n[3]+a|0,n[4]=n[4]+h|0,n[5]=n[5]+u|0,n[6]=n[6]+c|0,n[7]=n[7]+f|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=t.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=r.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=r._createHelper(i),e.HmacSHA256=r._createHmacHelper(i)}(Math),he=(ae=fe).lib.WordArray,ue=(ce=ae.algo).SHA256,ce=ce.SHA224=ue.extend({_doReset:function(){this._hash=new he.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var t=ue._doFinalize.call(this);return t.sigBytes-=4,t}}),ae.SHA224=ue._createHelper(ce),ae.HmacSHA224=ue._createHmacHelper(ce),function(){function t(){return r.create.apply(r,arguments)}for(var e=fe,n=e.lib.Hasher,r=(s=e.x64).Word,i=s.WordArray,s=e.algo,o=[t(1116352408,3609767458),t(1899447441,602891725),t(3049323471,3964484399),t(3921009573,2173295548),t(961987163,4081628472),t(1508970993,3053834265),t(2453635748,2937671579),t(2870763221,3664609560),t(3624381080,2734883394),t(310598401,1164996542),t(607225278,1323610764),t(1426881987,3590304994),t(1925078388,4068182383),t(2162078206,991336113),t(2614888103,633803317),t(3248222580,3479774868),t(3835390401,2666613458),t(4022224774,944711139),t(264347078,2341262773),t(604807628,2007800933),t(770255983,1495990901),t(1249150122,1856431235),t(1555081692,3175218132),t(1996064986,2198950837),t(2554220882,3999719339),t(2821834349,766784016),t(2952996808,2566594879),t(3210313671,3203337956),t(3336571891,1034457026),t(3584528711,2466948901),t(113926993,3758326383),t(338241895,168717936),t(666307205,1188179964),t(773529912,1546045734),t(1294757372,1522805485),t(1396182291,2643833823),t(1695183700,2343527390),t(1986661051,1014477480),t(2177026350,1206759142),t(2456956037,344077627),t(2730485921,1290863460),t(2820302411,3158454273),t(3259730800,3505952657),t(3345764771,106217008),t(3516065817,3606008344),t(3600352804,1432725776),t(4094571909,1467031594),t(275423344,851169720),t(430227734,3100823752),t(506948616,1363258195),t(659060556,3750685593),t(883997877,3785050280),t(958139571,3318307427),t(1322822218,3812723403),t(1537002063,2003034995),t(1747873779,3602036899),t(1955562222,1575990012),t(2024104815,1125592928),t(2227730452,2716904306),t(2361852424,442776044),t(2428436474,593698344),t(2756734187,3733110249),t(3204031479,2999351573),t(3329325298,3815920427),t(3391569614,3928383900),t(3515267271,566280711),t(3940187606,3454069534),t(4118630271,4000239992),t(116418474,1914138554),t(174292421,2731055270),t(289380356,3203993006),t(460393269,320620315),t(685471733,587496836),t(852142971,1086792851),t(1017036298,365543100),t(1126000580,2618297676),t(1288033470,3409855158),t(1501505948,4234509866),t(1607167915,987167468),t(1816402316,1246189591)],a=[],h=0;80>h;h++)a[h]=t();s=s.SHA512=n.extend({_doReset:function(){this._hash=new i.init([new r.init(1779033703,4089235720),new r.init(3144134277,2227873595),new r.init(1013904242,4271175723),new r.init(2773480762,1595750129),new r.init(1359893119,2917565137),new r.init(2600822924,725511199),new r.init(528734635,4215389547),new r.init(1541459225,327033209)])},_doProcessBlock:function(t,e){for(var n=(f=this._hash.words)[0],r=f[1],i=f[2],s=f[3],h=f[4],u=f[5],c=f[6],f=f[7],l=n.high,d=n.low,p=r.high,g=r.low,y=i.high,v=i.low,m=s.high,b=s.low,S=h.high,w=h.low,x=u.high,k=u.low,E=c.high,A=c.low,F=f.high,C=f.low,T=l,D=d,P=p,I=g,R=y,_=v,B=m,H=b,N=S,O=w,j=x,L=k,M=E,V=A,U=F,K=C,q=0;80>q;q++){var z=a[q];if(16>q)var Y=z.high=0|t[e+2*q],G=z.low=0|t[e+2*q+1];else{Y=((G=(Y=a[q-15]).high)>>>1|(J=Y.low)<<31)^(G>>>8|J<<24)^G>>>7;var J=(J>>>1|G<<31)^(J>>>8|G<<24)^(J>>>7|G<<25),W=((G=(W=a[q-2]).high)>>>19|($=W.low)<<13)^(G<<3|$>>>29)^G>>>6,$=($>>>19|G<<13)^($<<3|G>>>29)^($>>>6|G<<26),X=(G=a[q-7]).high,Z=(Q=a[q-16]).high,Q=Q.low;Y=(Y=(Y=Y+X+((G=J+G.low)>>>0<J>>>0?1:0))+W+((G=G+$)>>>0<$>>>0?1:0))+Z+((G=G+Q)>>>0<Q>>>0?1:0);z.high=Y,z.low=G}X=N&j^~N&M,Q=O&L^~O&V,z=T&P^T&R^P&R;var tt=D&I^D&_^I&_,et=(J=(T>>>28|D<<4)^(T<<30|D>>>2)^(T<<25|D>>>7),W=(D>>>28|T<<4)^(D<<30|T>>>2)^(D<<25|T>>>7),($=o[q]).high),nt=$.low;Z=(Z=(Z=(Z=U+((N>>>14|O<<18)^(N>>>18|O<<14)^(N<<23|O>>>9))+(($=K+((O>>>14|N<<18)^(O>>>18|N<<14)^(O<<23|N>>>9)))>>>0<K>>>0?1:0))+X+(($=$+Q)>>>0<Q>>>0?1:0))+et+(($=$+nt)>>>0<nt>>>0?1:0))+Y+(($=$+G)>>>0<G>>>0?1:0),z=J+z+((G=W+tt)>>>0<W>>>0?1:0),U=M,K=V,M=j,V=L,j=N,L=O,N=B+Z+((O=H+$|0)>>>0<H>>>0?1:0)|0,B=R,H=_,R=P,_=I,P=T,I=D,T=Z+z+((D=$+G|0)>>>0<$>>>0?1:0)|0}d=n.low=d+D,n.high=l+T+(d>>>0<D>>>0?1:0),g=r.low=g+I,r.high=p+P+(g>>>0<I>>>0?1:0),v=i.low=v+_,i.high=y+R+(v>>>0<_>>>0?1:0),b=s.low=b+H,s.high=m+B+(b>>>0<H>>>0?1:0),w=h.low=w+O,h.high=S+N+(w>>>0<O>>>0?1:0),k=u.low=k+L,u.high=x+j+(k>>>0<L>>>0?1:0),A=c.low=A+V,c.high=E+M+(A>>>0<V>>>0?1:0),C=f.low=C+K,f.high=F+U+(C>>>0<K>>>0?1:0)},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),e[31+(r+128>>>10<<5)]=n,t.sigBytes=4*e.length,this._process(),this._hash.toX32()},clone:function(){var t=n.clone.call(this);return t._hash=this._hash.clone(),t},blockSize:32}),e.SHA512=n._createHelper(s),e.HmacSHA512=n._createHmacHelper(s)}(),function(){var t=fe,e=(i=t.x64).Word,n=i.WordArray,r=(i=t.algo).SHA512,i=i.SHA384=r.extend({_doReset:function(){this._hash=new n.init([new e.init(3418070365,3238371032),new e.init(1654270250,914150663),new e.init(2438529370,812702999),new e.init(355462360,4144912697),new e.init(1731405415,4290775857),new e.init(2394180231,1750603025),new e.init(3675008525,1694076839),new e.init(1203062813,3204075428)])},_doFinalize:function(){var t=r._doFinalize.call(this);return t.sigBytes-=16,t}});t.SHA384=r._createHelper(i),t.HmacSHA384=r._createHmacHelper(i)}(),function(){var t=fe,e=(r=t.lib).WordArray,n=r.Hasher,r=t.algo,i=e.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),s=e.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),o=e.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),a=e.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=e.create([0,1518500249,1859775393,2400959708,2840853838]),u=e.create([1352829926,1548603684,1836072691,2053994217,0]);r=r.RIPEMD160=n.extend({_doReset:function(){this._hash=e.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=0;16>n;n++){var r=t[S=e+n];t[S]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var c,f,l,d,p,g,y,v,m,b,S=this._hash.words,w=(r=h.words,u.words),x=i.words,k=s.words,E=o.words,A=a.words;g=c=S[0],y=f=S[1],v=l=S[2],m=d=S[3],b=p=S[4];var F;for(n=0;80>n;n+=1)F=c+t[e+x[n]]|0,F=16>n?F+((f^l^d)+r[0]):32>n?F+((f&l|~f&d)+r[1]):48>n?F+(((f|~l)^d)+r[2]):64>n?F+((f&d|l&~d)+r[3]):F+((f^(l|~d))+r[4]),F=(F=(F|=0)<<E[n]|F>>>32-E[n])+p|0,c=p,p=d,d=l<<10|l>>>22,l=f,f=F,F=g+t[e+k[n]]|0,F=16>n?F+((y^(v|~m))+w[0]):32>n?F+((y&m|v&~m)+w[1]):48>n?F+(((y|~v)^m)+w[2]):64>n?F+((y&v|~y&m)+w[3]):F+((y^v^m)+w[4]),F=(F=(F|=0)<<A[n]|F>>>32-A[n])+b|0,g=b,b=m,m=v<<10|v>>>22,v=y,y=F;F=S[1]+l+m|0,S[1]=S[2]+d+b|0,S[2]=S[3]+p+g|0,S[3]=S[4]+c+y|0,S[4]=S[0]+f+v|0,S[0]=F},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;for(e[r>>>5]|=128<<24-r%32,e[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(e.length+1),this._process(),e=(t=this._hash).words,n=0;5>n;n++)r=e[n],e[n]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8);return t},clone:function(){var t=n.clone.call(this);return t._hash=this._hash.clone(),t}});t.RIPEMD160=n._createHelper(r),t.HmacRIPEMD160=n._createHmacHelper(r)}(Math),function(){var t=fe,e=t.enc.Utf8;t.algo.HMAC=t.lib.Base.extend({init:function(t,n){t=this._hasher=new t.init,"string"==typeof n&&(n=e.parse(n));var r=t.blockSize,i=4*r;n.sigBytes>i&&(n=t.finalize(n)),n.clamp();for(var s=this._oKey=n.clone(),o=this._iKey=n.clone(),a=s.words,h=o.words,u=0;u<r;u++)a[u]^=1549556828,h[u]^=909522486;s.sigBytes=o.sigBytes=i,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher;return t=e.finalize(t),e.reset(),e.finalize(this._oKey.clone().concat(t))}})}(),function(){var t,e=fe,n=(t=e.lib).Base,r=t.WordArray,i=(t=e.algo).HMAC,s=t.PBKDF2=n.extend({cfg:n.extend({keySize:4,hasher:t.SHA1,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){var n=this.cfg,s=i.create(n.hasher,t),o=r.create(),a=r.create([1]),h=o.words,u=a.words,c=n.keySize;for(n=n.iterations;h.length<c;){var f=s.update(e).finalize(a);s.reset();for(var l=f.words,d=l.length,p=f,g=1;g<n;g++){p=s.finalize(p),s.reset();for(var y=p.words,v=0;v<d;v++)l[v]^=y[v]}o.concat(f),u[0]++}return o.sigBytes=4*c,o}});e.PBKDF2=function(t,e,n){return s.create(n).compute(t,e)}}();var le,de="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",pe="=";function ge(t){var e,n,r="";for(e=0;e+3<=t.length;e+=3)n=parseInt(t.substring(e,e+3),16),r+=de.charAt(n>>6)+de.charAt(63&n);if(e+1==t.length?(n=parseInt(t.substring(e,e+1),16),r+=de.charAt(n<<2)):e+2==t.length&&(n=parseInt(t.substring(e,e+2),16),r+=de.charAt(n>>2)+de.charAt((3&n)<<4)),pe)for(;(3&r.length)>0;)r+=pe;return r}function ye(t){var e,n,r,i="",s=0;for(e=0;e<t.length&&t.charAt(e)!=pe;++e)(r=de.indexOf(t.charAt(e)))<0||(0==s?(i+=ke(r>>2),n=3&r,s=1):1==s?(i+=ke(n<<2|r>>4),n=15&r,s=2):2==s?(i+=ke(n),i+=ke(r>>2),n=3&r,s=3):(i+=ke(n<<2|r>>4),i+=ke(15&r),s=0));return 1==s&&(i+=ke(n<<2)),i}function ve(t,e,n){null!=t&&("number"==typeof t?this.fromNumber(t,e,n):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function me(){return new ve(null)}"Microsoft Internet Explorer"==ie.appName?(ve.prototype.am=function(t,e,n,r,i,s){for(var o=32767&e,a=e>>15;--s>=0;){var h=32767&this[t],u=this[t++]>>15,c=a*h+u*o;i=((h=o*h+((32767&c)<<15)+n[r]+(1073741823&i))>>>30)+(c>>>15)+a*u+(i>>>30),n[r++]=1073741823&h}return i},le=30):"Netscape"!=ie.appName?(ve.prototype.am=function(t,e,n,r,i,s){for(;--s>=0;){var o=e*this[t++]+n[r]+i;i=Math.floor(o/67108864),n[r++]=67108863&o}return i},le=26):(ve.prototype.am=function(t,e,n,r,i,s){for(var o=16383&e,a=e>>14;--s>=0;){var h=16383&this[t],u=this[t++]>>14,c=a*h+u*o;i=((h=o*h+((16383&c)<<14)+n[r]+i)>>28)+(c>>14)+a*u,n[r++]=268435455&h}return i},le=28),ve.prototype.DB=le,ve.prototype.DM=(1<<le)-1,ve.prototype.DV=1<<le;ve.prototype.FV=Math.pow(2,52),ve.prototype.F1=52-le,ve.prototype.F2=2*le-52;var be,Se,we="0123456789abcdefghijklmnopqrstuvwxyz",xe=new Array;for(be="0".charCodeAt(0),Se=0;Se<=9;++Se)xe[be++]=Se;for(be="a".charCodeAt(0),Se=10;Se<36;++Se)xe[be++]=Se;for(be="A".charCodeAt(0),Se=10;Se<36;++Se)xe[be++]=Se;function ke(t){return we.charAt(t)}function Ee(t,e){var n=xe[t.charCodeAt(e)];return null==n?-1:n}function Ae(t){var e=me();return e.fromInt(t),e}function Fe(t){var e,n=1;return 0!=(e=t>>>16)&&(t=e,n+=16),0!=(e=t>>8)&&(t=e,n+=8),0!=(e=t>>4)&&(t=e,n+=4),0!=(e=t>>2)&&(t=e,n+=2),0!=(e=t>>1)&&(t=e,n+=1),n}function Ce(t){this.m=t}function Te(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function De(t,e){return t&e}function Pe(t,e){return t|e}function Ie(t,e){return t^e}function Re(t,e){return t&~e}function _e(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function Be(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function He(){}function Ne(t){return t}function Oe(t){this.r2=me(),this.q3=me(),ve.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}Ce.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},Ce.prototype.revert=function(t){return t},Ce.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},Ce.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},Ce.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},Te.prototype.convert=function(t){var e=me();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(ve.ZERO)>0&&this.m.subTo(e,e),e},Te.prototype.revert=function(t){var e=me();return t.copyTo(e),this.reduce(e),e},Te.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=32767&t[e],r=n*this.mpl+((n*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[n=e+this.m.t]+=this.m.am(0,r,t,e,0,this.m.t);t[n]>=t.DV;)t[n]-=t.DV,t[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},Te.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},Te.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},ve.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},ve.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0},ve.prototype.fromString=function(t,e){var n;if(16==e)n=4;else if(8==e)n=3;else if(256==e)n=8;else if(2==e)n=1;else if(32==e)n=5;else{if(4!=e)return void this.fromRadix(t,e);n=2}this.t=0,this.s=0;for(var r=t.length,i=!1,s=0;--r>=0;){var o=8==n?255&t[r]:Ee(t,r);o<0?"-"==t.charAt(r)&&(i=!0):(i=!1,0==s?this[this.t++]=o:s+n>this.DB?(this[this.t-1]|=(o&(1<<this.DB-s)-1)<<s,this[this.t++]=o>>this.DB-s):this[this.t-1]|=o<<s,(s+=n)>=this.DB&&(s-=this.DB))}8==n&&0!=(128&t[0])&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),i&&ve.ZERO.subTo(this,this)},ve.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},ve.prototype.dlShiftTo=function(t,e){var n;for(n=this.t-1;n>=0;--n)e[n+t]=this[n];for(n=t-1;n>=0;--n)e[n]=0;e.t=this.t+t,e.s=this.s},ve.prototype.drShiftTo=function(t,e){for(var n=t;n<this.t;++n)e[n-t]=this[n];e.t=Math.max(this.t-t,0),e.s=this.s},ve.prototype.lShiftTo=function(t,e){var n,r=t%this.DB,i=this.DB-r,s=(1<<i)-1,o=Math.floor(t/this.DB),a=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)e[n+o+1]=this[n]>>i|a,a=(this[n]&s)<<r;for(n=o-1;n>=0;--n)e[n]=0;e[o]=a,e.t=this.t+o+1,e.s=this.s,e.clamp()},ve.prototype.rShiftTo=function(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t)e.t=0;else{var r=t%this.DB,i=this.DB-r,s=(1<<r)-1;e[0]=this[n]>>r;for(var o=n+1;o<this.t;++o)e[o-n-1]|=(this[o]&s)<<i,e[o-n]=this[o]>>r;r>0&&(e[this.t-n-1]|=(this.s&s)<<i),e.t=this.t-n,e.clamp()}},ve.prototype.subTo=function(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this[n]-t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r-=t[n],e[n++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=r<0?-1:0,r<-1?e[n++]=this.DV+r:r>0&&(e[n++]=r),e.t=n,e.clamp()},ve.prototype.multiplyTo=function(t,e){var n=this.abs(),r=t.abs(),i=n.t;for(e.t=i+r.t;--i>=0;)e[i]=0;for(i=0;i<r.t;++i)e[i+n.t]=n.am(0,r[i],e,i,0,n.t);e.s=0,e.clamp(),this.s!=t.s&&ve.ZERO.subTo(e,e)},ve.prototype.squareTo=function(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t[n]=0;for(n=0;n<e.t-1;++n){var r=e.am(n,e[n],t,2*n,0,1);(t[n+e.t]+=e.am(n+1,2*e[n],t,2*n+1,r,e.t-n-1))>=e.DV&&(t[n+e.t]-=e.DV,t[n+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(n,e[n],t,2*n,0,1)),t.s=0,t.clamp()},ve.prototype.divRemTo=function(t,e,n){var r=t.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t)return null!=e&&e.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=me());var s=me(),o=this.s,a=t.s,h=this.DB-Fe(r[r.t-1]);h>0?(r.lShiftTo(h,s),i.lShiftTo(h,n)):(r.copyTo(s),i.copyTo(n));var u=s.t,c=s[u-1];if(0!=c){var f=c*(1<<this.F1)+(u>1?s[u-2]>>this.F2:0),l=this.FV/f,d=(1<<this.F1)/f,p=1<<this.F2,g=n.t,y=g-u,v=null==e?me():e;for(s.dlShiftTo(y,v),n.compareTo(v)>=0&&(n[n.t++]=1,n.subTo(v,n)),ve.ONE.dlShiftTo(u,v),v.subTo(s,s);s.t<u;)s[s.t++]=0;for(;--y>=0;){var m=n[--g]==c?this.DM:Math.floor(n[g]*l+(n[g-1]+p)*d);if((n[g]+=s.am(0,m,n,y,0,u))<m)for(s.dlShiftTo(y,v),n.subTo(v,n);n[g]<--m;)n.subTo(v,n)}null!=e&&(n.drShiftTo(u,e),o!=a&&ve.ZERO.subTo(e,e)),n.t=u,n.clamp(),h>0&&n.rShiftTo(h,n),o<0&&ve.ZERO.subTo(n,n)}}},ve.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},ve.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},ve.prototype.exp=function(t,e){if(t>4294967295||t<1)return ve.ONE;var n=me(),r=me(),i=e.convert(this),s=Fe(t)-1;for(i.copyTo(n);--s>=0;)if(e.sqrTo(n,r),(t&1<<s)>0)e.mulTo(r,i,n);else{var o=n;n=r,r=o}return e.revert(n)},ve.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var n,r=(1<<e)-1,i=!1,s="",o=this.t,a=this.DB-o*this.DB%e;if(o-- >0)for(a<this.DB&&(n=this[o]>>a)>0&&(i=!0,s=ke(n));o>=0;)a<e?(n=(this[o]&(1<<a)-1)<<e-a,n|=this[--o]>>(a+=this.DB-e)):(n=this[o]>>(a-=e)&r,a<=0&&(a+=this.DB,--o)),n>0&&(i=!0),i&&(s+=ke(n));return i?s:"0"},ve.prototype.negate=function(){var t=me();return ve.ZERO.subTo(this,t),t},ve.prototype.abs=function(){return this.s<0?this.negate():this},ve.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var n=this.t;if(0!=(e=n-t.t))return this.s<0?-e:e;for(;--n>=0;)if(0!=(e=this[n]-t[n]))return e;return 0},ve.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+Fe(this[this.t-1]^this.s&this.DM)},ve.prototype.mod=function(t){var e=me();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(ve.ZERO)>0&&t.subTo(e,e),e},ve.prototype.modPowInt=function(t,e){var n;return n=t<256||e.isEven()?new Ce(e):new Te(e),this.exp(t,n)},ve.ZERO=Ae(0),ve.ONE=Ae(1),He.prototype.convert=Ne,He.prototype.revert=Ne,He.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n)},He.prototype.sqrTo=function(t,e){t.squareTo(e)},Oe.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=me();return t.copyTo(e),this.reduce(e),e},Oe.prototype.revert=function(t){return t},Oe.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},Oe.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},Oe.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)};var je=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],Le=(1<<26)/je[je.length-1];function Me(){this.i=0,this.j=0,this.S=new Array}ve.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},ve.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),n=Math.pow(t,e),r=Ae(n),i=me(),s=me(),o="";for(this.divRemTo(r,i,s);i.signum()>0;)o=(n+s.intValue()).toString(t).substr(1)+o,i.divRemTo(r,i,s);return s.intValue().toString(t)+o},ve.prototype.fromRadix=function(t,e){this.fromInt(0),null==e&&(e=10);for(var n=this.chunkSize(e),r=Math.pow(e,n),i=!1,s=0,o=0,a=0;a<t.length;++a){var h=Ee(t,a);h<0?"-"==t.charAt(a)&&0==this.signum()&&(i=!0):(o=e*o+h,++s>=n&&(this.dMultiply(r),this.dAddOffset(o,0),s=0,o=0))}s>0&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(o,0)),i&&ve.ZERO.subTo(this,this)},ve.prototype.fromNumber=function(t,e,n){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,n),this.testBit(t-1)||this.bitwiseTo(ve.ONE.shiftLeft(t-1),Pe,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(ve.ONE.shiftLeft(t-1),this);else{var r=new Array,i=7&t;r.length=1+(t>>3),e.nextBytes(r),i>0?r[0]&=(1<<i)-1:r[0]=0,this.fromString(r,256)}},ve.prototype.bitwiseTo=function(t,e,n){var r,i,s=Math.min(t.t,this.t);for(r=0;r<s;++r)n[r]=e(this[r],t[r]);if(t.t<this.t){for(i=t.s&this.DM,r=s;r<this.t;++r)n[r]=e(this[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=s;r<t.t;++r)n[r]=e(i,t[r]);n.t=t.t}n.s=e(this.s,t.s),n.clamp()},ve.prototype.changeBit=function(t,e){var n=ve.ONE.shiftLeft(t);return this.bitwiseTo(n,e,n),n},ve.prototype.addTo=function(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this[n]+t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r+=t[n],e[n++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=r<0?-1:0,r>0?e[n++]=r:r<-1&&(e[n++]=this.DV+r),e.t=n,e.clamp()},ve.prototype.dMultiply=function(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},ve.prototype.dAddOffset=function(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}},ve.prototype.multiplyLowerTo=function(t,e,n){var r,i=Math.min(this.t+t.t,e);for(n.s=0,n.t=i;i>0;)n[--i]=0;for(r=n.t-this.t;i<r;++i)n[i+this.t]=this.am(0,t[i],n,i,0,this.t);for(r=Math.min(t.t,e);i<r;++i)this.am(0,t[i],n,i,0,e-i);n.clamp()},ve.prototype.multiplyUpperTo=function(t,e,n){--e;var r=n.t=this.t+t.t-e;for(n.s=0;--r>=0;)n[r]=0;for(r=Math.max(e-this.t,0);r<t.t;++r)n[this.t+r-e]=this.am(e-r,t[r],n,0,0,this.t+r-e);n.clamp(),n.drShiftTo(1,n)},ve.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,n=this.s<0?t-1:0;if(this.t>0)if(0==e)n=this[0]%t;else for(var r=this.t-1;r>=0;--r)n=(e*n+this[r])%t;return n},ve.prototype.millerRabin=function(t){var e=this.subtract(ve.ONE),n=e.getLowestSetBit();if(n<=0)return!1;var r=e.shiftRight(n);(t=t+1>>1)>je.length&&(t=je.length);for(var i=me(),s=0;s<t;++s){i.fromInt(je[Math.floor(Math.random()*je.length)]);var o=i.modPow(r,this);if(0!=o.compareTo(ve.ONE)&&0!=o.compareTo(e)){for(var a=1;a++<n&&0!=o.compareTo(e);)if(0==(o=o.modPowInt(2,this)).compareTo(ve.ONE))return!1;if(0!=o.compareTo(e))return!1}}return!0},ve.prototype.clone=function(){var t=me();return this.copyTo(t),t},ve.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},ve.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},ve.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},ve.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},ve.prototype.toByteArray=function(){var t=this.t,e=new Array;e[0]=this.s;var n,r=this.DB-t*this.DB%8,i=0;if(t-- >0)for(r<this.DB&&(n=this[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this[t]&(1<<r)-1)<<8-r,n|=this[--t]>>(r+=this.DB-8)):(n=this[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),0!=(128&n)&&(n|=-256),0==i&&(128&this.s)!=(128&n)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e},ve.prototype.equals=function(t){return 0==this.compareTo(t)},ve.prototype.min=function(t){return this.compareTo(t)<0?this:t},ve.prototype.max=function(t){return this.compareTo(t)>0?this:t},ve.prototype.and=function(t){var e=me();return this.bitwiseTo(t,De,e),e},ve.prototype.or=function(t){var e=me();return this.bitwiseTo(t,Pe,e),e},ve.prototype.xor=function(t){var e=me();return this.bitwiseTo(t,Ie,e),e},ve.prototype.andNot=function(t){var e=me();return this.bitwiseTo(t,Re,e),e},ve.prototype.not=function(){for(var t=me(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t},ve.prototype.shiftLeft=function(t){var e=me();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},ve.prototype.shiftRight=function(t){var e=me();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},ve.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+_e(this[t]);return this.s<0?this.t*this.DB:-1},ve.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n)t+=Be(this[n]^e);return t},ve.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)},ve.prototype.setBit=function(t){return this.changeBit(t,Pe)},ve.prototype.clearBit=function(t){return this.changeBit(t,Re)},ve.prototype.flipBit=function(t){return this.changeBit(t,Ie)},ve.prototype.add=function(t){var e=me();return this.addTo(t,e),e},ve.prototype.subtract=function(t){var e=me();return this.subTo(t,e),e},ve.prototype.multiply=function(t){var e=me();return this.multiplyTo(t,e),e},ve.prototype.divide=function(t){var e=me();return this.divRemTo(t,e,null),e},ve.prototype.remainder=function(t){var e=me();return this.divRemTo(t,null,e),e},ve.prototype.divideAndRemainder=function(t){var e=me(),n=me();return this.divRemTo(t,e,n),new Array(e,n)},ve.prototype.modPow=function(t,e){var n,r,i=t.bitLength(),s=Ae(1);if(i<=0)return s;n=i<18?1:i<48?3:i<144?4:i<768?5:6,r=i<8?new Ce(e):e.isEven()?new Oe(e):new Te(e);var o=new Array,a=3,h=n-1,u=(1<<n)-1;if(o[1]=r.convert(this),n>1){var c=me();for(r.sqrTo(o[1],c);a<=u;)o[a]=me(),r.mulTo(c,o[a-2],o[a]),a+=2}var f,l,d=t.t-1,p=!0,g=me();for(i=Fe(t[d])-1;d>=0;){for(i>=h?f=t[d]>>i-h&u:(f=(t[d]&(1<<i+1)-1)<<h-i,d>0&&(f|=t[d-1]>>this.DB+i-h)),a=n;0==(1&f);)f>>=1,--a;if((i-=a)<0&&(i+=this.DB,--d),p)o[f].copyTo(s),p=!1;else{for(;a>1;)r.sqrTo(s,g),r.sqrTo(g,s),a-=2;a>0?r.sqrTo(s,g):(l=s,s=g,g=l),r.mulTo(g,o[f],s)}for(;d>=0&&0==(t[d]&1<<i);)r.sqrTo(s,g),l=s,s=g,g=l,--i<0&&(i=this.DB-1,--d)}return r.revert(s)},ve.prototype.modInverse=function(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return ve.ZERO;for(var n=t.clone(),r=this.clone(),i=Ae(1),s=Ae(0),o=Ae(0),a=Ae(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),e?(i.isEven()&&s.isEven()||(i.addTo(this,i),s.subTo(t,s)),i.rShiftTo(1,i)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;r.isEven();)r.rShiftTo(1,r),e?(o.isEven()&&a.isEven()||(o.addTo(this,o),a.subTo(t,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);n.compareTo(r)>=0?(n.subTo(r,n),e&&i.subTo(o,i),s.subTo(a,s)):(r.subTo(n,r),e&&o.subTo(i,o),a.subTo(s,a))}return 0!=r.compareTo(ve.ONE)?ve.ZERO:a.compareTo(t)>=0?a.subtract(t):a.signum()<0?(a.addTo(t,a),a.signum()<0?a.add(t):a):a},ve.prototype.pow=function(t){return this.exp(t,new He)},ve.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),n=t.s<0?t.negate():t.clone();if(e.compareTo(n)<0){var r=e;e=n,n=r}var i=e.getLowestSetBit(),s=n.getLowestSetBit();if(s<0)return e;for(i<s&&(s=i),s>0&&(e.rShiftTo(s,e),n.rShiftTo(s,n));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),e.compareTo(n)>=0?(e.subTo(n,e),e.rShiftTo(1,e)):(n.subTo(e,n),n.rShiftTo(1,n));return s>0&&n.lShiftTo(s,n),n},ve.prototype.isProbablePrime=function(t){var e,n=this.abs();if(1==n.t&&n[0]<=je[je.length-1]){for(e=0;e<je.length;++e)if(n[0]==je[e])return!0;return!1}if(n.isEven())return!1;for(e=1;e<je.length;){for(var r=je[e],i=e+1;i<je.length&&r<Le;)r*=je[i++];for(r=n.modInt(r);e<i;)if(r%je[e++]==0)return!1}return n.millerRabin(t)},ve.prototype.square=function(){var t=me();return this.squareTo(t),t},Me.prototype.init=function(t){var e,n,r;for(e=0;e<256;++e)this.S[e]=e;for(n=0,e=0;e<256;++e)n=n+this.S[e]+t[e%t.length]&255,r=this.S[e],this.S[e]=this.S[n],this.S[n]=r;this.i=0,this.j=0},Me.prototype.next=function(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]};var Ve,Ue,Ke,qe=256;function ze(){var t;t=(new Date).getTime(),Ue[Ke++]^=255&t,Ue[Ke++]^=t>>8&255,Ue[Ke++]^=t>>16&255,Ue[Ke++]^=t>>24&255,Ke>=qe&&(Ke-=qe)}if(null==Ue){var Ye;if(Ue=new Array,Ke=0,void 0!==se&&(void 0!==se.crypto||void 0!==se.msCrypto)){var Ge=se.crypto||se.msCrypto;if(Ge.getRandomValues){var Je=new Uint8Array(32);for(Ge.getRandomValues(Je),Ye=0;Ye<32;++Ye)Ue[Ke++]=Je[Ye]}else if("Netscape"==ie.appName&&ie.appVersion<"5"){var We=se.crypto.random(32);for(Ye=0;Ye<We.length;++Ye)Ue[Ke++]=255&We.charCodeAt(Ye)}}for(;Ke<qe;)Ye=Math.floor(65536*Math.random()),Ue[Ke++]=Ye>>>8,Ue[Ke++]=255&Ye;Ke=0,ze()}function $e(){if(null==Ve){for(ze(),(Ve=new Me).init(Ue),Ke=0;Ke<Ue.length;++Ke)Ue[Ke]=0;Ke=0}return Ve.next()}function Xe(){}function Ze(t,e){return new ve(t,e)}function Qe(t,e,n){for(var r="",i=0;r.length<e;)r+=n(String.fromCharCode.apply(String,t.concat([(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i]))),i+=1;return r}function tn(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function en(t,e,n){for(var r="",i=0;r.length<e;)r+=n(t+String.fromCharCode.apply(String,[(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i])),i+=1;return r}function nn(t,e){this.x=e,this.q=t}function rn(t,e,n,r){this.curve=t,this.x=e,this.y=n,this.z=null==r?ve.ONE:r,this.zinv=null}function sn(t,e,n){this.q=t,this.a=this.fromBigInteger(e),this.b=this.fromBigInteger(n),this.infinity=new rn(this,null,null)}Xe.prototype.nextBytes=function(t){var e;for(e=0;e<t.length;++e)t[e]=$e()},tn.prototype.doPublic=function(t){return t.modPowInt(this.e,this.n)},tn.prototype.setPublic=function(t,e){if(this.isPublic=!0,this.isPrivate=!1,"string"!=typeof t)this.n=t,this.e=e;else{if(!(null!=t&&null!=e&&t.length>0&&e.length>0))throw"Invalid RSA public key";this.n=Ze(t,16),this.e=parseInt(e,16)}},tn.prototype.encrypt=function(t){var e=function(t,e){if(e<t.length+11)return alert("Message too long for RSA"),null;for(var n=new Array,r=t.length-1;r>=0&&e>0;){var i=t.charCodeAt(r--);i<128?n[--e]=i:i>127&&i<2048?(n[--e]=63&i|128,n[--e]=i>>6|192):(n[--e]=63&i|128,n[--e]=i>>6&63|128,n[--e]=i>>12|224)}n[--e]=0;for(var s=new Xe,o=new Array;e>2;){for(o[0]=0;0==o[0];)s.nextBytes(o);n[--e]=o[0]}return n[--e]=2,n[--e]=0,new ve(n)}(t,this.n.bitLength()+7>>3);if(null==e)return null;var n=this.doPublic(e);if(null==n)return null;var r=n.toString(16);return 0==(1&r.length)?r:"0"+r},tn.prototype.encryptOAEP=function(t,e,n){var r=function(t,e,n,r){var i=an.crypto.MessageDigest,s=an.crypto.Util,o=null;if(n||(n="sha1"),"string"==typeof n&&(o=i.getCanonicalAlgName(n),r=i.getHashLength(o),n=function(t){return bn(s.hashString(t,o))}),t.length+2*r+2>e)throw"Message too long for RSA";var a,h="";for(a=0;a<e-t.length-2*r-2;a+=1)h+="\0";var u=n("")+h+""+t,c=new Array(r);(new Xe).nextBytes(c);var f=Qe(c,u.length,n),l=[];for(a=0;a<u.length;a+=1)l[a]=u.charCodeAt(a)^f.charCodeAt(a);var d=Qe(l,c.length,n),p=[0];for(a=0;a<c.length;a+=1)p[a+1]=c[a]^d.charCodeAt(a);return new ve(p.concat(l))}(t,this.n.bitLength()+7>>3,e,n);if(null==r)return null;var i=this.doPublic(r);if(null==i)return null;var s=i.toString(16);return 0==(1&s.length)?s:"0"+s},tn.prototype.type="RSA",tn.prototype.doPrivate=function(t){if(null==this.p||null==this.q)return t.modPow(this.d,this.n);for(var e=t.mod(this.p).modPow(this.dmp1,this.p),n=t.mod(this.q).modPow(this.dmq1,this.q);e.compareTo(n)<0;)e=e.add(this.p);return e.subtract(n).multiply(this.coeff).mod(this.p).multiply(this.q).add(n)},tn.prototype.setPrivate=function(t,e,n){this.isPrivate=!0,"string"!=typeof t?(this.n=t,this.e=e,this.d=n):null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=Ze(t,16),this.e=parseInt(e,16),this.d=Ze(n,16)):alert("Invalid RSA private key")},tn.prototype.setPrivateEx=function(t,e,n,r,i,s,o,a){if(this.isPrivate=!0,this.isPublic=!1,null==t)throw"RSASetPrivateEx N == null";if(null==e)throw"RSASetPrivateEx E == null";if(0==t.length)throw"RSASetPrivateEx N.length == 0";if(0==e.length)throw"RSASetPrivateEx E.length == 0";null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=Ze(t,16),this.e=parseInt(e,16),this.d=Ze(n,16),this.p=Ze(r,16),this.q=Ze(i,16),this.dmp1=Ze(s,16),this.dmq1=Ze(o,16),this.coeff=Ze(a,16)):alert("Invalid RSA private key in RSASetPrivateEx")},tn.prototype.generate=function(t,e){var n=new Xe,r=t>>1;this.e=parseInt(e,16);for(var i=new ve(e,16);;){for(;this.p=new ve(t-r,1,n),0!=this.p.subtract(ve.ONE).gcd(i).compareTo(ve.ONE)||!this.p.isProbablePrime(10););for(;this.q=new ve(r,1,n),0!=this.q.subtract(ve.ONE).gcd(i).compareTo(ve.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var s=this.p;this.p=this.q,this.q=s}var o=this.p.subtract(ve.ONE),a=this.q.subtract(ve.ONE),h=o.multiply(a);if(0==h.gcd(i).compareTo(ve.ONE)){this.n=this.p.multiply(this.q),this.d=i.modInverse(h),this.dmp1=this.d.mod(o),this.dmq1=this.d.mod(a),this.coeff=this.q.modInverse(this.p);break}}this.isPrivate=!0},tn.prototype.decrypt=function(t){var e=Ze(t,16),n=this.doPrivate(e);return null==n?null:function(t,e){for(var n=t.toByteArray(),r=0;r<n.length&&0==n[r];)++r;if(n.length-r!=e-1||2!=n[r])return null;for(++r;0!=n[r];)if(++r>=n.length)return null;for(var i="";++r<n.length;){var s=255&n[r];s<128?i+=String.fromCharCode(s):s>191&&s<224?(i+=String.fromCharCode((31&s)<<6|63&n[r+1]),++r):(i+=String.fromCharCode((15&s)<<12|(63&n[r+1])<<6|63&n[r+2]),r+=2)}return i}(n,this.n.bitLength()+7>>3)},tn.prototype.decryptOAEP=function(t,e,n){var r=Ze(t,16),i=this.doPrivate(r);return null==i?null:function(t,e,n,r){var i=an.crypto.MessageDigest,s=an.crypto.Util,o=null;for(n||(n="sha1"),"string"==typeof n&&(o=i.getCanonicalAlgName(n),r=i.getHashLength(o),n=function(t){return bn(s.hashString(t,o))}),t=t.toByteArray(),a=0;a<t.length;a+=1)t[a]&=255;for(;t.length<e;)t.unshift(0);if((t=String.fromCharCode.apply(String,t)).length<2*r+2)throw"Cipher too short";var a,h=t.substr(1,r),u=t.substr(r+1),c=en(u,r,n),f=[];for(a=0;a<h.length;a+=1)f[a]=h.charCodeAt(a)^c.charCodeAt(a);var l=en(String.fromCharCode.apply(String,f),t.length-r,n),d=[];for(a=0;a<u.length;a+=1)d[a]=u.charCodeAt(a)^l.charCodeAt(a);if((d=String.fromCharCode.apply(String,d)).substr(0,r)!==n(""))throw"Hash mismatch";var p=(d=d.substr(r)).indexOf("");if((-1!=p?d.substr(0,p).lastIndexOf("\0"):-1)+1!=p)throw"Malformed data";return d.substr(p+1)}(i,this.n.bitLength()+7>>3,e,n)},nn.prototype.equals=function(t){return t==this||this.q.equals(t.q)&&this.x.equals(t.x)},nn.prototype.toBigInteger=function(){return this.x},nn.prototype.negate=function(){return new nn(this.q,this.x.negate().mod(this.q))},nn.prototype.add=function(t){return new nn(this.q,this.x.add(t.toBigInteger()).mod(this.q))},nn.prototype.subtract=function(t){return new nn(this.q,this.x.subtract(t.toBigInteger()).mod(this.q))},nn.prototype.multiply=function(t){return new nn(this.q,this.x.multiply(t.toBigInteger()).mod(this.q))},nn.prototype.square=function(){return new nn(this.q,this.x.square().mod(this.q))},nn.prototype.divide=function(t){return new nn(this.q,this.x.multiply(t.toBigInteger().modInverse(this.q)).mod(this.q))},rn.prototype.getX=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},rn.prototype.getY=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},rn.prototype.equals=function(t){return t==this||(this.isInfinity()?t.isInfinity():t.isInfinity()?this.isInfinity():!!t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q).equals(ve.ZERO)&&t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q).equals(ve.ZERO))},rn.prototype.isInfinity=function(){return null==this.x&&null==this.y||this.z.equals(ve.ZERO)&&!this.y.toBigInteger().equals(ve.ZERO)},rn.prototype.negate=function(){return new rn(this.curve,this.x,this.y.negate(),this.z)},rn.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q),n=t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q);if(ve.ZERO.equals(n))return ve.ZERO.equals(e)?this.twice():this.curve.getInfinity();var r=new ve("3"),i=this.x.toBigInteger(),s=this.y.toBigInteger(),o=(t.x.toBigInteger(),t.y.toBigInteger(),n.square()),a=o.multiply(n),h=i.multiply(o),u=e.square().multiply(this.z),c=u.subtract(h.shiftLeft(1)).multiply(t.z).subtract(a).multiply(n).mod(this.curve.q),f=h.multiply(r).multiply(e).subtract(s.multiply(a)).subtract(u.multiply(e)).multiply(t.z).add(e.multiply(a)).mod(this.curve.q),l=a.multiply(this.z).multiply(t.z).mod(this.curve.q);return new rn(this.curve,this.curve.fromBigInteger(c),this.curve.fromBigInteger(f),l)},rn.prototype.twice=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var t=new ve("3"),e=this.x.toBigInteger(),n=this.y.toBigInteger(),r=n.multiply(this.z),i=r.multiply(n).mod(this.curve.q),s=this.curve.a.toBigInteger(),o=e.square().multiply(t);ve.ZERO.equals(s)||(o=o.add(this.z.square().multiply(s)));var a=(o=o.mod(this.curve.q)).square().subtract(e.shiftLeft(3).multiply(i)).shiftLeft(1).multiply(r).mod(this.curve.q),h=o.multiply(t).multiply(e).subtract(i.shiftLeft(1)).shiftLeft(2).multiply(i).subtract(o.square().multiply(o)).mod(this.curve.q),u=r.square().multiply(r).shiftLeft(3).mod(this.curve.q);return new rn(this.curve,this.curve.fromBigInteger(a),this.curve.fromBigInteger(h),u)},rn.prototype.multiply=function(t){if(this.isInfinity())return this;if(0==t.signum())return this.curve.getInfinity();var e,n=t,r=n.multiply(new ve("3")),i=this.negate(),s=this;for(e=r.bitLength()-2;e>0;--e){s=s.twice();var o=r.testBit(e);o!=n.testBit(e)&&(s=s.add(o?this:i))}return s},rn.prototype.multiplyTwo=function(t,e,n){var r;r=t.bitLength()>n.bitLength()?t.bitLength()-1:n.bitLength()-1;for(var i=this.curve.getInfinity(),s=this.add(e);r>=0;)i=i.twice(),t.testBit(r)?i=n.testBit(r)?i.add(s):i.add(this):n.testBit(r)&&(i=i.add(e)),--r;return i},sn.prototype.getQ=function(){return this.q},sn.prototype.getA=function(){return this.a},sn.prototype.getB=function(){return this.b},sn.prototype.equals=function(t){return t==this||this.q.equals(t.q)&&this.a.equals(t.a)&&this.b.equals(t.b)},sn.prototype.getInfinity=function(){return this.infinity},sn.prototype.fromBigInteger=function(t){return new nn(this.q,t)},sn.prototype.decodePointHex=function(t){switch(parseInt(t.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:return null;case 4:case 6:case 7:var e=(t.length-2)/2,n=t.substr(2,e),r=t.substr(e+2,e);return new rn(this,this.fromBigInteger(new ve(n,16)),this.fromBigInteger(new ve(r,16)));default:return null}},nn.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},rn.prototype.getEncoded=function(t){var e=function(t,e){var n=t.toByteArrayUnsigned();if(e<n.length)n=n.slice(n.length-e);else for(;e>n.length;)n.unshift(0);return n},n=this.getX().toBigInteger(),r=this.getY().toBigInteger(),i=e(n,32);return t?r.isEven()?i.unshift(2):i.unshift(3):(i.unshift(4),i=i.concat(e(r,32))),i},rn.decodeFrom=function(t,e){e[0];var n=e.length-1,r=e.slice(1,1+n/2),i=e.slice(1+n/2,1+n);r.unshift(0),i.unshift(0);var s=new ve(r),o=new ve(i);return new rn(t,t.fromBigInteger(s),t.fromBigInteger(o))},rn.decodeFromHex=function(t,e){e.substr(0,2);var n=e.length-2,r=e.substr(2,n/2),i=e.substr(2+n/2,n/2),s=new ve(r,16),o=new ve(i,16);return new rn(t,t.fromBigInteger(s),t.fromBigInteger(o))},rn.prototype.add2D=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;if(this.x.equals(t.x))return this.y.equals(t.y)?this.twice():this.curve.getInfinity();var e=t.x.subtract(this.x),n=t.y.subtract(this.y).divide(e),r=n.square().subtract(this.x).subtract(t.x),i=n.multiply(this.x.subtract(r)).subtract(this.y);return new rn(this.curve,r,i)},rn.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var t=this.curve.fromBigInteger(ve.valueOf(2)),e=this.curve.fromBigInteger(ve.valueOf(3)),n=this.x.square().multiply(e).add(this.curve.a).divide(this.y.multiply(t)),r=n.square().subtract(this.x.multiply(t)),i=n.multiply(this.x.subtract(r)).subtract(this.y);return new rn(this.curve,r,i)},rn.prototype.multiply2D=function(t){if(this.isInfinity())return this;if(0==t.signum())return this.curve.getInfinity();var e,n=t,r=n.multiply(new ve("3")),i=this.negate(),s=this;for(e=r.bitLength()-2;e>0;--e){s=s.twice();var o=r.testBit(e);o!=n.testBit(e)&&(s=s.add2D(o?this:i))}return s},rn.prototype.isOnCurve=function(){var t=this.getX().toBigInteger(),e=this.getY().toBigInteger(),n=this.curve.getA().toBigInteger(),r=this.curve.getB().toBigInteger(),i=this.curve.getQ(),s=e.multiply(e).mod(i),o=t.multiply(t).multiply(t).add(n.multiply(t)).add(r).mod(i);return s.equals(o)},rn.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},rn.prototype.validate=function(){var t=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var e=this.getX().toBigInteger(),n=this.getY().toBigInteger();if(e.compareTo(ve.ONE)<0||e.compareTo(t.subtract(ve.ONE))>0)throw new Error("x coordinate out of bounds");if(n.compareTo(ve.ONE)<0||n.compareTo(t.subtract(ve.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(t).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};var on=function(){var t=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),e=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),n={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function r(t,e,r){return e?n[e]:String.fromCharCode(parseInt(r,16))}var i=new String(""),s=Object.hasOwnProperty;return function(n,o){var a,h,u=n.match(t),c=u[0],f=!1;"{"===c?a={}:"["===c?a=[]:(a=[],f=!0);for(var l=[a],d=1-f,p=u.length;d<p;++d){var g;switch((c=u[d]).charCodeAt(0)){default:(g=l[0])[h||g.length]=+c,h=void 0;break;case 34:if(-1!==(c=c.substring(1,c.length-1)).indexOf("\\")&&(c=c.replace(e,r)),g=l[0],!h){if(!(g instanceof Array)){h=c||i;break}h=g.length}g[h]=c,h=void 0;break;case 91:g=l[0],l.unshift(g[h||g.length]=[]),h=void 0;break;case 93:l.shift();break;case 102:(g=l[0])[h||g.length]=!1,h=void 0;break;case 110:(g=l[0])[h||g.length]=null,h=void 0;break;case 116:(g=l[0])[h||g.length]=!0,h=void 0;break;case 123:g=l[0],l.unshift(g[h||g.length]={}),h=void 0;break;case 125:l.shift()}}if(f){if(1!==l.length)throw new Error;a=a[0]}else if(l.length)throw new Error;if(o){var y=function(t,e){var n=t[e];if(n&&"object"==typeof n){var r=null;for(var i in n)if(s.call(n,i)&&n!==t){var a=y(n,i);void 0!==a?n[i]=a:(r||(r=[]),r.push(i))}if(r)for(var h=r.length;--h>=0;)delete n[r[h]]}return o.call(t,e,n)};a=y({"":a},"")}return a}}();void 0!==an&&an||(an={}),void 0!==an.asn1&&an.asn1||(an.asn1={}),an.asn1.ASN1Util=new function(){this.integerToByteHex=function(t){var e=t.toString(16);return e.length%2==1&&(e="0"+e),e},this.bigIntToMinTwosComplementsHex=function(t){var e=t.toString(16);if("-"!=e.substr(0,1))e.length%2==1?e="0"+e:e.match(/^[0-7]/)||(e="00"+e);else{var n=e.substr(1).length;n%2==1?n+=1:e.match(/^[0-7]/)||(n+=2);for(var r="",i=0;i<n;i++)r+="f";e=new ve(r,16).xor(t).add(ve.ONE).toString(16).replace(/^-/,"")}return e},this.getPEMStringFromHex=function(t,e){return xn(t,e)},this.newObject=function(t){var e=an.asn1,n=e.DERBoolean,r=e.DERInteger,i=e.DERBitString,s=e.DEROctetString,o=e.DERNull,a=e.DERObjectIdentifier,h=e.DEREnumerated,u=e.DERUTF8String,c=e.DERNumericString,f=e.DERPrintableString,l=e.DERTeletexString,d=e.DERIA5String,p=e.DERUTCTime,g=e.DERGeneralizedTime,y=e.DERSequence,v=e.DERSet,m=e.DERTaggedObject,b=e.ASN1Util.newObject,S=Object.keys(t);if(1!=S.length)throw"key of param shall be only one.";var w=S[0];if(-1==":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:".indexOf(":"+w+":"))throw"undefined key: "+w;if("bool"==w)return new n(t[w]);if("int"==w)return new r(t[w]);if("bitstr"==w)return new i(t[w]);if("octstr"==w)return new s(t[w]);if("null"==w)return new o(t[w]);if("oid"==w)return new a(t[w]);if("enum"==w)return new h(t[w]);if("utf8str"==w)return new u(t[w]);if("numstr"==w)return new c(t[w]);if("prnstr"==w)return new f(t[w]);if("telstr"==w)return new l(t[w]);if("ia5str"==w)return new d(t[w]);if("utctime"==w)return new p(t[w]);if("gentime"==w)return new g(t[w]);if("seq"==w){for(var x=t[w],k=[],E=0;E<x.length;E++){var A=b(x[E]);k.push(A)}return new y({array:k})}if("set"==w){for(x=t[w],k=[],E=0;E<x.length;E++){A=b(x[E]);k.push(A)}return new v({array:k})}if("tag"==w){var F=t[w];if("[object Array]"===Object.prototype.toString.call(F)&&3==F.length){var C=b(F[2]);return new m({tag:F[0],explicit:F[1],obj:C})}var T={};if(void 0!==F.explicit&&(T.explicit=F.explicit),void 0!==F.tag&&(T.tag=F.tag),void 0===F.obj)throw"obj shall be specified for 'tag'.";return T.obj=b(F.obj),new m(T)}},this.jsonToASN1HEX=function(t){return this.newObject(t).getEncodedHex()}},an.asn1.ASN1Util.oidHexToInt=function(t){for(var e="",n=parseInt(t.substr(0,2),16),r=(e=Math.floor(n/40)+"."+n%40,""),i=2;i<t.length;i+=2){var s=("00000000"+parseInt(t.substr(i,2),16).toString(2)).slice(-8);if(r+=s.substr(1,7),"0"==s.substr(0,1))e=e+"."+new ve(r,2).toString(10),r=""}return e},an.asn1.ASN1Util.oidIntToHex=function(t){var e=function(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e},n=function(t){var n="",r=new ve(t,10).toString(2),i=7-r.length%7;7==i&&(i=0);for(var s="",o=0;o<i;o++)s+="0";r=s+r;for(o=0;o<r.length-1;o+=7){var a=r.substr(o,7);o!=r.length-7&&(a="1"+a),n+=e(parseInt(a,2))}return n};if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var r="",i=t.split("."),s=40*parseInt(i[0])+parseInt(i[1]);r+=e(s),i.splice(0,2);for(var o=0;o<i.length;o++)r+=n(i[o]);return r},an.asn1.ASN1Object=function(){this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw"this.hV is null or undefined.";if(this.hV.length%2==1)throw"value hex must be even length: n="+"".length+",v="+this.hV;var t=this.hV.length/2,e=t.toString(16);if(e.length%2==1&&(e="0"+e),t<128)return e;var n=e.length/2;if(n>15)throw"ASN.1 length too long to represent by 8x: n = "+t.toString(16);return(128+n).toString(16)+e},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""}},an.asn1.DERAbstractString=function(t){an.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=ln(this.s)},this.setStringHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t?this.setString(t):void 0!==t.str?this.setString(t.str):void 0!==t.hex&&this.setStringHex(t.hex))},oe.lang.extend(an.asn1.DERAbstractString,an.asn1.ASN1Object),an.asn1.DERAbstractTime=function(t){an.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(t){return utc=t.getTime()+6e4*t.getTimezoneOffset(),new Date(utc)},this.formatDate=function(t,e,n){var r=this.zeroPadding,i=this.localDateToUTC(t),s=String(i.getFullYear());"utc"==e&&(s=s.substr(2,2));var o=s+r(String(i.getMonth()+1),2)+r(String(i.getDate()),2)+r(String(i.getHours()),2)+r(String(i.getMinutes()),2)+r(String(i.getSeconds()),2);if(!0===n){var a=i.getMilliseconds();if(0!=a){var h=r(String(a),3);o=o+"."+(h=h.replace(/[0]+$/,""))}}return o+"Z"},this.zeroPadding=function(t,e){return t.length>=e?t:new Array(e-t.length+1).join("0")+t},this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=ln(t)},this.setByDateValue=function(t,e,n,r,i,s){var o=new Date(Date.UTC(t,e-1,n,r,i,s,0));this.setByDate(o)},this.getFreshValueHex=function(){return this.hV}},oe.lang.extend(an.asn1.DERAbstractTime,an.asn1.ASN1Object),an.asn1.DERAbstractStructured=function(t){an.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array=t},this.appendASN1Object=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array.push(t)},this.asn1Array=new Array,void 0!==t&&void 0!==t.array&&(this.asn1Array=t.array)},oe.lang.extend(an.asn1.DERAbstractStructured,an.asn1.ASN1Object),an.asn1.DERBoolean=function(){an.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV="0101ff"},oe.lang.extend(an.asn1.DERBoolean,an.asn1.ASN1Object),an.asn1.DERInteger=function(t){an.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=an.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var e=new ve(String(t),10);this.setByBigInteger(e)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.bigint?this.setByBigInteger(t.bigint):void 0!==t.int?this.setByInteger(t.int):"number"==typeof t?this.setByInteger(t):void 0!==t.hex&&this.setValueHex(t.hex))},oe.lang.extend(an.asn1.DERInteger,an.asn1.ASN1Object),an.asn1.DERBitString=function(t){if(void 0!==t&&void 0!==t.obj){var e=an.asn1.ASN1Util.newObject(t.obj);t.hex="00"+e.getEncodedHex()}an.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(t){this.hTLV=null,this.isModified=!0,this.hV=t},this.setUnusedBitsAndHexValue=function(t,e){if(t<0||7<t)throw"unused bits shall be from 0 to 7: u = "+t;var n="0"+t;this.hTLV=null,this.isModified=!0,this.hV=n+e},this.setByBinaryString=function(t){var e=8-(t=t.replace(/0+$/,"")).length%8;8==e&&(e=0);for(var n=0;n<=e;n++)t+="0";var r="";for(n=0;n<t.length-1;n+=8){var i=t.substr(n,8),s=parseInt(i,2).toString(16);1==s.length&&(s="0"+s),r+=s}this.hTLV=null,this.isModified=!0,this.hV="0"+e+r},this.setByBooleanArray=function(t){for(var e="",n=0;n<t.length;n++)1==t[n]?e+="1":e+="0";this.setByBinaryString(e)},this.newFalseArray=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=!1;return e},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t&&t.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(t):void 0!==t.hex?this.setHexValueIncludingUnusedBits(t.hex):void 0!==t.bin?this.setByBinaryString(t.bin):void 0!==t.array&&this.setByBooleanArray(t.array))},oe.lang.extend(an.asn1.DERBitString,an.asn1.ASN1Object),an.asn1.DEROctetString=function(t){if(void 0!==t&&void 0!==t.obj){var e=an.asn1.ASN1Util.newObject(t.obj);t.hex=e.getEncodedHex()}an.asn1.DEROctetString.superclass.constructor.call(this,t),this.hT="04"},oe.lang.extend(an.asn1.DEROctetString,an.asn1.DERAbstractString),an.asn1.DERNull=function(){an.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},oe.lang.extend(an.asn1.DERNull,an.asn1.ASN1Object),an.asn1.DERObjectIdentifier=function(t){var e=function(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e},n=function(t){var n="",r=new ve(t,10).toString(2),i=7-r.length%7;7==i&&(i=0);for(var s="",o=0;o<i;o++)s+="0";r=s+r;for(o=0;o<r.length-1;o+=7){var a=r.substr(o,7);o!=r.length-7&&(a="1"+a),n+=e(parseInt(a,2))}return n};an.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.setValueOidString=function(t){if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var r="",i=t.split("."),s=40*parseInt(i[0])+parseInt(i[1]);r+=e(s),i.splice(0,2);for(var o=0;o<i.length;o++)r+=n(i[o]);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=r},this.setValueName=function(t){var e=an.asn1.x509.OID.name2oid(t);if(""===e)throw"DERObjectIdentifier oidName undefined: "+t;this.setValueOidString(e)},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t?t.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(t):this.setValueName(t):void 0!==t.oid?this.setValueOidString(t.oid):void 0!==t.hex?this.setValueHex(t.hex):void 0!==t.name&&this.setValueName(t.name))},oe.lang.extend(an.asn1.DERObjectIdentifier,an.asn1.ASN1Object),an.asn1.DEREnumerated=function(t){an.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=an.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var e=new ve(String(t),10);this.setByBigInteger(e)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.int?this.setByInteger(t.int):"number"==typeof t?this.setByInteger(t):void 0!==t.hex&&this.setValueHex(t.hex))},oe.lang.extend(an.asn1.DEREnumerated,an.asn1.ASN1Object),an.asn1.DERUTF8String=function(t){an.asn1.DERUTF8String.superclass.constructor.call(this,t),this.hT="0c"},oe.lang.extend(an.asn1.DERUTF8String,an.asn1.DERAbstractString),an.asn1.DERNumericString=function(t){an.asn1.DERNumericString.superclass.constructor.call(this,t),this.hT="12"},oe.lang.extend(an.asn1.DERNumericString,an.asn1.DERAbstractString),an.asn1.DERPrintableString=function(t){an.asn1.DERPrintableString.superclass.constructor.call(this,t),this.hT="13"},oe.lang.extend(an.asn1.DERPrintableString,an.asn1.DERAbstractString),an.asn1.DERTeletexString=function(t){an.asn1.DERTeletexString.superclass.constructor.call(this,t),this.hT="14"},oe.lang.extend(an.asn1.DERTeletexString,an.asn1.DERAbstractString),an.asn1.DERIA5String=function(t){an.asn1.DERIA5String.superclass.constructor.call(this,t),this.hT="16"},oe.lang.extend(an.asn1.DERIA5String,an.asn1.DERAbstractString),an.asn1.DERUTCTime=function(t){an.asn1.DERUTCTime.superclass.constructor.call(this,t),this.hT="17",this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.date=t,this.s=this.formatDate(this.date,"utc"),this.hV=ln(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=ln(this.s)),this.hV},void 0!==t&&(void 0!==t.str?this.setString(t.str):"string"==typeof t&&t.match(/^[0-9]{12}Z$/)?this.setString(t):void 0!==t.hex?this.setStringHex(t.hex):void 0!==t.date&&this.setByDate(t.date))},oe.lang.extend(an.asn1.DERUTCTime,an.asn1.DERAbstractTime),an.asn1.DERGeneralizedTime=function(t){an.asn1.DERGeneralizedTime.superclass.constructor.call(this,t),this.hT="18",this.withMillis=!1,this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.date=t,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=ln(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=ln(this.s)),this.hV},void 0!==t&&(void 0!==t.str?this.setString(t.str):"string"==typeof t&&t.match(/^[0-9]{14}Z$/)?this.setString(t):void 0!==t.hex?this.setStringHex(t.hex):void 0!==t.date&&this.setByDate(t.date),!0===t.millis&&(this.withMillis=!0))},oe.lang.extend(an.asn1.DERGeneralizedTime,an.asn1.DERAbstractTime),an.asn1.DERSequence=function(t){an.asn1.DERSequence.superclass.constructor.call(this,t),this.hT="30",this.getFreshValueHex=function(){for(var t="",e=0;e<this.asn1Array.length;e++){t+=this.asn1Array[e].getEncodedHex()}return this.hV=t,this.hV}},oe.lang.extend(an.asn1.DERSequence,an.asn1.DERAbstractStructured),an.asn1.DERSet=function(t){an.asn1.DERSet.superclass.constructor.call(this,t),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var t=new Array,e=0;e<this.asn1Array.length;e++){var n=this.asn1Array[e];t.push(n.getEncodedHex())}return 1==this.sortFlag&&t.sort(),this.hV=t.join(""),this.hV},void 0!==t&&void 0!==t.sortflag&&0==t.sortflag&&(this.sortFlag=!1)},oe.lang.extend(an.asn1.DERSet,an.asn1.DERAbstractStructured),an.asn1.DERTaggedObject=function(t){an.asn1.DERTaggedObject.superclass.constructor.call(this),this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(t,e,n){this.hT=e,this.isExplicit=t,this.asn1Object=n,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=n.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,e),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.tag&&(this.hT=t.tag),void 0!==t.explicit&&(this.isExplicit=t.explicit),void 0!==t.obj&&(this.asn1Object=t.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},oe.lang.extend(an.asn1.DERTaggedObject,an.asn1.ASN1Object);var an,hn,un,cn=new function(){};function fn(t){for(var e="",n=0;n<t.length;n++){var r=t[n].toString(16);1==r.length&&(r="0"+r),e+=r}return e}function ln(t){return fn(function(t){for(var e=new Array,n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(t))}function dn(t){return t=(t=(t=t.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function pn(t){return t.length%4==2?t+="==":t.length%4==3&&(t+="="),t=(t=t.replace(/-/g,"+")).replace(/_/g,"/")}function gn(t){return t.length%2==1&&(t="0"+t),dn(ge(t))}function yn(t){return ye(pn(t))}function vn(t){return An(Cn(t))}function mn(t){return decodeURIComponent(Fn(t))}function bn(t){for(var e="",n=0;n<t.length-1;n+=2)e+=String.fromCharCode(parseInt(t.substr(n,2),16));return e}function Sn(t){for(var e="",n=0;n<t.length;n++)e+=("0"+t.charCodeAt(n).toString(16)).slice(-2);return e}function wn(t){var e=function(t){return ge(t)}(t).replace(/(.{64})/g,"$1\r\n");return e=e.replace(/\r\n$/,"")}function xn(t,e){return"-----BEGIN "+e+"-----\r\n"+wn(t)+"\r\n-----END "+e+"-----\r\n"}function kn(t,e){if(-1==t.indexOf("-----BEGIN "))throw"can't find PEM header: "+e;return function(t){return ye(t.replace(/[^0-9A-Za-z\/+=]*/g,""))}(t=void 0!==e?(t=t.replace("-----BEGIN "+e+"-----","")).replace("-----END "+e+"-----",""):(t=t.replace(/-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----/,""))}function En(t){return~~(function(t){var e,n,r,i,s,o,a,h,u,c,f;if(f=t.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return h=f[1],e=parseInt(h),2===h.length&&(50<=e&&e<100?e=1900+e:0<=e&&e<50&&(e=2e3+e)),n=parseInt(f[2])-1,r=parseInt(f[3]),i=parseInt(f[4]),s=parseInt(f[5]),o=parseInt(f[6]),a=0,""!==(u=f[7])&&(c=(u.substr(1)+"00").substr(0,3),a=parseInt(c)),Date.UTC(e,n,r,i,s,o,a);throw"unsupported zulu format: "+t}(t)/1e3)}function An(t){return t.replace(/%/g,"")}function Fn(t){return t.replace(/(..)/g,"%$1")}function Cn(t){for(var e=encodeURIComponent(t),n="",r=0;r<e.length;r++)"%"==e[r]?(n+=e.substr(r,3),r+=2):n=n+"%"+ln(e[r]);return n}function Tn(t){return t.length%2==1?"0"+t:t.substr(0,1)>"7"?"00"+t:t}cn.getLblen=function(t,e){if("8"!=t.substr(e+2,1))return 1;var n=parseInt(t.substr(e+3,1));return 0==n?-1:0<n&&n<10?n+1:-2},cn.getL=function(t,e){var n=cn.getLblen(t,e);return n<1?"":t.substr(e+2,2*n)},cn.getVblen=function(t,e){var n;return""==(n=cn.getL(t,e))?-1:("8"===n.substr(0,1)?new ve(n.substr(2),16):new ve(n,16)).intValue()},cn.getVidx=function(t,e){var n=cn.getLblen(t,e);return n<0?n:e+2*(n+1)},cn.getV=function(t,e){var n=cn.getVidx(t,e),r=cn.getVblen(t,e);return t.substr(n,2*r)},cn.getTLV=function(t,e){return t.substr(e,2)+cn.getL(t,e)+cn.getV(t,e)},cn.getNextSiblingIdx=function(t,e){return cn.getVidx(t,e)+2*cn.getVblen(t,e)},cn.getChildIdx=function(t,e){var n=cn,r=new Array,i=n.getVidx(t,e);"03"==t.substr(e,2)?r.push(i+2):r.push(i);for(var s=n.getVblen(t,e),o=i,a=0;;){var h=n.getNextSiblingIdx(t,o);if(null==h||h-i>=2*s)break;if(a>=200)break;r.push(h),o=h,a++}return r},cn.getNthChildIdx=function(t,e,n){return cn.getChildIdx(t,e)[n]},cn.getIdxbyList=function(t,e,n,r){var i,s,o=cn;if(0==n.length){if(void 0!==r&&t.substr(e,2)!==r)throw"checking tag doesn't match: "+t.substr(e,2)+"!="+r;return e}return i=n.shift(),s=o.getChildIdx(t,e),o.getIdxbyList(t,s[i],n,r)},cn.getTLVbyList=function(t,e,n,r){var i=cn,s=i.getIdxbyList(t,e,n);if(void 0===s)throw"can't find nthList object";if(void 0!==r&&t.substr(s,2)!=r)throw"checking tag doesn't match: "+t.substr(s,2)+"!="+r;return i.getTLV(t,s)},cn.getVbyList=function(t,e,n,r,i){var s,o,a=cn;if(void 0===(s=a.getIdxbyList(t,e,n,r)))throw"can't find nthList object";return o=a.getV(t,s),!0===i&&(o=o.substr(2)),o},cn.hextooidstr=function(t){var e=function(t,e){return t.length>=e?t:new Array(e-t.length+1).join("0")+t},n=[],r=t.substr(0,2),i=parseInt(r,16);n[0]=new String(Math.floor(i/40)),n[1]=new String(i%40);for(var s=t.substr(2),o=[],a=0;a<s.length/2;a++)o.push(parseInt(s.substr(2*a,2),16));var h=[],u="";for(a=0;a<o.length;a++)128&o[a]?u+=e((127&o[a]).toString(2),7):(u+=e((127&o[a]).toString(2),7),h.push(new String(parseInt(u,2))),u="");var c=n.join(".");return h.length>0&&(c=c+"."+h.join(".")),c},cn.dump=function(t,e,n,r){var i=cn,s=i.getV,o=i.dump,a=i.getChildIdx,h=t;t instanceof an.asn1.ASN1Object&&(h=t.getEncodedHex());var u=function(t,e){return t.length<=2*e?t:t.substr(0,e)+"..(total "+t.length/2+"bytes).."+t.substr(t.length-e,e)};void 0===e&&(e={ommit_long_octet:32}),void 0===n&&(n=0),void 0===r&&(r="");var c=e.ommit_long_octet;if("01"==h.substr(n,2))return"00"==(f=s(h,n))?r+"BOOLEAN FALSE\n":r+"BOOLEAN TRUE\n";if("02"==h.substr(n,2))return r+"INTEGER "+u(f=s(h,n),c)+"\n";if("03"==h.substr(n,2))return r+"BITSTRING "+u(f=s(h,n),c)+"\n";if("04"==h.substr(n,2)){var f=s(h,n);if(i.isASN1HEX(f)){var l=r+"OCTETSTRING, encapsulates\n";return l+=o(f,e,0,r+"  ")}return r+"OCTETSTRING "+u(f,c)+"\n"}if("05"==h.substr(n,2))return r+"NULL\n";if("06"==h.substr(n,2)){var d=s(h,n),p=an.asn1.ASN1Util.oidHexToInt(d),g=an.asn1.x509.OID.oid2name(p),y=p.replace(/\./g," ");return""!=g?r+"ObjectIdentifier "+g+" ("+y+")\n":r+"ObjectIdentifier ("+y+")\n"}if("0c"==h.substr(n,2))return r+"UTF8String '"+mn(s(h,n))+"'\n";if("13"==h.substr(n,2))return r+"PrintableString '"+mn(s(h,n))+"'\n";if("14"==h.substr(n,2))return r+"TeletexString '"+mn(s(h,n))+"'\n";if("16"==h.substr(n,2))return r+"IA5String '"+mn(s(h,n))+"'\n";if("17"==h.substr(n,2))return r+"UTCTime "+mn(s(h,n))+"\n";if("18"==h.substr(n,2))return r+"GeneralizedTime "+mn(s(h,n))+"\n";if("30"==h.substr(n,2)){if("3000"==h.substr(n,4))return r+"SEQUENCE {}\n";l=r+"SEQUENCE\n";var v=e;if((2==(S=a(h,n)).length||3==S.length)&&"06"==h.substr(S[0],2)&&"04"==h.substr(S[S.length-1],2)){g=i.oidname(s(h,S[0]));var m=JSON.parse(JSON.stringify(e));m.x509ExtName=g,v=m}for(var b=0;b<S.length;b++)l+=o(h,v,S[b],r+"  ");return l}if("31"==h.substr(n,2)){l=r+"SET\n";var S=a(h,n);for(b=0;b<S.length;b++)l+=o(h,e,S[b],r+"  ");return l}var w=parseInt(h.substr(n,2),16);if(0!=(128&w)){var x=31&w;if(0!=(32&w)){var l=r+"["+x+"]\n";for(S=a(h,n),b=0;b<S.length;b++)l+=o(h,e,S[b],r+"  ");return l}return"68747470"==(f=s(h,n)).substr(0,8)&&(f=mn(f)),"subjectAltName"===e.x509ExtName&&2==x&&(f=mn(f)),l=r+"["+x+"] "+f+"\n"}return r+"UNKNOWN("+h.substr(n,2)+") "+s(h,n)+"\n"},cn.isASN1HEX=function(t){var e=cn;if(t.length%2==1)return!1;var n=e.getVblen(t,0),r=t.substr(0,2),i=e.getL(t,0);return t.length-r.length-i.length==2*n},cn.oidname=function(t){var e=an.asn1;an.lang.String.isHex(t)&&(t=e.ASN1Util.oidHexToInt(t));var n=e.x509.OID.oid2name(t);return""===n&&(n=t),n},void 0!==an&&an||(an={}),void 0!==an.asn1&&an.asn1||(an.asn1={}),void 0!==an.asn1.x509&&an.asn1.x509||(an.asn1.x509={}),an.asn1.x509.Certificate=function(t){an.asn1.x509.Certificate.superclass.constructor.call(this);var e=an,n=(e.crypto,e.asn1),r=n.DERSequence,i=n.DERBitString;this.sign=function(){this.asn1SignatureAlg=this.asn1TBSCert.asn1SignatureAlg;var t=new an.crypto.Signature({alg:this.asn1SignatureAlg.nameAlg});t.init(this.prvKey),t.updateHex(this.asn1TBSCert.getEncodedHex()),this.hexSig=t.sign(),this.asn1Sig=new i({hex:"00"+this.hexSig});var e=new r({array:[this.asn1TBSCert,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=e.getEncodedHex(),this.isModified=!1},this.setSignatureHex=function(t){this.asn1SignatureAlg=this.asn1TBSCert.asn1SignatureAlg,this.hexSig=t,this.asn1Sig=new i({hex:"00"+this.hexSig});var e=new r({array:[this.asn1TBSCert,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=e.getEncodedHex(),this.isModified=!1},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},this.getPEMString=function(){return"-----BEGIN CERTIFICATE-----\r\n"+wn(this.getEncodedHex())+"\r\n-----END CERTIFICATE-----\r\n"},void 0!==t&&(void 0!==t.tbscertobj&&(this.asn1TBSCert=t.tbscertobj),void 0!==t.prvkeyobj&&(this.prvKey=t.prvkeyobj))},oe.lang.extend(an.asn1.x509.Certificate,an.asn1.ASN1Object),an.asn1.x509.TBSCertificate=function(t){an.asn1.x509.TBSCertificate.superclass.constructor.call(this);var e=an.asn1,n=e.DERSequence,r=e.DERInteger,i=e.DERTaggedObject,s=e.x509,o=s.Time,a=s.X500Name,h=s.SubjectPublicKeyInfo;this._initialize=function(){this.asn1Array=new Array,this.asn1Version=new i({obj:new r({int:2})}),this.asn1SerialNumber=null,this.asn1SignatureAlg=null,this.asn1Issuer=null,this.asn1NotBefore=null,this.asn1NotAfter=null,this.asn1Subject=null,this.asn1SubjPKey=null,this.extensionsArray=new Array},this.setSerialNumberByParam=function(t){this.asn1SerialNumber=new r(t)},this.setSignatureAlgByParam=function(t){this.asn1SignatureAlg=new s.AlgorithmIdentifier(t)},this.setIssuerByParam=function(t){this.asn1Issuer=new a(t)},this.setNotBeforeByParam=function(t){this.asn1NotBefore=new o(t)},this.setNotAfterByParam=function(t){this.asn1NotAfter=new o(t)},this.setSubjectByParam=function(t){this.asn1Subject=new a(t)},this.setSubjectPublicKey=function(t){this.asn1SubjPKey=new h(t)},this.setSubjectPublicKeyByGetKey=function(t){var e=Dn.getKey(t);this.asn1SubjPKey=new h(e)},this.appendExtension=function(t){this.extensionsArray.push(t)},this.appendExtensionByName=function(t,e){an.asn1.x509.Extension.appendByNameToArray(t,e,this.extensionsArray)},this.getEncodedHex=function(){if(null==this.asn1NotBefore||null==this.asn1NotAfter)throw"notBefore and/or notAfter not set";var t=new n({array:[this.asn1NotBefore,this.asn1NotAfter]});if(this.asn1Array=new Array,this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1SerialNumber),this.asn1Array.push(this.asn1SignatureAlg),this.asn1Array.push(this.asn1Issuer),this.asn1Array.push(t),this.asn1Array.push(this.asn1Subject),this.asn1Array.push(this.asn1SubjPKey),this.extensionsArray.length>0){var e=new n({array:this.extensionsArray}),r=new i({explicit:!0,tag:"a3",obj:e});this.asn1Array.push(r)}var s=new n({array:this.asn1Array});return this.hTLV=s.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize()},oe.lang.extend(an.asn1.x509.TBSCertificate,an.asn1.ASN1Object),an.asn1.x509.Extension=function(t){an.asn1.x509.Extension.superclass.constructor.call(this);var e=an.asn1,n=e.DERObjectIdentifier,r=e.DEROctetString,i=(e.DERBitString,e.DERBoolean),s=e.DERSequence;this.getEncodedHex=function(){var t=new n({oid:this.oid}),e=new r({hex:this.getExtnValueHex()}),o=new Array;return o.push(t),this.critical&&o.push(new i),o.push(e),new s({array:o}).getEncodedHex()},this.critical=!1,void 0!==t&&void 0!==t.critical&&(this.critical=t.critical)},oe.lang.extend(an.asn1.x509.Extension,an.asn1.ASN1Object),an.asn1.x509.Extension.appendByNameToArray=function(t,e,n){var r=t.toLowerCase(),i=an.asn1.x509;if("basicconstraints"==r){var s=new i.BasicConstraints(e);n.push(s)}else if("keyusage"==r){s=new i.KeyUsage(e);n.push(s)}else if("crldistributionpoints"==r){s=new i.CRLDistributionPoints(e);n.push(s)}else if("extkeyusage"==r){s=new i.ExtKeyUsage(e);n.push(s)}else if("authoritykeyidentifier"==r){s=new i.AuthorityKeyIdentifier(e);n.push(s)}else if("authorityinfoaccess"==r){s=new i.AuthorityInfoAccess(e);n.push(s)}else if("subjectaltname"==r){s=new i.SubjectAltName(e);n.push(s)}else{if("issueraltname"!=r)throw"unsupported extension name: "+t;s=new i.IssuerAltName(e);n.push(s)}},an.asn1.x509.KeyUsage=function(t){an.asn1.x509.KeyUsage.superclass.constructor.call(this,t),this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.15",void 0!==t&&void 0!==t.bin&&(this.asn1ExtnValue=new an.asn1.DERBitString(t))},oe.lang.extend(an.asn1.x509.KeyUsage,an.asn1.x509.Extension),an.asn1.x509.BasicConstraints=function(t){an.asn1.x509.BasicConstraints.superclass.constructor.call(this,t),this.getExtnValueHex=function(){var t=new Array;this.cA&&t.push(new an.asn1.DERBoolean),this.pathLen>-1&&t.push(new an.asn1.DERInteger({int:this.pathLen}));var e=new an.asn1.DERSequence({array:t});return this.asn1ExtnValue=e,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,void 0!==t&&(void 0!==t.cA&&(this.cA=t.cA),void 0!==t.pathLen&&(this.pathLen=t.pathLen))},oe.lang.extend(an.asn1.x509.BasicConstraints,an.asn1.x509.Extension),an.asn1.x509.CRLDistributionPoints=function(t){an.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,t);var e=an.asn1,n=e.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.setByDPArray=function(t){this.asn1ExtnValue=new e.DERSequence({array:t})},this.setByOneURI=function(t){var e=new n.GeneralNames([{uri:t}]),r=new n.DistributionPointName(e),i=new n.DistributionPoint({dpobj:r});this.setByDPArray([i])},this.oid="2.5.29.31",void 0!==t&&(void 0!==t.array?this.setByDPArray(t.array):void 0!==t.uri&&this.setByOneURI(t.uri))},oe.lang.extend(an.asn1.x509.CRLDistributionPoints,an.asn1.x509.Extension),an.asn1.x509.ExtKeyUsage=function(t){an.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,t);var e=an.asn1;this.setPurposeArray=function(t){this.asn1ExtnValue=new e.DERSequence;for(var n=0;n<t.length;n++){var r=new e.DERObjectIdentifier(t[n]);this.asn1ExtnValue.appendASN1Object(r)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.37",void 0!==t&&void 0!==t.array&&this.setPurposeArray(t.array)},oe.lang.extend(an.asn1.x509.ExtKeyUsage,an.asn1.x509.Extension),an.asn1.x509.AuthorityKeyIdentifier=function(t){an.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,t);var e=an.asn1,n=e.DERTaggedObject;this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var t=new Array;this.asn1KID&&t.push(new n({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&t.push(new n({explicit:!1,tag:"a1",obj:this.asn1CertIssuer})),this.asn1CertSN&&t.push(new n({explicit:!1,tag:"82",obj:this.asn1CertSN}));var r=new e.DERSequence({array:t});return this.asn1ExtnValue=r,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(t){this.asn1KID=new an.asn1.DEROctetString(t)},this.setCertIssuerByParam=function(t){this.asn1CertIssuer=new an.asn1.x509.X500Name(t)},this.setCertSNByParam=function(t){this.asn1CertSN=new an.asn1.DERInteger(t)},this.oid="2.5.29.35",void 0!==t&&(void 0!==t.kid&&this.setKIDByParam(t.kid),void 0!==t.issuer&&this.setCertIssuerByParam(t.issuer),void 0!==t.sn&&this.setCertSNByParam(t.sn))},oe.lang.extend(an.asn1.x509.AuthorityKeyIdentifier,an.asn1.x509.Extension),an.asn1.x509.AuthorityInfoAccess=function(t){an.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,t),this.setAccessDescriptionArray=function(t){for(var e=new Array,n=an.asn1,r=n.DERSequence,i=0;i<t.length;i++){var s=new r({array:[new n.DERObjectIdentifier(t[i].accessMethod),new n.x509.GeneralName(t[i].accessLocation)]});e.push(s)}this.asn1ExtnValue=new r({array:e})},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.1.1",void 0!==t&&void 0!==t.array&&this.setAccessDescriptionArray(t.array)},oe.lang.extend(an.asn1.x509.AuthorityInfoAccess,an.asn1.x509.Extension),an.asn1.x509.SubjectAltName=function(t){an.asn1.x509.SubjectAltName.superclass.constructor.call(this,t),this.setNameArray=function(t){this.asn1ExtnValue=new an.asn1.x509.GeneralNames(t)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.17",void 0!==t&&void 0!==t.array&&this.setNameArray(t.array)},oe.lang.extend(an.asn1.x509.SubjectAltName,an.asn1.x509.Extension),an.asn1.x509.IssuerAltName=function(t){an.asn1.x509.IssuerAltName.superclass.constructor.call(this,t),this.setNameArray=function(t){this.asn1ExtnValue=new an.asn1.x509.GeneralNames(t)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.18",void 0!==t&&void 0!==t.array&&this.setNameArray(t.array)},oe.lang.extend(an.asn1.x509.IssuerAltName,an.asn1.x509.Extension),an.asn1.x509.CRL=function(t){an.asn1.x509.CRL.superclass.constructor.call(this),this.sign=function(){this.asn1SignatureAlg=this.asn1TBSCertList.asn1SignatureAlg,sig=new an.crypto.Signature({alg:"SHA1withRSA",prov:"cryptojs/jsrsa"}),sig.initSign(this.prvKey),sig.updateHex(this.asn1TBSCertList.getEncodedHex()),this.hexSig=sig.sign(),this.asn1Sig=new an.asn1.DERBitString({hex:"00"+this.hexSig});var t=new an.asn1.DERSequence({array:[this.asn1TBSCertList,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=t.getEncodedHex(),this.isModified=!1},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},this.getPEMString=function(){return"-----BEGIN X509 CRL-----\r\n"+wn(this.getEncodedHex())+"\r\n-----END X509 CRL-----\r\n"},void 0!==t&&(void 0!==t.tbsobj&&(this.asn1TBSCertList=t.tbsobj),void 0!==t.prvkeyobj&&(this.prvKey=t.prvkeyobj))},oe.lang.extend(an.asn1.x509.CRL,an.asn1.ASN1Object),an.asn1.x509.TBSCertList=function(t){an.asn1.x509.TBSCertList.superclass.constructor.call(this);var e=an.asn1,n=e.DERSequence,r=e.x509,i=r.Time;this.setSignatureAlgByParam=function(t){this.asn1SignatureAlg=new r.AlgorithmIdentifier(t)},this.setIssuerByParam=function(t){this.asn1Issuer=new r.X500Name(t)},this.setThisUpdateByParam=function(t){this.asn1ThisUpdate=new i(t)},this.setNextUpdateByParam=function(t){this.asn1NextUpdate=new i(t)},this.addRevokedCert=function(t,e){var n={};void 0!=t&&null!=t&&(n.sn=t),void 0!=e&&null!=e&&(n.time=e);var i=new r.CRLEntry(n);this.aRevokedCert.push(i)},this.getEncodedHex=function(){if(this.asn1Array=new Array,null!=this.asn1Version&&this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1SignatureAlg),this.asn1Array.push(this.asn1Issuer),this.asn1Array.push(this.asn1ThisUpdate),null!=this.asn1NextUpdate&&this.asn1Array.push(this.asn1NextUpdate),this.aRevokedCert.length>0){var t=new n({array:this.aRevokedCert});this.asn1Array.push(t)}var e=new n({array:this.asn1Array});return this.hTLV=e.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize=function(){this.asn1Version=null,this.asn1SignatureAlg=null,this.asn1Issuer=null,this.asn1ThisUpdate=null,this.asn1NextUpdate=null,this.aRevokedCert=new Array},this._initialize()},oe.lang.extend(an.asn1.x509.TBSCertList,an.asn1.ASN1Object),an.asn1.x509.CRLEntry=function(t){an.asn1.x509.CRLEntry.superclass.constructor.call(this);var e=an.asn1;this.setCertSerial=function(t){this.sn=new e.DERInteger(t)},this.setRevocationDate=function(t){this.time=new e.x509.Time(t)},this.getEncodedHex=function(){var t=new e.DERSequence({array:[this.sn,this.time]});return this.TLV=t.getEncodedHex(),this.TLV},void 0!==t&&(void 0!==t.time&&this.setRevocationDate(t.time),void 0!==t.sn&&this.setCertSerial(t.sn))},oe.lang.extend(an.asn1.x509.CRLEntry,an.asn1.ASN1Object),an.asn1.x509.X500Name=function(t){an.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=new Array;var e=an.asn1,n=e.x509,r=kn;if(this.setByString=function(t){var e=t.split("/");e.shift();for(var r=0;r<e.length;r++)this.asn1Array.push(new n.RDN({str:e[r]}))},this.setByLdapString=function(t){var e=n.X500Name.ldapToOneline(t);this.setByString(e)},this.setByObject=function(t){for(var e in t)if(t.hasOwnProperty(e)){var n=new an.asn1.x509.RDN({str:e+"="+t[e]});this.asn1Array?this.asn1Array.push(n):this.asn1Array=[n]}},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;var t=new e.DERSequence({array:this.asn1Array});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t){var i;if(void 0!==t.str?this.setByString(t.str):void 0!==t.ldapstr?this.setByLdapString(t.ldapstr):"object"==typeof t&&this.setByObject(t),void 0!==t.certissuer)(i=new Bn).hex=r(t.certissuer),this.hTLV=i.getIssuerHex();if(void 0!==t.certsubject)(i=new Bn).hex=r(t.certsubject),this.hTLV=i.getSubjectHex()}},oe.lang.extend(an.asn1.x509.X500Name,an.asn1.ASN1Object),an.asn1.x509.X500Name.onelineToLDAP=function(t){if("/"!==t.substr(0,1))throw"malformed input";var e=(t=t.substr(1)).split("/");return e.reverse(),(e=e.map(function(t){return t.replace(/,/,"\\,")})).join(",")},an.asn1.x509.X500Name.ldapToOneline=function(t){for(var e=t.split(","),n=!1,r=[],i=0;e.length>0;i++){var s=e.shift();if(!0===n){var o=(r.pop()+","+s).replace(/\\,/g,",");r.push(o),n=!1}else r.push(s);"\\"===s.substr(-1,1)&&(n=!0)}return(r=r.map(function(t){return t.replace("/","\\/")})).reverse(),"/"+r.join("/")},an.asn1.x509.RDN=function(t){an.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=new Array,this.addByString=function(t){this.asn1Array.push(new an.asn1.x509.AttributeTypeAndValue({str:t}))},this.addByMultiValuedString=function(t){for(var e=an.asn1.x509.RDN.parseString(t),n=0;n<e.length;n++)this.addByString(e[n])},this.getEncodedHex=function(){var t=new an.asn1.DERSet({array:this.asn1Array});return this.TLV=t.getEncodedHex(),this.TLV},void 0!==t&&void 0!==t.str&&this.addByMultiValuedString(t.str)},oe.lang.extend(an.asn1.x509.RDN,an.asn1.ASN1Object),an.asn1.x509.RDN.parseString=function(t){for(var e=t.split(/\+/),n=!1,r=[],i=0;e.length>0;i++){var s=e.shift();if(!0===n){var o=(r.pop()+"+"+s).replace(/\\\+/g,"+");r.push(o),n=!1}else r.push(s);"\\"===s.substr(-1,1)&&(n=!0)}var a=!1,h=[];for(i=0;r.length>0;i++){s=r.shift();if(!0===a){var u=h.pop();if(s.match(/"$/)){o=(u+"+"+s).replace(/^([^=]+)="(.*)"$/,"$1=$2");h.push(o),a=!1}else h.push(u+"+"+s)}else h.push(s);s.match(/^[^=]+="/)&&(a=!0)}return h},an.asn1.x509.AttributeTypeAndValue=function(t){an.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this);var e=an.asn1;this.setByString=function(t){var e=t.match(/^([^=]+)=(.+)$/);if(!e)throw"malformed attrTypeAndValueStr: "+t;this.setByAttrTypeAndValueStr(e[1],e[2])},this.setByAttrTypeAndValueStr=function(t,e){this.typeObj=an.asn1.x509.OID.atype2obj(t);var n="utf8";"C"==t&&(n="prn"),this.valueObj=this.getValueObj(n,e)},this.getValueObj=function(t,n){if("utf8"==t)return new e.DERUTF8String({str:n});if("prn"==t)return new e.DERPrintableString({str:n});if("tel"==t)return new e.DERTeletexString({str:n});if("ia5"==t)return new e.DERIA5String({str:n});throw"unsupported directory string type: type="+t+" value="+n},this.getEncodedHex=function(){var t=new e.DERSequence({array:[this.typeObj,this.valueObj]});return this.TLV=t.getEncodedHex(),this.TLV},void 0!==t&&void 0!==t.str&&this.setByString(t.str)},oe.lang.extend(an.asn1.x509.AttributeTypeAndValue,an.asn1.ASN1Object),an.asn1.x509.SubjectPublicKeyInfo=function(t){an.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var e=an,n=e.asn1,r=n.DERInteger,i=n.DERBitString,s=n.DERObjectIdentifier,o=n.DERSequence,a=n.ASN1Util.newObject,h=n.x509.AlgorithmIdentifier,u=e.crypto;u.ECDSA,u.DSA;this.getASN1Object=function(){if(null==this.asn1AlgId||null==this.asn1SubjPKey)throw"algId and/or subjPubKey not set";return new o({array:[this.asn1AlgId,this.asn1SubjPKey]})},this.getEncodedHex=function(){var t=this.getASN1Object();return this.hTLV=t.getEncodedHex(),this.hTLV},this.setPubKey=function(t){try{if(t instanceof tn){var e=a({seq:[{int:{bigint:t.n}},{int:{int:t.e}}]}).getEncodedHex();this.asn1AlgId=new h({name:"rsaEncryption"}),this.asn1SubjPKey=new i({hex:"00"+e})}}catch(t){}try{if(t instanceof an.crypto.ECDSA){var n=new s({name:t.curveName});this.asn1AlgId=new h({name:"ecPublicKey",asn1params:n}),this.asn1SubjPKey=new i({hex:"00"+t.pubKeyHex})}}catch(t){}try{if(t instanceof an.crypto.DSA){n=new a({seq:[{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.g}}]});this.asn1AlgId=new h({name:"dsa",asn1params:n});var o=new r({bigint:t.y});this.asn1SubjPKey=new i({hex:"00"+o.getEncodedHex()})}}catch(t){}},void 0!==t&&this.setPubKey(t)},oe.lang.extend(an.asn1.x509.SubjectPublicKeyInfo,an.asn1.ASN1Object),an.asn1.x509.Time=function(t){an.asn1.x509.Time.superclass.constructor.call(this);var e=an.asn1,n=e.DERUTCTime,r=e.DERGeneralizedTime;this.setTimeParams=function(t){this.timeParams=t},this.getEncodedHex=function(){var t=null;return t=null!=this.timeParams?"utc"==this.type?new n(this.timeParams):new r(this.timeParams):"utc"==this.type?new n:new r,this.TLV=t.getEncodedHex(),this.TLV},this.type="utc",void 0!==t&&(void 0!==t.type?this.type=t.type:void 0!==t.str&&(t.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),t.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=t)},oe.lang.extend(an.asn1.x509.Time,an.asn1.ASN1Object),an.asn1.x509.AlgorithmIdentifier=function(t){an.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var e=an.asn1;if(this.getEncodedHex=function(){if(null===this.nameAlg&&null===this.asn1Alg)throw"algorithm not specified";null!==this.nameAlg&&null===this.asn1Alg&&(this.asn1Alg=e.x509.OID.name2obj(this.nameAlg));var t=[this.asn1Alg];null!==this.asn1Params&&t.push(this.asn1Params);var n=new e.DERSequence({array:t});return this.hTLV=n.getEncodedHex(),this.hTLV},void 0!==t&&(void 0!==t.name&&(this.nameAlg=t.name),void 0!==t.asn1params&&(this.asn1Params=t.asn1params),void 0!==t.paramempty&&(this.paramEmpty=t.paramempty)),null===this.asn1Params&&!1===this.paramEmpty&&null!==this.nameAlg){var n=this.nameAlg.toLowerCase();"withdsa"!==n.substr(-7,7)&&"withecdsa"!==n.substr(-9,9)&&(this.asn1Params=new e.DERNull)}},oe.lang.extend(an.asn1.x509.AlgorithmIdentifier,an.asn1.ASN1Object),an.asn1.x509.GeneralName=function(t){an.asn1.x509.GeneralName.superclass.constructor.call(this);var e={rfc822:"81",dns:"82",dn:"a4",uri:"86"},n=an.asn1,r=n.DERIA5String,i=n.DERTaggedObject,s=n.ASN1Object,o=n.x509.X500Name,a=kn;this.explicit=!1,this.setByParam=function(t){var n=null;if(void 0!==t){if(void 0!==t.rfc822&&(this.type="rfc822",n=new r({str:t[this.type]})),void 0!==t.dns&&(this.type="dns",n=new r({str:t[this.type]})),void 0!==t.uri&&(this.type="uri",n=new r({str:t[this.type]})),void 0!==t.dn&&(this.type="dn",n=new o({str:t.dn})),void 0!==t.ldapdn&&(this.type="dn",n=new o({ldapstr:t.ldapdn})),void 0!==t.certissuer){this.type="dn",this.explicit=!0;var h=null;if((c=t.certissuer).match(/^[0-9A-Fa-f]+$/),-1!=c.indexOf("-----BEGIN ")&&(h=a(c)),null==h)throw"certissuer param not cert";(f=new Bn).hex=h;var u=f.getIssuerHex();(n=new s).hTLV=u}if(void 0!==t.certsubj){this.type="dn",this.explicit=!0;var c,f;h=null;if((c=t.certsubj).match(/^[0-9A-Fa-f]+$/),-1!=c.indexOf("-----BEGIN ")&&(h=a(c)),null==h)throw"certsubj param not cert";(f=new Bn).hex=h;u=f.getSubjectHex();(n=new s).hTLV=u}if(null==this.type)throw"unsupported type in params="+t;this.asn1Obj=new i({explicit:this.explicit,tag:e[this.type],obj:n})}},this.getEncodedHex=function(){return this.asn1Obj.getEncodedHex()},void 0!==t&&this.setByParam(t)},oe.lang.extend(an.asn1.x509.GeneralName,an.asn1.ASN1Object),an.asn1.x509.GeneralNames=function(t){an.asn1.x509.GeneralNames.superclass.constructor.call(this);var e=an.asn1;this.setByParamArray=function(t){for(var n=0;n<t.length;n++){var r=new e.x509.GeneralName(t[n]);this.asn1Array.push(r)}},this.getEncodedHex=function(){return new e.DERSequence({array:this.asn1Array}).getEncodedHex()},this.asn1Array=new Array,void 0!==t&&this.setByParamArray(t)},oe.lang.extend(an.asn1.x509.GeneralNames,an.asn1.ASN1Object),an.asn1.x509.DistributionPointName=function(t){an.asn1.x509.DistributionPointName.superclass.constructor.call(this);var e=an.asn1,n=e.DERTaggedObject;if(this.getEncodedHex=function(){if("full"!=this.type)throw"currently type shall be 'full': "+this.type;return this.asn1Obj=new n({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.getEncodedHex(),this.hTLV},void 0!==t){if(!e.x509.GeneralNames.prototype.isPrototypeOf(t))throw"This class supports GeneralNames only as argument";this.type="full",this.tag="a0",this.asn1V=t}},oe.lang.extend(an.asn1.x509.DistributionPointName,an.asn1.ASN1Object),an.asn1.x509.DistributionPoint=function(t){an.asn1.x509.DistributionPoint.superclass.constructor.call(this);var e=an.asn1;this.getEncodedHex=function(){var t=new e.DERSequence;if(null!=this.asn1DP){var n=new e.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});t.appendASN1Object(n)}return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t&&void 0!==t.dpobj&&(this.asn1DP=t.dpobj)},oe.lang.extend(an.asn1.x509.DistributionPoint,an.asn1.ASN1Object),an.asn1.x509.OID=new function(t){this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.name2oidList={sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",countryName:"2.5.4.6",streetAddress:"2.5.4.9",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",ecPublicKey:"1.2.840.10045.2.1",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",extensionRequest:"1.2.840.113549.1.9.14"},this.objCache={},this.name2obj=function(t){if(void 0!==this.objCache[t])return this.objCache[t];if(void 0===this.name2oidList[t])throw"Name of ObjectIdentifier not defined: "+t;var e=this.name2oidList[t],n=new an.asn1.DERObjectIdentifier({oid:e});return this.objCache[t]=n,n},this.atype2obj=function(t){if(void 0!==this.objCache[t])return this.objCache[t];if(void 0===this.atype2oidList[t])throw"AttributeType name undefined: "+t;var e=this.atype2oidList[t],n=new an.asn1.DERObjectIdentifier({oid:e});return this.objCache[t]=n,n}},an.asn1.x509.OID.oid2name=function(t){var e=an.asn1.x509.OID.name2oidList;for(var n in e)if(e[n]==t)return n;return""},an.asn1.x509.OID.oid2atype=function(t){var e=an.asn1.x509.OID.atype2oidList;for(var n in e)if(e[n]==t)return n;return t},an.asn1.x509.OID.name2oid=function(t){var e=an.asn1.x509.OID.name2oidList;return void 0===e[t]?"":e[t]},an.asn1.x509.X509Util={},an.asn1.x509.X509Util.newCertPEM=function(t){var e=an.asn1.x509,n=e.TBSCertificate,r=e.Certificate,i=new n;if(void 0===t.serial)throw"serial number undefined.";if(i.setSerialNumberByParam(t.serial),"string"!=typeof t.sigalg.name)throw"unproper signature algorithm name";if(i.setSignatureAlgByParam(t.sigalg),void 0===t.issuer)throw"issuer name undefined.";if(i.setIssuerByParam(t.issuer),void 0===t.notbefore)throw"notbefore undefined.";if(i.setNotBeforeByParam(t.notbefore),void 0===t.notafter)throw"notafter undefined.";if(i.setNotAfterByParam(t.notafter),void 0===t.subject)throw"subject name undefined.";if(i.setSubjectByParam(t.subject),void 0===t.sbjpubkey)throw"subject public key undefined.";if(i.setSubjectPublicKeyByGetKey(t.sbjpubkey),void 0!==t.ext&&void 0!==t.ext.length)for(var s=0;s<t.ext.length;s++)for(key in t.ext[s])i.appendExtensionByName(key,t.ext[s][key]);if(void 0===t.cakey&&void 0===t.sighex)throw"param cakey and sighex undefined.";var o=null;return t.cakey&&(o=new r({tbscertobj:i,prvkeyobj:!0===t.cakey.isPrivate?t.cakey:Dn.getKey.apply(null,t.cakey)})).sign(),t.sighex&&(o=new r({tbscertobj:i})).setSignatureHex(t.sighex),o.getPEMString()},void 0!==an&&an||(an={}),void 0!==an.asn1&&an.asn1||(an.asn1={}),void 0!==an.asn1.cms&&an.asn1.cms||(an.asn1.cms={}),an.asn1.cms.Attribute=function(t){var e=an.asn1;e.cms.Attribute.superclass.constructor.call(this),this.getEncodedHex=function(){var t,n,r;t=new e.DERObjectIdentifier({oid:this.attrTypeOid}),n=new e.DERSet({array:this.valueList});try{n.getEncodedHex()}catch(t){throw"fail valueSet.getEncodedHex in Attribute(1)/"+t}r=new e.DERSequence({array:[t,n]});try{this.hTLV=r.getEncodedHex()}catch(t){throw"failed seq.getEncodedHex in Attribute(2)/"+t}return this.hTLV}},oe.lang.extend(an.asn1.cms.Attribute,an.asn1.ASN1Object),an.asn1.cms.ContentType=function(t){var e=an.asn1;e.cms.ContentType.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.3";var n=null;if(void 0!==t){n=new e.DERObjectIdentifier(t);this.valueList=[n]}},oe.lang.extend(an.asn1.cms.ContentType,an.asn1.cms.Attribute),an.asn1.cms.MessageDigest=function(t){var e=an,n=e.asn1,r=n.DEROctetString,i=n.cms;if(i.MessageDigest.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.4",void 0!==t)if(t.eciObj instanceof i.EncapsulatedContentInfo&&"string"==typeof t.hashAlg){var s=t.eciObj.eContentValueHex,o=t.hashAlg;(a=new r({hex:e.crypto.Util.hashHex(s,o)})).getEncodedHex(),this.valueList=[a]}else{var a;(a=new r(t)).getEncodedHex(),this.valueList=[a]}},oe.lang.extend(an.asn1.cms.MessageDigest,an.asn1.cms.Attribute),an.asn1.cms.SigningTime=function(t){var e=an.asn1;if(e.cms.SigningTime.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.5",void 0!==t){var n=new e.x509.Time(t);try{n.getEncodedHex()}catch(t){throw"SigningTime.getEncodedHex() failed/"+t}this.valueList=[n]}},oe.lang.extend(an.asn1.cms.SigningTime,an.asn1.cms.Attribute),an.asn1.cms.SigningCertificate=function(t){var e=an,n=e.asn1,r=n.DERSequence,i=n.cms;e.crypto;i.SigningCertificate.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.12",this.setCerts=function(t){for(var s=[],o=0;o<t.length;o++){var a=kn(t[o]),h=e.crypto.Util.hashHex(a,"sha1"),u=new n.DEROctetString({hex:h});u.getEncodedHex();var c=new i.IssuerAndSerialNumber({cert:t[o]});c.getEncodedHex();var f=new r({array:[u,c]});f.getEncodedHex(),s.push(f)}var l=new r({array:s});l.getEncodedHex(),this.valueList=[l]},void 0!==t&&"object"==typeof t.array&&this.setCerts(t.array)},oe.lang.extend(an.asn1.cms.SigningCertificate,an.asn1.cms.Attribute),an.asn1.cms.SigningCertificateV2=function(t){var e=an,n=e.asn1,r=n.DERSequence,i=n.x509,s=n.cms,o=e.crypto;if(s.SigningCertificateV2.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.47",this.setCerts=function(t,e){for(var a=[],h=0;h<t.length;h++){var u=kn(t[h]),c=[];"sha256"!==e&&c.push(new i.AlgorithmIdentifier({name:e}));var f=o.Util.hashHex(u,e),l=new n.DEROctetString({hex:f});l.getEncodedHex(),c.push(l);var d=new s.IssuerAndSerialNumber({cert:t[h]});d.getEncodedHex(),c.push(d);var p=new r({array:c});p.getEncodedHex(),a.push(p)}var g=new r({array:a});g.getEncodedHex(),this.valueList=[g]},void 0!==t&&"object"==typeof t.array){var a="sha256";"string"==typeof t.hashAlg&&(a=t.hashAlg),this.setCerts(t.array,a)}},oe.lang.extend(an.asn1.cms.SigningCertificateV2,an.asn1.cms.Attribute),an.asn1.cms.IssuerAndSerialNumber=function(t){var e=an.asn1,n=e.DERInteger,r=e.cms,i=e.x509.X500Name,s=Bn;r.IssuerAndSerialNumber.superclass.constructor.call(this),this.setByCertPEM=function(t){var e=kn(t),r=new s;r.hex=e;var o=r.getIssuerHex();this.dIssuer=new i,this.dIssuer.hTLV=o;var a=r.getSerialNumberHex();this.dSerial=new n({hex:a})},this.getEncodedHex=function(){var t=new e.DERSequence({array:[this.dIssuer,this.dSerial]});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t&&("string"==typeof t&&-1!=t.indexOf("-----BEGIN ")&&this.setByCertPEM(t),t.issuer&&t.serial&&(t.issuer instanceof i?this.dIssuer=t.issuer:this.dIssuer=new i(t.issuer),t.serial instanceof n?this.dSerial=t.serial:this.dSerial=new n(t.serial)),"string"==typeof t.cert&&this.setByCertPEM(t.cert))},oe.lang.extend(an.asn1.cms.IssuerAndSerialNumber,an.asn1.ASN1Object),an.asn1.cms.AttributeList=function(t){var e=an.asn1,n=e.cms;n.AttributeList.superclass.constructor.call(this),this.list=new Array,this.sortFlag=!0,this.add=function(t){t instanceof n.Attribute&&this.list.push(t)},this.length=function(){return this.list.length},this.clear=function(){this.list=new Array,this.hTLV=null,this.hV=null},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;var t=new e.DERSet({array:this.list,sortflag:this.sortFlag});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t&&void 0!==t.sortflag&&0==t.sortflag&&(this.sortFlag=!1)},oe.lang.extend(an.asn1.cms.AttributeList,an.asn1.ASN1Object),an.asn1.cms.SignerInfo=function(t){var e=an,n=e.asn1,r=n.DERTaggedObject,i=n.cms,s=i.AttributeList,o=i.ContentType,a=i.EncapsulatedContentInfo,h=i.MessageDigest,u=i.SignedData,c=n.x509.AlgorithmIdentifier,f=e.crypto,l=Dn;i.SignerInfo.superclass.constructor.call(this),this.dCMSVersion=new n.DERInteger({int:1}),this.dSignerIdentifier=null,this.dDigestAlgorithm=null,this.dSignedAttrs=new s,this.dSigAlg=null,this.dSig=null,this.dUnsignedAttrs=new s,this.setSignerIdentifier=function(t){"string"==typeof t&&-1!=t.indexOf("CERTIFICATE")&&-1!=t.indexOf("BEGIN")&&-1!=t.indexOf("END")&&(this.dSignerIdentifier=new i.IssuerAndSerialNumber({cert:t}))},this.setForContentAndHash=function(t){void 0!==t&&(t.eciObj instanceof a&&(this.dSignedAttrs.add(new o({oid:"1.2.840.113549.1.7.1"})),this.dSignedAttrs.add(new h({eciObj:t.eciObj,hashAlg:t.hashAlg}))),void 0!==t.sdObj&&t.sdObj instanceof u&&-1==t.sdObj.digestAlgNameList.join(":").indexOf(t.hashAlg)&&t.sdObj.digestAlgNameList.push(t.hashAlg),"string"==typeof t.hashAlg&&(this.dDigestAlgorithm=new c({name:t.hashAlg})))},this.sign=function(t,e){this.dSigAlg=new c({name:e});var r=this.dSignedAttrs.getEncodedHex(),i=l.getKey(t),s=new f.Signature({alg:e});s.init(i),s.updateHex(r);var o=s.sign();this.dSig=new n.DEROctetString({hex:o})},this.addUnsigned=function(t){this.hTLV=null,this.dUnsignedAttrs.hTLV=null,this.dUnsignedAttrs.add(t)},this.getEncodedHex=function(){if(this.dSignedAttrs instanceof s&&0==this.dSignedAttrs.length())throw"SignedAttrs length = 0 (empty)";var t=new r({obj:this.dSignedAttrs,tag:"a0",explicit:!1}),e=null;this.dUnsignedAttrs.length()>0&&(e=new r({obj:this.dUnsignedAttrs,tag:"a1",explicit:!1}));var i=[this.dCMSVersion,this.dSignerIdentifier,this.dDigestAlgorithm,t,this.dSigAlg,this.dSig];null!=e&&i.push(e);var o=new n.DERSequence({array:i});return this.hTLV=o.getEncodedHex(),this.hTLV}},oe.lang.extend(an.asn1.cms.SignerInfo,an.asn1.ASN1Object),an.asn1.cms.EncapsulatedContentInfo=function(t){var e=an.asn1,n=e.DERTaggedObject,r=e.DERSequence,i=e.DERObjectIdentifier,s=e.DEROctetString;e.cms.EncapsulatedContentInfo.superclass.constructor.call(this),this.dEContentType=new i({name:"data"}),this.dEContent=null,this.isDetached=!1,this.eContentValueHex=null,this.setContentType=function(t){t.match(/^[0-2][.][0-9.]+$/)?this.dEContentType=new i({oid:t}):this.dEContentType=new i({name:t})},this.setContentValue=function(t){void 0!==t&&("string"==typeof t.hex?this.eContentValueHex=t.hex:"string"==typeof t.str&&(this.eContentValueHex=vn(t.str)))},this.setContentValueHex=function(t){this.eContentValueHex=t},this.setContentValueStr=function(t){this.eContentValueHex=vn(t)},this.getEncodedHex=function(){if("string"!=typeof this.eContentValueHex)throw"eContentValue not yet set";var t=new s({hex:this.eContentValueHex});this.dEContent=new n({obj:t,tag:"a0",explicit:!0});var e=[this.dEContentType];this.isDetached||e.push(this.dEContent);var i=new r({array:e});return this.hTLV=i.getEncodedHex(),this.hTLV}},oe.lang.extend(an.asn1.cms.EncapsulatedContentInfo,an.asn1.ASN1Object),an.asn1.cms.ContentInfo=function(t){var e=an.asn1,n=e.DERTaggedObject,r=e.DERSequence,i=e.x509;an.asn1.cms.ContentInfo.superclass.constructor.call(this),this.dContentType=null,this.dContent=null,this.setContentType=function(t){"string"==typeof t&&(this.dContentType=i.OID.name2obj(t))},this.getEncodedHex=function(){var t=new n({obj:this.dContent,tag:"a0",explicit:!0}),e=new r({array:[this.dContentType,t]});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t&&(t.type&&this.setContentType(t.type),t.obj&&t.obj instanceof e.ASN1Object&&(this.dContent=t.obj))},oe.lang.extend(an.asn1.cms.ContentInfo,an.asn1.ASN1Object),an.asn1.cms.SignedData=function(t){var e=an.asn1,n=e.ASN1Object,r=e.DERInteger,i=e.DERSet,s=e.DERSequence,o=e.DERTaggedObject,a=e.cms,h=a.EncapsulatedContentInfo,u=a.SignerInfo,c=a.ContentInfo,f=e.x509.AlgorithmIdentifier;an.asn1.cms.SignedData.superclass.constructor.call(this),this.dCMSVersion=new r({int:1}),this.dDigestAlgs=null,this.digestAlgNameList=[],this.dEncapContentInfo=new h,this.dCerts=null,this.certificateList=[],this.crlList=[],this.signerInfoList=[new u],this.addCertificatesByPEM=function(t){var e=kn(t),r=new n;r.hTLV=e,this.certificateList.push(r)},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;if(null==this.dDigestAlgs){for(var t=[],e=0;e<this.digestAlgNameList.length;e++){var n=this.digestAlgNameList[e],r=new f({name:n});t.push(r)}this.dDigestAlgs=new i({array:t})}var a=[this.dCMSVersion,this.dDigestAlgs,this.dEncapContentInfo];if(null==this.dCerts&&this.certificateList.length>0){var h=new i({array:this.certificateList});this.dCerts=new o({obj:h,tag:"a0",explicit:!1})}null!=this.dCerts&&a.push(this.dCerts);var u=new i({array:this.signerInfoList});a.push(u);var c=new s({array:a});return this.hTLV=c.getEncodedHex(),this.hTLV},this.getContentInfo=function(){return this.getEncodedHex(),new c({type:"signed-data",obj:this})},this.getContentInfoEncodedHex=function(){return this.getContentInfo().getEncodedHex()},this.getPEM=function(){return xn(this.getContentInfoEncodedHex(),"CMS")}},oe.lang.extend(an.asn1.cms.SignedData,an.asn1.ASN1Object),an.asn1.cms.CMSUtil=new function(){},an.asn1.cms.CMSUtil.newSignedData=function(t){var e=an.asn1,n=e.cms,r=n.SignerInfo,i=n.SignedData,s=n.SigningTime,o=n.SigningCertificate,a=n.SigningCertificateV2,h=e.cades.SignaturePolicyIdentifier,u=new i;if(u.dEncapContentInfo.setContentValue(t.content),"object"==typeof t.certs)for(var c=0;c<t.certs.length;c++)u.addCertificatesByPEM(t.certs[c]);u.signerInfoList=[];for(c=0;c<t.signerInfos.length;c++){var f=t.signerInfos[c],l=new r;for(attrName in l.setSignerIdentifier(f.signerCert),l.setForContentAndHash({sdObj:u,eciObj:u.dEncapContentInfo,hashAlg:f.hashAlg}),f.sAttr){var d=f.sAttr[attrName];if("SigningTime"==attrName){var p=new s(d);l.dSignedAttrs.add(p)}if("SigningCertificate"==attrName){p=new o(d);l.dSignedAttrs.add(p)}if("SigningCertificateV2"==attrName){p=new a(d);l.dSignedAttrs.add(p)}if("SignaturePolicyIdentifier"==attrName){p=new h(d);l.dSignedAttrs.add(p)}}l.sign(f.signerPrvKey,f.sigAlg),u.signerInfoList.push(l)}return u},an.asn1.cms.CMSUtil.verifySignedData=function(t){var e=an,n=e.asn1,r=n.cms,i=(r.SignerInfo,r.SignedData,r.SigningTime,r.SigningCertificate,r.SigningCertificateV2,n.cades.SignaturePolicyIdentifier,e.lang.String.isHex),s=cn,o=s.getVbyList,a=s.getTLVbyList,h=s.getIdxbyList,u=s.getChildIdx,c=s.getTLV,f=s.oidname,l=e.crypto.Util.hashHex;void 0===t.cms&&i(t.cms);var d=t.cms,p=function(t,e){var n=e.idx;e.signerid_issuer1=a(t,n,[1,0],"30"),e.signerid_serial1=o(t,n,[1,1],"02"),e.hashalg=f(o(t,n,[2,0],"06"));var r=h(t,n,[3],"a0");e.idxSignedAttrs=r,g(t,e,r);var i=u(t,n).length;if(i<6)throw"malformed SignerInfo";e.sigalg=f(o(t,n,[i-2,0],"06")),e.sigval=o(t,n,[i-1],"04")},g=function(t,e,n){var r=u(t,n);e.signedAttrIdxList=r;for(var i=0;i<r.length;i++){var s,a=r[i],h=o(t,a,[0],"06");"2a864886f70d010905"===h?(s=mn(o(t,a,[1,0])),e.saSigningTime=s):"2a864886f70d010904"===h&&(s=o(t,a,[1,0],"04"),e.saMessageDigest=s)}},y=function(t,e,n,r){n.verifyDetail={};var i=n.verifyDetail,s=e.parse.econtent,o=n.hashalg,a=n.saMessageDigest;i.validMessageDigest=!1,l(s,o)===a&&(i.validMessageDigest=!0),function(t,e,n,r){var i,s=e.parse.certsIdx;if(void 0===e.certs){i=[],e.certkeys=[];for(var o=u(t,s),a=0;a<o.length;a++){var h=c(t,o[a]),f=new Bn;f.readCertHex(h),i[a]=f,e.certkeys[a]=f.getPublicKey()}e.certs=i}else i=e.certs;e.cccc=i.length,e.cccci=o.length;for(a=0;a<i.length;a++){var l=f.getIssuerHex(),d=f.getSerialNumberHex();n.signerid_issuer1===l&&n.signerid_serial1===d&&(n.certkey_idx=a)}}(t,e,n),i.validSignatureValue=!1;var h=n.sigalg,f="31"+c(t,n.idxSignedAttrs).substr(2);n.signedattrshex=f;var d=e.certs[n.certkey_idx].getPublicKey(),p=new an.crypto.Signature({alg:h});p.init(d),p.updateHex(f);var g=p.verify(n.sigval);i.validSignatureValue_isValid=g,!0===g&&(i.validSignatureValue=!0),n.isValid=!1,i.validMessageDigest&&i.validSignatureValue&&(n.isValid=!0)},v={isValid:!1,parse:{}};return function(t,e){if("2a864886f70d010702"!==o(t,0,[0],"06"))return e;e.cmsType="signedData",e.econtent=o(t,0,[1,0,2,1,0]),function(t,e){for(var n,r=3;r<6;r++)if(void 0!==(n=h(t,0,[1,0,r]))){var i=t.substr(n,2);"a0"===i&&(e.certsIdx=n),"a1"===i&&(e.revinfosIdx=n),"31"===i&&(e.signerinfosIdx=n)}}(t,e),e.signerInfos=[],function(t,e){var n=e.signerinfosIdx;if(void 0!==n){var r=u(t,n);e.signerInfoIdxList=r;for(var i=0;i<r.length;i++){var s={idx:r[i]};p(t,s),e.signerInfos.push(s)}}}(t,e)}(d,v.parse),function(t,e){for(var n=e.parse.signerInfos,r=n.length,i=!0,s=0;s<r;s++){var o=n[s];y(t,e,o,s),o.isValid||(i=!1)}e.isValid=i}(d,v),v},void 0!==an&&an||(an={}),void 0!==an.asn1&&an.asn1||(an.asn1={}),void 0!==an.asn1.tsp&&an.asn1.tsp||(an.asn1.tsp={}),an.asn1.tsp.Accuracy=function(t){var e=an.asn1,n=e.DERInteger,r=e.DERSequence,i=e.DERTaggedObject;e.tsp.Accuracy.superclass.constructor.call(this),this.seconds=null,this.millis=null,this.micros=null,this.getEncodedHex=function(){var t=null,e=null,s=null,o=[];if(null!=this.seconds&&(t=new n({int:this.seconds}),o.push(t)),null!=this.millis){var a=new n({int:this.millis});e=new i({obj:a,tag:"80",explicit:!1}),o.push(e)}if(null!=this.micros){var h=new n({int:this.micros});s=new i({obj:h,tag:"81",explicit:!1}),o.push(s)}var u=new r({array:o});return this.hTLV=u.getEncodedHex(),this.hTLV},void 0!==t&&("number"==typeof t.seconds&&(this.seconds=t.seconds),"number"==typeof t.millis&&(this.millis=t.millis),"number"==typeof t.micros&&(this.micros=t.micros))},oe.lang.extend(an.asn1.tsp.Accuracy,an.asn1.ASN1Object),an.asn1.tsp.MessageImprint=function(t){var e=an.asn1,n=e.DERSequence,r=e.DEROctetString,i=e.x509.AlgorithmIdentifier;e.tsp.MessageImprint.superclass.constructor.call(this),this.dHashAlg=null,this.dHashValue=null,this.getEncodedHex=function(){return"string"==typeof this.hTLV?this.hTLV:new n({array:[this.dHashAlg,this.dHashValue]}).getEncodedHex()},void 0!==t&&("string"==typeof t.hashAlg&&(this.dHashAlg=new i({name:t.hashAlg})),"string"==typeof t.hashValue&&(this.dHashValue=new r({hex:t.hashValue})))},oe.lang.extend(an.asn1.tsp.MessageImprint,an.asn1.ASN1Object),an.asn1.tsp.TimeStampReq=function(t){var e=an.asn1,n=e.DERSequence,r=e.DERInteger,i=e.DERBoolean,s=e.DERObjectIdentifier,o=e.tsp,a=o.MessageImprint;o.TimeStampReq.superclass.constructor.call(this),this.dVersion=new r({int:1}),this.dMessageImprint=null,this.dPolicy=null,this.dNonce=null,this.certReq=!0,this.setMessageImprint=function(t){t instanceof a?this.dMessageImprint=t:"object"==typeof t&&(this.dMessageImprint=new a(t))},this.getEncodedHex=function(){if(null==this.dMessageImprint)throw"messageImprint shall be specified";var t=[this.dVersion,this.dMessageImprint];null!=this.dPolicy&&t.push(this.dPolicy),null!=this.dNonce&&t.push(this.dNonce),this.certReq&&t.push(new i);var e=new n({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t&&("object"==typeof t.mi&&this.setMessageImprint(t.mi),"object"==typeof t.policy&&(this.dPolicy=new s(t.policy)),"object"==typeof t.nonce&&(this.dNonce=new r(t.nonce)),"boolean"==typeof t.certreq&&(this.certReq=t.certreq))},oe.lang.extend(an.asn1.tsp.TimeStampReq,an.asn1.ASN1Object),an.asn1.tsp.TSTInfo=function(t){var e=an.asn1,n=e.DERSequence,r=e.DERInteger,i=e.DERBoolean,s=e.DERGeneralizedTime,o=e.DERObjectIdentifier,a=e.tsp,h=a.MessageImprint,u=a.Accuracy,c=e.x509.X500Name;if(a.TSTInfo.superclass.constructor.call(this),this.dVersion=new r({int:1}),this.dPolicy=null,this.dMessageImprint=null,this.dSerialNumber=null,this.dGenTime=null,this.dAccuracy=null,this.dOrdering=null,this.dNonce=null,this.dTsa=null,this.getEncodedHex=function(){var t=[this.dVersion];if(null==this.dPolicy)throw"policy shall be specified.";if(t.push(this.dPolicy),null==this.dMessageImprint)throw"messageImprint shall be specified.";if(t.push(this.dMessageImprint),null==this.dSerialNumber)throw"serialNumber shall be specified.";if(t.push(this.dSerialNumber),null==this.dGenTime)throw"genTime shall be specified.";t.push(this.dGenTime),null!=this.dAccuracy&&t.push(this.dAccuracy),null!=this.dOrdering&&t.push(this.dOrdering),null!=this.dNonce&&t.push(this.dNonce),null!=this.dTsa&&t.push(this.dTsa);var e=new n({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t){if("string"==typeof t.policy){if(!t.policy.match(/^[0-9.]+$/))throw"policy shall be oid like 0.1.4.134";this.dPolicy=new o({oid:t.policy})}void 0!==t.messageImprint&&(this.dMessageImprint=new h(t.messageImprint)),void 0!==t.serialNumber&&(this.dSerialNumber=new r(t.serialNumber)),void 0!==t.genTime&&(this.dGenTime=new s(t.genTime)),void 0!==t.accuracy&&(this.dAccuracy=new u(t.accuracy)),void 0!==t.ordering&&1==t.ordering&&(this.dOrdering=new i),void 0!==t.nonce&&(this.dNonce=new r(t.nonce)),void 0!==t.tsa&&(this.dTsa=new c(t.tsa))}},oe.lang.extend(an.asn1.tsp.TSTInfo,an.asn1.ASN1Object),an.asn1.tsp.TimeStampResp=function(t){var e=an.asn1,n=e.DERSequence,r=e.ASN1Object,i=e.tsp,s=i.PKIStatusInfo;i.TimeStampResp.superclass.constructor.call(this),this.dStatus=null,this.dTST=null,this.getEncodedHex=function(){if(null==this.dStatus)throw"status shall be specified";var t=[this.dStatus];null!=this.dTST&&t.push(this.dTST);var e=new n({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t&&("object"==typeof t.status&&(this.dStatus=new s(t.status)),void 0!==t.tst&&t.tst instanceof r&&(this.dTST=t.tst.getContentInfo()))},oe.lang.extend(an.asn1.tsp.TimeStampResp,an.asn1.ASN1Object),an.asn1.tsp.PKIStatusInfo=function(t){var e=an.asn1,n=e.DERSequence,r=e.tsp,i=r.PKIStatus,s=r.PKIFreeText,o=r.PKIFailureInfo;r.PKIStatusInfo.superclass.constructor.call(this),this.dStatus=null,this.dStatusString=null,this.dFailureInfo=null,this.getEncodedHex=function(){if(null==this.dStatus)throw"status shall be specified";var t=[this.dStatus];null!=this.dStatusString&&t.push(this.dStatusString),null!=this.dFailureInfo&&t.push(this.dFailureInfo);var e=new n({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t&&("object"==typeof t.status&&(this.dStatus=new i(t.status)),"object"==typeof t.statstr&&(this.dStatusString=new s({array:t.statstr})),"object"==typeof t.failinfo&&(this.dFailureInfo=new o(t.failinfo)))},oe.lang.extend(an.asn1.tsp.PKIStatusInfo,an.asn1.ASN1Object),an.asn1.tsp.PKIStatus=function(t){var e=an.asn1,n=e.DERInteger,r=e.tsp,i=r.PKIStatus;if(r.PKIStatus.superclass.constructor.call(this),this.getEncodedHex=function(){return this.hTLV=this.dStatus.getEncodedHex(),this.hTLV},void 0!==t)if(void 0!==t.name){var s=i.valueList;if(void 0===s[t.name])throw"name undefined: "+t.name;this.dStatus=new n({int:s[t.name]})}else this.dStatus=new n(t)},oe.lang.extend(an.asn1.tsp.PKIStatus,an.asn1.ASN1Object),an.asn1.tsp.PKIStatus.valueList={granted:0,grantedWithMods:1,rejection:2,waiting:3,revocationWarning:4,revocationNotification:5},an.asn1.tsp.PKIFreeText=function(t){var e=an.asn1,n=e.DERSequence,r=e.DERUTF8String;e.tsp.PKIFreeText.superclass.constructor.call(this),this.textList=[],this.getEncodedHex=function(){for(var t=[],e=0;e<this.textList.length;e++)t.push(new r({str:this.textList[e]}));var i=new n({array:t});return this.hTLV=i.getEncodedHex(),this.hTLV},void 0!==t&&"object"==typeof t.array&&(this.textList=t.array)},oe.lang.extend(an.asn1.tsp.PKIFreeText,an.asn1.ASN1Object),an.asn1.tsp.PKIFailureInfo=function(t){var e=an.asn1,n=e.DERBitString,r=e.tsp.PKIFailureInfo;if(r.superclass.constructor.call(this),this.value=null,this.getEncodedHex=function(){if(null==this.value)throw"value shall be specified";var t=new Number(this.value).toString(2),e=new n;return e.setByBinaryString(t),this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t)if("string"==typeof t.name){var i=r.valueList;if(void 0===i[t.name])throw"name undefined: "+t.name;this.value=i[t.name]}else"number"==typeof t.int&&(this.value=t.int)},oe.lang.extend(an.asn1.tsp.PKIFailureInfo,an.asn1.ASN1Object),an.asn1.tsp.PKIFailureInfo.valueList={badAlg:0,badRequest:2,badDataFormat:5,timeNotAvailable:14,unacceptedPolicy:15,unacceptedExtension:16,addInfoNotAvailable:17,systemFailure:25},an.asn1.tsp.AbstractTSAAdapter=function(t){this.getTSTHex=function(t,e){throw"not implemented yet"}},an.asn1.tsp.SimpleTSAAdapter=function(t){var e=an,n=e.asn1.tsp,r=e.crypto.Util.hashHex;n.SimpleTSAAdapter.superclass.constructor.call(this),this.params=null,this.serial=0,this.getTSTHex=function(t,e){var i=r(t,e);this.params.tstInfo.messageImprint={hashAlg:e,hashValue:i},this.params.tstInfo.serialNumber={int:this.serial++};var s=Math.floor(1e9*Math.random());return this.params.tstInfo.nonce={int:s},n.TSPUtil.newTimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==t&&(this.params=t)},oe.lang.extend(an.asn1.tsp.SimpleTSAAdapter,an.asn1.tsp.AbstractTSAAdapter),an.asn1.tsp.FixedTSAAdapter=function(t){var e=an,n=e.asn1.tsp,r=e.crypto.Util.hashHex;n.FixedTSAAdapter.superclass.constructor.call(this),this.params=null,this.getTSTHex=function(t,e){var i=r(t,e);return this.params.tstInfo.messageImprint={hashAlg:e,hashValue:i},n.TSPUtil.newTimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==t&&(this.params=t)},oe.lang.extend(an.asn1.tsp.FixedTSAAdapter,an.asn1.tsp.AbstractTSAAdapter),an.asn1.tsp.TSPUtil=new function(){},an.asn1.tsp.TSPUtil.newTimeStampToken=function(t){var e=an.asn1,n=e.cms,r=(e.tsp,e.tsp.TSTInfo),i=new n.SignedData,s=new r(t.tstInfo).getEncodedHex();if(i.dEncapContentInfo.setContentValue({hex:s}),i.dEncapContentInfo.setContentType("tstinfo"),"object"==typeof t.certs)for(var o=0;o<t.certs.length;o++)i.addCertificatesByPEM(t.certs[o]);var a=i.signerInfoList[0];a.setSignerIdentifier(t.signerCert),a.setForContentAndHash({sdObj:i,eciObj:i.dEncapContentInfo,hashAlg:t.hashAlg});var h=new n.SigningCertificate({array:[t.signerCert]});return a.dSignedAttrs.add(h),a.sign(t.signerPrvKey,t.sigAlg),i},an.asn1.tsp.TSPUtil.parseTimeStampReq=function(t){var e=cn,n=e.getChildIdx,r=e.getV,i=e.getTLV,s={certreq:!1},o=n(t,0);if(o.length<2)throw"TimeStampReq must have at least 2 items";var a=i(t,o[1]);s.mi=an.asn1.tsp.TSPUtil.parseMessageImprint(a);for(var h=2;h<o.length;h++){var u=o[h],c=t.substr(u,2);if("06"==c){var f=r(t,u);s.policy=e.hextooidstr(f)}"02"==c&&(s.nonce=r(t,u)),"01"==c&&(s.certreq=!0)}return s},an.asn1.tsp.TSPUtil.parseMessageImprint=function(t){var e=cn,n=e.getChildIdx,r=e.getV,i=e.getIdxbyList,s={};if("30"!=t.substr(0,2))throw"head of messageImprint hex shall be '30'";n(t,0);var o=r(t,i(t,0,[0,0])),a=e.hextooidstr(o),h=an.asn1.x509.OID.oid2name(a);if(""==h)throw"hashAlg name undefined: "+a;var u=h,c=i(t,0,[1]);return s.hashAlg=u,s.hashValue=r(t,c),s},void 0!==an&&an||(an={}),void 0!==an.asn1&&an.asn1||(an.asn1={}),void 0!==an.asn1.cades&&an.asn1.cades||(an.asn1.cades={}),an.asn1.cades.SignaturePolicyIdentifier=function(t){var e=an.asn1,n=e.DERObjectIdentifier,r=e.DERSequence,i=e.cades,s=i.OtherHashAlgAndValue;if(i.SignaturePolicyIdentifier.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.15",void 0!==t&&"string"==typeof t.oid&&"object"==typeof t.hash){var o=new r({array:[new n({oid:t.oid}),new s(t.hash)]});this.valueList=[o]}},oe.lang.extend(an.asn1.cades.SignaturePolicyIdentifier,an.asn1.cms.Attribute),an.asn1.cades.OtherHashAlgAndValue=function(t){var e=an.asn1,n=e.DERSequence,r=e.DEROctetString,i=e.x509.AlgorithmIdentifier;e.cades.OtherHashAlgAndValue.superclass.constructor.call(this),this.dAlg=null,this.dHash=null,this.getEncodedHex=function(){var t=new n({array:[this.dAlg,this.dHash]});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t&&"string"==typeof t.alg&&"string"==typeof t.hash&&(this.dAlg=new i({name:t.alg}),this.dHash=new r({hex:t.hash}))},oe.lang.extend(an.asn1.cades.OtherHashAlgAndValue,an.asn1.ASN1Object),an.asn1.cades.SignatureTimeStamp=function(t){var e=an.asn1,n=e.ASN1Object;e.x509;if(e.cades.SignatureTimeStamp.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.14",this.tstHex=null,void 0!==t){if(void 0!==t.res)if("string"==typeof t.res&&t.res.match(/^[0-9A-Fa-f]+$/));else if(!(t.res instanceof n))throw"res param shall be ASN1Object or hex string";if(void 0!==t.tst)if("string"==typeof t.tst&&t.tst.match(/^[0-9A-Fa-f]+$/)){var r=new n;this.tstHex=t.tst,r.hTLV=this.tstHex,r.getEncodedHex(),this.valueList=[r]}else if(!(t.tst instanceof n))throw"tst param shall be ASN1Object or hex string"}},oe.lang.extend(an.asn1.cades.SignatureTimeStamp,an.asn1.cms.Attribute),an.asn1.cades.CompleteCertificateRefs=function(t){var e=an.asn1.cades;e.CompleteCertificateRefs.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.21",this.setByArray=function(t){this.valueList=[];for(var n=0;n<t.length;n++){var r=new e.OtherCertID(t[n]);this.valueList.push(r)}},void 0!==t&&"object"==typeof t&&"number"==typeof t.length&&this.setByArray(t)},oe.lang.extend(an.asn1.cades.CompleteCertificateRefs,an.asn1.cms.Attribute),an.asn1.cades.OtherCertID=function(t){var e=an.asn1,n=e.cms,r=e.cades;r.OtherCertID.superclass.constructor.call(this),this.hasIssuerSerial=!0,this.dOtherCertHash=null,this.dIssuerSerial=null,this.setByCertPEM=function(t){this.dOtherCertHash=new r.OtherHash(t),this.hasIssuerSerial&&(this.dIssuerSerial=new n.IssuerAndSerialNumber(t))},this.getEncodedHex=function(){if(null!=this.hTLV)return this.hTLV;if(null==this.dOtherCertHash)throw"otherCertHash not set";var t=[this.dOtherCertHash];null!=this.dIssuerSerial&&t.push(this.dIssuerSerial);var n=new e.DERSequence({array:t});return this.hTLV=n.getEncodedHex(),this.hTLV},void 0!==t&&("string"==typeof t&&-1!=t.indexOf("-----BEGIN ")&&this.setByCertPEM(t),"object"==typeof t&&(!1===t.hasis&&(this.hasIssuerSerial=!1),"string"==typeof t.cert&&this.setByCertPEM(t.cert)))},oe.lang.extend(an.asn1.cades.OtherCertID,an.asn1.ASN1Object),an.asn1.cades.OtherHash=function(t){var e=an,n=e.asn1,r=(n.cms,n.cades),i=r.OtherHashAlgAndValue,s=e.crypto.Util.hashHex;if(r.OtherHash.superclass.constructor.call(this),this.alg="sha256",this.dOtherHash=null,this.setByCertPEM=function(t){if(-1==t.indexOf("-----BEGIN "))throw"certPEM not to seem PEM format";var e=kn(t),n=s(e,this.alg);this.dOtherHash=new i({alg:this.alg,hash:n})},this.getEncodedHex=function(){if(null==this.dOtherHash)throw"OtherHash not set";return this.dOtherHash.getEncodedHex()},void 0!==t)if("string"==typeof t)if(-1!=t.indexOf("-----BEGIN "))this.setByCertPEM(t);else{if(!t.match(/^[0-9A-Fa-f]+$/))throw"unsupported string value for params";this.dOtherHash=new n.DEROctetString({hex:t})}else"object"==typeof t&&("string"==typeof t.cert?("string"==typeof t.alg&&(this.alg=t.alg),this.setByCertPEM(t.cert)):this.dOtherHash=new i(t))},oe.lang.extend(an.asn1.cades.OtherHash,an.asn1.ASN1Object),an.asn1.cades.CAdESUtil=new function(){},an.asn1.cades.CAdESUtil.addSigTS=function(t,e,n){},an.asn1.cades.CAdESUtil.parseSignedDataForAddingUnsigned=function(t){var e=cn,n=e.getChildIdx,r=e.getTLV,i=e.getTLVbyList,s=e.getIdxbyList,o=an.asn1,a=o.ASN1Object,h=o.cms.SignedData,u=o.cades.CAdESUtil,c={};if("06092a864886f70d010702"!=i(t,0,[0]))throw"hex is not CMS SignedData";var f=n(t,s(t,0,[1,0]));if(f.length<4)throw"num of SignedData elem shall be 4 at least";var l=f.shift();c.version=r(t,l);var d=f.shift();c.algs=r(t,d);var p=f.shift();c.encapcontent=r(t,p),c.certs=null,c.revs=null,c.si=[];var g=f.shift();"a0"==t.substr(g,2)&&(c.certs=r(t,g),g=f.shift()),"a1"==t.substr(g,2)&&(c.revs=r(t,g),g=f.shift());var y=g;if("31"!=t.substr(y,2))throw"Can't find signerInfos";for(var v=n(t,y),m=0;m<v.length;m++){var b=v[m],S=u.parseSignerInfoForAddingUnsigned(t,b,m);c.si[m]=S}var w=null;c.obj=new h,(w=new a).hTLV=c.version,c.obj.dCMSVersion=w,(w=new a).hTLV=c.algs,c.obj.dDigestAlgs=w,(w=new a).hTLV=c.encapcontent,c.obj.dEncapContentInfo=w,(w=new a).hTLV=c.certs,c.obj.dCerts=w,c.obj.signerInfoList=[];for(m=0;m<c.si.length;m++)c.obj.signerInfoList.push(c.si[m].obj);return c},an.asn1.cades.CAdESUtil.parseSignerInfoForAddingUnsigned=function(t,e,n){var r=cn,i=r.getChildIdx,s=r.getTLV,o=r.getV,a=an.asn1,h=a.ASN1Object,u=a.cms,c=u.AttributeList,f=u.SignerInfo,l={},d=i(t,e);if(6!=d.length)throw"not supported items for SignerInfo (!=6)";var p=d.shift();l.version=s(t,p);var g=d.shift();l.si=s(t,g);var y=d.shift();l.digalg=s(t,y);var v=d.shift();l.sattrs=s(t,v);var m=d.shift();l.sigalg=s(t,m);var b=d.shift();l.sig=s(t,b),l.sigval=o(t,b);var S=null;return l.obj=new f,(S=new h).hTLV=l.version,l.obj.dCMSVersion=S,(S=new h).hTLV=l.si,l.obj.dSignerIdentifier=S,(S=new h).hTLV=l.digalg,l.obj.dDigestAlgorithm=S,(S=new h).hTLV=l.sattrs,l.obj.dSignedAttrs=S,(S=new h).hTLV=l.sigalg,l.obj.dSigAlg=S,(S=new h).hTLV=l.sig,l.obj.dSig=S,l.obj.dUnsignedAttrs=new c,l},void 0!==an.asn1.csr&&an.asn1.csr||(an.asn1.csr={}),an.asn1.csr.CertificationRequest=function(t){var e=an,n=e.asn1,r=n.DERBitString,i=n.DERSequence,s=n.csr,o=n.x509;s.CertificationRequest.superclass.constructor.call(this),this.sign=function(t,n){null==this.prvKey&&(this.prvKey=n),this.asn1SignatureAlg=new o.AlgorithmIdentifier({name:t}),sig=new e.crypto.Signature({alg:t}),sig.init(this.prvKey),sig.updateHex(this.asn1CSRInfo.getEncodedHex()),this.hexSig=sig.sign(),this.asn1Sig=new r({hex:"00"+this.hexSig});var s=new i({array:[this.asn1CSRInfo,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=s.getEncodedHex(),this.isModified=!1},this.getPEMString=function(){return xn(this.getEncodedHex(),"CERTIFICATE REQUEST")},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},void 0!==t&&void 0!==t.csrinfo&&(this.asn1CSRInfo=t.csrinfo)},oe.lang.extend(an.asn1.csr.CertificationRequest,an.asn1.ASN1Object),an.asn1.csr.CertificationRequestInfo=function(t){var e=an.asn1,n=e.DERInteger,r=e.DERSequence,i=e.DERSet,s=e.DERNull,o=e.DERTaggedObject,a=e.DERObjectIdentifier,h=e.csr,u=e.x509,c=u.X500Name,f=u.Extension,l=Dn;h.CertificationRequestInfo.superclass.constructor.call(this),this._initialize=function(){this.asn1Array=new Array,this.asn1Version=new n({int:0}),this.asn1Subject=null,this.asn1SubjPKey=null,this.extensionsArray=new Array},this.setSubjectByParam=function(t){this.asn1Subject=new c(t)},this.setSubjectPublicKeyByGetKey=function(t){var e=l.getKey(t);this.asn1SubjPKey=new u.SubjectPublicKeyInfo(e)},this.appendExtensionByName=function(t,e){f.appendByNameToArray(t,e,this.extensionsArray)},this.getEncodedHex=function(){if(this.asn1Array=new Array,this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1Subject),this.asn1Array.push(this.asn1SubjPKey),this.extensionsArray.length>0){var t=new r({array:this.extensionsArray}),e=new i({array:[t]}),n=new r({array:[new a({oid:"1.2.840.113549.1.9.14"}),e]}),h=new o({explicit:!0,tag:"a0",obj:n});this.asn1Array.push(h)}else{h=new o({explicit:!1,tag:"a0",obj:new s});this.asn1Array.push(h)}var u=new r({array:this.asn1Array});return this.hTLV=u.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize()},oe.lang.extend(an.asn1.csr.CertificationRequestInfo,an.asn1.ASN1Object),an.asn1.csr.CSRUtil=new function(){},an.asn1.csr.CSRUtil.newCSRPEM=function(t){var e=Dn,n=an.asn1.csr;if(void 0===t.subject)throw"parameter subject undefined";if(void 0===t.sbjpubkey)throw"parameter sbjpubkey undefined";if(void 0===t.sigalg)throw"parameter sigalg undefined";if(void 0===t.sbjprvkey)throw"parameter sbjpubkey undefined";var r=new n.CertificationRequestInfo;if(r.setSubjectByParam(t.subject),r.setSubjectPublicKeyByGetKey(t.sbjpubkey),void 0!==t.ext&&void 0!==t.ext.length)for(var i=0;i<t.ext.length;i++)for(key in t.ext[i])r.appendExtensionByName(key,t.ext[i][key]);var s=new n.CertificationRequest({csrinfo:r}),o=e.getKey(t.sbjprvkey);return s.sign(t.sigalg,o),s.getPEMString()},an.asn1.csr.CSRUtil.getInfo=function(t){var e=cn.getTLVbyList,n={subject:{},pubkey:{}};if(-1==t.indexOf("-----BEGIN CERTIFICATE REQUEST"))throw"argument is not PEM file";var r=kn(t,"CERTIFICATE REQUEST");return n.subject.hex=e(r,0,[0,1]),n.subject.name=Bn.hex2dn(n.subject.hex),n.pubkey.hex=e(r,0,[0,2]),n.pubkey.obj=Dn.getKey(n.pubkey.hex,null,"pkcs8pub"),n},void 0!==an&&an||(an={}),void 0!==an.asn1&&an.asn1||(an.asn1={}),void 0!==an.asn1.ocsp&&an.asn1.ocsp||(an.asn1.ocsp={}),an.asn1.ocsp.DEFAULT_HASH="sha1",an.asn1.ocsp.CertID=function(t){var e=an,n=e.asn1,r=n.DEROctetString,i=n.DERInteger,s=n.DERSequence,o=n.x509.AlgorithmIdentifier,a=n.ocsp,h=a.DEFAULT_HASH,u=e.crypto.Util.hashHex,c=Bn,f=cn;if(a.CertID.superclass.constructor.call(this),this.dHashAlg=null,this.dIssuerNameHash=null,this.dIssuerKeyHash=null,this.dSerialNumber=null,this.setByValue=function(t,e,n,s){void 0===s&&(s=h),this.dHashAlg=new o({name:s}),this.dIssuerNameHash=new r({hex:t}),this.dIssuerKeyHash=new r({hex:e}),this.dSerialNumber=new i({hex:n})},this.setByCert=function(t,e,n){void 0===n&&(n=h);var r=new c;r.readCertPEM(e);var i=new c;i.readCertPEM(t);var s=i.getPublicKeyHex(),o=f.getTLVbyList(s,0,[1,0],"30"),a=r.getSerialNumberHex(),l=u(i.getSubjectHex(),n),d=u(o,n);this.setByValue(l,d,a,n),this.hoge=r.getSerialNumberHex()},this.getEncodedHex=function(){if(null===this.dHashAlg&&null===this.dIssuerNameHash&&null===this.dIssuerKeyHash&&null===this.dSerialNumber)throw"not yet set values";var t=[this.dHashAlg,this.dIssuerNameHash,this.dIssuerKeyHash,this.dSerialNumber],e=new s({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t){var l=t;if(void 0!==l.issuerCert&&void 0!==l.subjectCert){var d=h;void 0===l.alg&&(d=void 0),this.setByCert(l.issuerCert,l.subjectCert,d)}else{if(void 0===l.namehash||void 0===l.keyhash||void 0===l.serial)throw"invalid constructor arguments";d=h;void 0===l.alg&&(d=void 0),this.setByValue(l.namehash,l.keyhash,l.serial,d)}}},oe.lang.extend(an.asn1.ocsp.CertID,an.asn1.ASN1Object),an.asn1.ocsp.Request=function(t){var e=an.asn1,n=e.DERSequence,r=e.ocsp;if(r.Request.superclass.constructor.call(this),this.dReqCert=null,this.dExt=null,this.getEncodedHex=function(){var t=[];if(null===this.dReqCert)throw"reqCert not set";t.push(this.dReqCert);var e=new n({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t){var i=new r.CertID(t);this.dReqCert=i}},oe.lang.extend(an.asn1.ocsp.Request,an.asn1.ASN1Object),an.asn1.ocsp.TBSRequest=function(t){var e=an.asn1,n=e.DERSequence,r=e.ocsp;r.TBSRequest.superclass.constructor.call(this),this.version=0,this.dRequestorName=null,this.dRequestList=[],this.dRequestExt=null,this.setRequestListByParam=function(t){for(var e=[],n=0;n<t.length;n++){var i=new r.Request(t[0]);e.push(i)}this.dRequestList=e},this.getEncodedHex=function(){var t=[];if(0!==this.version)throw"not supported version: "+this.version;if(null!==this.dRequestorName)throw"requestorName not supported";var e=new n({array:this.dRequestList});if(t.push(e),null!==this.dRequestExt)throw"requestExtensions not supported";var r=new n({array:t});return this.hTLV=r.getEncodedHex(),this.hTLV},void 0!==t&&void 0!==t.reqList&&this.setRequestListByParam(t.reqList)},oe.lang.extend(an.asn1.ocsp.TBSRequest,an.asn1.ASN1Object),an.asn1.ocsp.OCSPRequest=function(t){var e=an.asn1,n=e.DERSequence,r=e.ocsp;if(r.OCSPRequest.superclass.constructor.call(this),this.dTbsRequest=null,this.dOptionalSignature=null,this.getEncodedHex=function(){var t=[];if(null===this.dTbsRequest)throw"tbsRequest not set";if(t.push(this.dTbsRequest),null!==this.dOptionalSignature)throw"optionalSignature not supported";var e=new n({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t&&void 0!==t.reqList){var i=new r.TBSRequest(t);this.dTbsRequest=i}},oe.lang.extend(an.asn1.ocsp.OCSPRequest,an.asn1.ASN1Object),an.asn1.ocsp.OCSPUtil={},an.asn1.ocsp.OCSPUtil.getRequestHex=function(t,e,n){var r=an.asn1.ocsp;void 0===n&&(n=r.DEFAULT_HASH);var i={alg:n,issuerCert:t,subjectCert:e};return new r.OCSPRequest({reqList:[i]}).getEncodedHex()},an.asn1.ocsp.OCSPUtil.getOCSPResponseInfo=function(t){var e=cn,n=e.getVbyList,r=e.getIdxbyList,i=(n=e.getVbyList,e.getV),s={};try{var o=n(t,0,[0],"0a");s.responseStatus=parseInt(o,16)}catch(t){}if(0!==s.responseStatus)return s;try{var a=r(t,0,[1,0,1,0,0,2,0,1]);"80"===t.substr(a,2)?s.certStatus="good":"a1"===t.substr(a,2)?(s.certStatus="revoked",s.revocationTime=mn(n(t,a,[0]))):"82"===t.substr(a,2)&&(s.certStatus="unknown")}catch(t){}try{var h=r(t,0,[1,0,1,0,0,2,0,2]);s.thisUpdate=mn(i(t,h))}catch(t){}try{var u=r(t,0,[1,0,1,0,0,2,0,3]);"a0"===t.substr(u,2)&&(s.nextUpdate=mn(n(t,u,[0])))}catch(t){}return s},void 0!==an&&an||(an={}),void 0!==an.lang&&an.lang||(an.lang={}),an.lang.String=function(){},hn=function(t){return dn(new bt(t,"utf8").toString("base64"))},un=function(t){return new bt(pn(t),"base64").toString("utf8")},an.lang.String.isInteger=function(t){return!!t.match(/^[0-9]+$/)||!!t.match(/^-[0-9]+$/)},an.lang.String.isHex=function(t){return!(t.length%2!=0||!t.match(/^[0-9a-f]+$/)&&!t.match(/^[0-9A-F]+$/))},an.lang.String.isBase64=function(t){return!(!(t=t.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||t.length%4!=0)},an.lang.String.isBase64URL=function(t){return!t.match(/[+/=]/)&&(t=pn(t),an.lang.String.isBase64(t))},an.lang.String.isIntegerArray=function(t){return!!(t=t.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},void 0!==an&&an||(an={}),void 0!==an.crypto&&an.crypto||(an.crypto={}),an.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:fe.algo.MD5,sha1:fe.algo.SHA1,sha224:fe.algo.SHA224,sha256:fe.algo.SHA256,sha384:fe.algo.SHA384,sha512:fe.algo.SHA512,ripemd160:fe.algo.RIPEMD160},this.getDigestInfoHex=function(t,e){if(void 0===this.DIGESTINFOHEAD[e])throw"alg not supported in Util.DIGESTINFOHEAD: "+e;return this.DIGESTINFOHEAD[e]+t},this.getPaddedDigestInfoHex=function(t,e,n){var r=this.getDigestInfoHex(t,e),i=n/4;if(r.length+22>i)throw"key is too short for SigAlg: keylen="+n+","+e;for(var s="0001",o="00"+r,a="",h=i-s.length-o.length,u=0;u<h;u+=2)a+="ff";return s+a+o},this.hashString=function(t,e){return new an.crypto.MessageDigest({alg:e}).digestString(t)},this.hashHex=function(t,e){return new an.crypto.MessageDigest({alg:e}).digestHex(t)},this.sha1=function(t){return new an.crypto.MessageDigest({alg:"sha1",prov:"cryptojs"}).digestString(t)},this.sha256=function(t){return new an.crypto.MessageDigest({alg:"sha256",prov:"cryptojs"}).digestString(t)},this.sha256Hex=function(t){return new an.crypto.MessageDigest({alg:"sha256",prov:"cryptojs"}).digestHex(t)},this.sha512=function(t){return new an.crypto.MessageDigest({alg:"sha512",prov:"cryptojs"}).digestString(t)},this.sha512Hex=function(t){return new an.crypto.MessageDigest({alg:"sha512",prov:"cryptojs"}).digestHex(t)}},an.crypto.Util.md5=function(t){return new an.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(t)},an.crypto.Util.ripemd160=function(t){return new an.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(t)},an.crypto.Util.SECURERANDOMGEN=new Xe,an.crypto.Util.getRandomHexOfNbytes=function(t){var e=new Array(t);return an.crypto.Util.SECURERANDOMGEN.nextBytes(e),fn(e)},an.crypto.Util.getRandomBigIntegerOfNbytes=function(t){return new ve(an.crypto.Util.getRandomHexOfNbytes(t),16)},an.crypto.Util.getRandomHexOfNbits=function(t){var e=t%8,n=new Array((t-e)/8+1);return an.crypto.Util.SECURERANDOMGEN.nextBytes(n),n[0]=(255<<e&255^255)&n[0],fn(n)},an.crypto.Util.getRandomBigIntegerOfNbits=function(t){return new ve(an.crypto.Util.getRandomHexOfNbits(t),16)},an.crypto.Util.getRandomBigIntegerZeroToMax=function(t){for(var e=t.bitLength();;){var n=an.crypto.Util.getRandomBigIntegerOfNbits(e);if(-1!=t.compareTo(n))return n}},an.crypto.Util.getRandomBigIntegerMinToMax=function(t,e){var n=t.compareTo(e);if(1==n)throw"biMin is greater than biMax";if(0==n)return t;var r=e.subtract(t);return an.crypto.Util.getRandomBigIntegerZeroToMax(r).add(t)},an.crypto.MessageDigest=function(t){this.setAlgAndProvider=function(t,e){if(null!==(t=an.crypto.MessageDigest.getCanonicalAlgName(t))&&void 0===e&&(e=an.crypto.Util.DEFAULTPROVIDER[t]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(t)&&"cryptojs"==e){try{this.md=an.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[t].create()}catch(e){throw"setAlgAndProvider hash alg set fail alg="+t+"/"+e}this.updateString=function(t){this.md.update(t)},this.updateHex=function(t){var e=fe.enc.Hex.parse(t);this.md.update(e)},this.digest=function(){return this.md.finalize().toString(fe.enc.Hex)},this.digestString=function(t){return this.updateString(t),this.digest()},this.digestHex=function(t){return this.updateHex(t),this.digest()}}if(-1!=":sha256:".indexOf(t)&&"sjcl"==e){try{this.md=new sjcl.hash.sha256}catch(e){throw"setAlgAndProvider hash alg set fail alg="+t+"/"+e}this.updateString=function(t){this.md.update(t)},this.updateHex=function(t){var e=sjcl.codec.hex.toBits(t);this.md.update(e)},this.digest=function(){var t=this.md.finalize();return sjcl.codec.hex.fromBits(t)},this.digestString=function(t){return this.updateString(t),this.digest()},this.digestHex=function(t){return this.updateHex(t),this.digest()}}},this.updateString=function(t){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(t){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(t){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(t){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==t&&void 0!==t.alg&&(this.algName=t.alg,void 0===t.prov&&(this.provName=an.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},an.crypto.MessageDigest.getCanonicalAlgName=function(t){return"string"==typeof t&&(t=(t=t.toLowerCase()).replace(/-/,"")),t},an.crypto.MessageDigest.getHashLength=function(t){var e=an.crypto.MessageDigest,n=e.getCanonicalAlgName(t);if(void 0===e.HASHLENGTH[n])throw"not supported algorithm: "+t;return e.HASHLENGTH[n]},an.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},an.crypto.Mac=function(t){this.setAlgAndProvider=function(t,e){if(null==(t=t.toLowerCase())&&(t="hmacsha1"),"hmac"!=(t=t.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+t;void 0===e&&(e=an.crypto.Util.DEFAULTPROVIDER[t]),this.algProv=t+"/"+e;var n=t.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(n)&&"cryptojs"==e){try{var r=an.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[n];this.mac=fe.algo.HMAC.create(r,this.pass)}catch(t){throw"setAlgAndProvider hash alg set fail hashAlg="+n+"/"+t}this.updateString=function(t){this.mac.update(t)},this.updateHex=function(t){var e=fe.enc.Hex.parse(t);this.mac.update(e)},this.doFinal=function(){return this.mac.finalize().toString(fe.enc.Hex)},this.doFinalString=function(t){return this.updateString(t),this.doFinal()},this.doFinalHex=function(t){return this.updateHex(t),this.doFinal()}}},this.updateString=function(t){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(t){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(t){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(t){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(t){if("string"==typeof t){var e=t;return t.length%2!=1&&t.match(/^[0-9A-Fa-f]+$/)||(e=Sn(t)),void(this.pass=fe.enc.Hex.parse(e))}if("object"!=typeof t)throw"KJUR.crypto.Mac unsupported password type: "+t;e=null;if(void 0!==t.hex){if(t.hex.length%2!=0||!t.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+t.hex;e=t.hex}if(void 0!==t.utf8&&(e=vn(t.utf8)),void 0!==t.rstr&&(e=Sn(t.rstr)),void 0!==t.b64&&(e=ye(t.b64)),void 0!==t.b64u&&(e=yn(t.b64u)),null==e)throw"KJUR.crypto.Mac unsupported password type: "+t;this.pass=fe.enc.Hex.parse(e)},void 0!==t&&(void 0!==t.pass&&this.setPassword(t.pass),void 0!==t.alg&&(this.algName=t.alg,void 0===t.prov&&(this.provName=an.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},an.crypto.Signature=function(t){var e=null;if(this._setAlgNames=function(){var t=this.algName.match(/^(.+)with(.+)$/);t&&(this.mdAlgName=t[1].toLowerCase(),this.pubkeyAlgName=t[2].toLowerCase())},this._zeroPaddingOfSignature=function(t,e){for(var n="",r=e/4-t.length,i=0;i<r;i++)n+="0";return n+t},this.setAlgAndProvider=function(t,e){if(this._setAlgNames(),"cryptojs/jsrsa"!=e)throw"provider not supported: "+e;if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)){try{this.md=new an.crypto.MessageDigest({alg:this.mdAlgName})}catch(t){throw"setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+t}this.init=function(t,e){var n=null;try{n=void 0===e?Dn.getKey(t):Dn.getKey(t,e)}catch(t){throw"init failed:"+t}if(!0===n.isPrivate)this.prvKey=n,this.state="SIGN";else{if(!0!==n.isPublic)throw"init failed.:"+n;this.pubKey=n,this.state="VERIFY"}},this.updateString=function(t){this.md.updateString(t)},this.updateHex=function(t){this.md.updateHex(t)},this.sign=function(){if(this.sHashHex=this.md.digest(),void 0!==this.ecprvhex&&void 0!==this.eccurvename){var t=new an.crypto.ECDSA({curve:this.eccurvename});this.hSign=t.signHex(this.sHashHex,this.ecprvhex)}else if(this.prvKey instanceof tn&&"rsaandmgf1"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof tn&&"rsa"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof an.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof an.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(t){return this.updateString(t),this.sign()},this.signHex=function(t){return this.updateHex(t),this.sign()},this.verify=function(t){if(this.sHashHex=this.md.digest(),void 0!==this.ecpubhex&&void 0!==this.eccurvename)return new an.crypto.ECDSA({curve:this.eccurvename}).verifyHex(this.sHashHex,t,this.ecpubhex);if(this.pubKey instanceof tn&&"rsaandmgf1"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,t,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof tn&&"rsa"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);if(void 0!==an.crypto.ECDSA&&this.pubKey instanceof an.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);if(void 0!==an.crypto.DSA&&this.pubKey instanceof an.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(t,e){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(t){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(t){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(t){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(t){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(t){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=t,void 0!==t&&(void 0!==t.alg&&(this.algName=t.alg,void 0===t.prov?this.provName=an.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=t.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==t.psssaltlen&&(this.pssSaltLen=t.psssaltlen),void 0!==t.prvkeypem)){if(void 0!==t.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{e=Dn.getKey(t.prvkeypem);this.init(e)}catch(t){throw"fatal error to load pem private key: "+t}}},an.crypto.Cipher=function(t){},an.crypto.Cipher.encrypt=function(t,e,n){if(e instanceof tn&&e.isPublic){var r=an.crypto.Cipher.getAlgByKeyAndName(e,n);if("RSA"===r)return e.encrypt(t);if("RSAOAEP"===r)return e.encryptOAEP(t,"sha1");var i=r.match(/^RSAOAEP(\d+)$/);if(null!==i)return e.encryptOAEP(t,"sha"+i[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+n}throw"Cipher.encrypt: unsupported key or algorithm"},an.crypto.Cipher.decrypt=function(t,e,n){if(e instanceof tn&&e.isPrivate){var r=an.crypto.Cipher.getAlgByKeyAndName(e,n);if("RSA"===r)return e.decrypt(t);if("RSAOAEP"===r)return e.decryptOAEP(t,"sha1");var i=r.match(/^RSAOAEP(\d+)$/);if(null!==i)return e.decryptOAEP(t,"sha"+i[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+n}throw"Cipher.decrypt: unsupported key or algorithm"},an.crypto.Cipher.getAlgByKeyAndName=function(t,e){if(t instanceof tn){if(-1!=":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(e))return e;if(null===e||void 0===e)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+e}throw"getAlgByKeyAndName: not supported algorithm name: "+e},an.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},void 0!==an&&an||(an={}),void 0!==an.crypto&&an.crypto||(an.crypto={}),an.crypto.ECDSA=function(t){var e=new Xe;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(t){return new ve(t.bitLength(),e).mod(t.subtract(ve.ONE)).add(ve.ONE)},this.setNamedCurve=function(t){this.ecparams=an.crypto.ECParameterDB.getByName(t),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=t},this.setPrivateKeyHex=function(t){this.isPrivate=!0,this.prvKeyHex=t},this.setPublicKeyHex=function(t){this.isPublic=!0,this.pubKeyHex=t},this.getPublicKeyXYHex=function(){var t=this.pubKeyHex;if("04"!==t.substr(0,2))throw"this method supports uncompressed format(04) only";var e=this.ecparams.keylen/4;if(t.length!==2+2*e)throw"malformed public key hex length";var n={};return n.x=t.substr(2,e),n.y=t.substr(2+e),n},this.getShortNISTPCurveName=function(){var t=this.curveName;return"secp256r1"===t||"NIST P-256"===t||"P-256"===t||"prime256v1"===t?"P-256":"secp384r1"===t||"NIST P-384"===t||"P-384"===t?"P-384":null},this.generateKeyPairHex=function(){var t=this.ecparams.n,e=this.getBigRandom(t),n=this.ecparams.G.multiply(e),r=n.getX().toBigInteger(),i=n.getY().toBigInteger(),s=this.ecparams.keylen/4,o=("0000000000"+e.toString(16)).slice(-s),a="04"+("0000000000"+r.toString(16)).slice(-s)+("0000000000"+i.toString(16)).slice(-s);return this.setPrivateKeyHex(o),this.setPublicKeyHex(a),{ecprvhex:o,ecpubhex:a}},this.signWithMessageHash=function(t){return this.signHex(t,this.prvKeyHex)},this.signHex=function(t,e){var n=new ve(e,16),r=this.ecparams.n,i=new ve(t,16);do{var s=this.getBigRandom(r),o=this.ecparams.G.multiply(s).getX().toBigInteger().mod(r)}while(o.compareTo(ve.ZERO)<=0);var a=s.modInverse(r).multiply(i.add(n.multiply(o))).mod(r);return an.crypto.ECDSA.biRSSigToASN1Sig(o,a)},this.sign=function(t,e){var n=e,r=this.ecparams.n,i=ve.fromByteArrayUnsigned(t);do{var s=this.getBigRandom(r),o=this.ecparams.G.multiply(s).getX().toBigInteger().mod(r)}while(o.compareTo(ve.ZERO)<=0);var a=s.modInverse(r).multiply(i.add(n.multiply(o))).mod(r);return this.serializeSig(o,a)},this.verifyWithMessageHash=function(t,e){return this.verifyHex(t,e,this.pubKeyHex)},this.verifyHex=function(t,e,n){var r,i,s,o=an.crypto.ECDSA.parseSigHex(e);r=o.r,i=o.s,s=rn.decodeFromHex(this.ecparams.curve,n);var a=new ve(t,16);return this.verifyRaw(a,r,i,s)},this.verify=function(t,e,n){var r,i,s;if(Bitcoin.Util.isArray(e)){var o=this.parseSig(e);r=o.r,i=o.s}else{if("object"!=typeof e||!e.r||!e.s)throw"Invalid value for signature";r=e.r,i=e.s}if(n instanceof rn)s=n;else{if(!Bitcoin.Util.isArray(n))throw"Invalid format for pubkey value, must be byte array or ECPointFp";s=rn.decodeFrom(this.ecparams.curve,n)}var a=ve.fromByteArrayUnsigned(t);return this.verifyRaw(a,r,i,s)},this.verifyRaw=function(t,e,n,r){var i=this.ecparams.n,s=this.ecparams.G;if(e.compareTo(ve.ONE)<0||e.compareTo(i)>=0)return!1;if(n.compareTo(ve.ONE)<0||n.compareTo(i)>=0)return!1;var o=n.modInverse(i),a=t.multiply(o).mod(i),h=e.multiply(o).mod(i);return s.multiply(a).add(r.multiply(h)).getX().toBigInteger().mod(i).equals(e)},this.serializeSig=function(t,e){var n=t.toByteArraySigned(),r=e.toByteArraySigned(),i=[];return i.push(2),i.push(n.length),(i=i.concat(n)).push(2),i.push(r.length),(i=i.concat(r)).unshift(i.length),i.unshift(48),i},this.parseSig=function(t){var e;if(48!=t[0])throw new Error("Signature not a valid DERSequence");if(2!=t[e=2])throw new Error("First element in signature must be a DERInteger");var n=t.slice(e+2,e+2+t[e+1]);if(2!=t[e+=2+t[e+1]])throw new Error("Second element in signature must be a DERInteger");var r=t.slice(e+2,e+2+t[e+1]);return e+=2+t[e+1],{r:ve.fromByteArrayUnsigned(n),s:ve.fromByteArrayUnsigned(r)}},this.parseSigCompact=function(t){if(65!==t.length)throw"Signature has the wrong length";var e=t[0]-27;if(e<0||e>7)throw"Invalid signature type";var n=this.ecparams.n;return{r:ve.fromByteArrayUnsigned(t.slice(1,33)).mod(n),s:ve.fromByteArrayUnsigned(t.slice(33,65)).mod(n),i:e}},this.readPKCS5PrvKeyHex=function(t){var e,n,r,i=cn,s=an.crypto.ECDSA.getName,o=i.getVbyList;if(!1===i.isASN1HEX(t))throw"not ASN.1 hex string";try{e=o(t,0,[2,0],"06"),n=o(t,0,[1],"04");try{r=o(t,0,[3,0],"03").substr(2)}catch(t){}}catch(t){throw"malformed PKCS#1/5 plain ECC private key"}if(this.curveName=s(e),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(r),this.setPrivateKeyHex(n),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(t){var e,n,r,i=cn,s=an.crypto.ECDSA.getName,o=i.getVbyList;if(!1===i.isASN1HEX(t))throw"not ASN.1 hex string";try{o(t,0,[1,0],"06"),e=o(t,0,[1,1],"06"),n=o(t,0,[2,0,1],"04");try{r=o(t,0,[2,0,2,0],"03").substr(2)}catch(t){}}catch(t){throw"malformed PKCS#8 plain ECC private key"}if(this.curveName=s(e),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(r),this.setPrivateKeyHex(n),this.isPublic=!1},this.readPKCS8PubKeyHex=function(t){var e,n,r=cn,i=an.crypto.ECDSA.getName,s=r.getVbyList;if(!1===r.isASN1HEX(t))throw"not ASN.1 hex string";try{s(t,0,[0,0],"06"),e=s(t,0,[0,1],"06"),n=s(t,0,[1],"03").substr(2)}catch(t){throw"malformed PKCS#8 ECC public key"}if(this.curveName=i(e),null===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(n)},this.readCertPubKeyHex=function(t,e){5!==e&&(e=6);var n,r,i=cn,s=an.crypto.ECDSA.getName,o=i.getVbyList;if(!1===i.isASN1HEX(t))throw"not ASN.1 hex string";try{n=o(t,0,[0,e,0,1],"06"),r=o(t,0,[0,e,1],"03").substr(2)}catch(t){throw"malformed X.509 certificate ECC public key"}if(this.curveName=s(n),null===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(r)},void 0!==t&&void 0!==t.curve&&(this.curveName=t.curve),void 0===this.curveName&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),void 0!==t&&(void 0!==t.prv&&this.setPrivateKeyHex(t.prv),void 0!==t.pub&&this.setPublicKeyHex(t.pub))},an.crypto.ECDSA.parseSigHex=function(t){var e=an.crypto.ECDSA.parseSigHexInHexRS(t);return{r:new ve(e.r,16),s:new ve(e.s,16)}},an.crypto.ECDSA.parseSigHexInHexRS=function(t){var e=cn,n=e.getChildIdx,r=e.getV;if("30"!=t.substr(0,2))throw"signature is not a ASN.1 sequence";var i=n(t,0);if(2!=i.length)throw"number of signature ASN.1 sequence elements seem wrong";var s=i[0],o=i[1];if("02"!=t.substr(s,2))throw"1st item of sequene of signature is not ASN.1 integer";if("02"!=t.substr(o,2))throw"2nd item of sequene of signature is not ASN.1 integer";return{r:r(t,s),s:r(t,o)}},an.crypto.ECDSA.asn1SigToConcatSig=function(t){var e=an.crypto.ECDSA.parseSigHexInHexRS(t),n=e.r,r=e.s;if("00"==n.substr(0,2)&&n.length/2*8%128==8&&(n=n.substr(2)),"00"==r.substr(0,2)&&r.length/2*8%128==8&&(r=r.substr(2)),n.length/2*8%128!=0)throw"unknown ECDSA sig r length error";if(r.length/2*8%128!=0)throw"unknown ECDSA sig s length error";return n+r},an.crypto.ECDSA.concatSigToASN1Sig=function(t){if(t.length/2*8%128!=0)throw"unknown ECDSA concatinated r-s sig  length error";var e=t.substr(0,t.length/2),n=t.substr(t.length/2);return an.crypto.ECDSA.hexRSSigToASN1Sig(e,n)},an.crypto.ECDSA.hexRSSigToASN1Sig=function(t,e){var n=new ve(t,16),r=new ve(e,16);return an.crypto.ECDSA.biRSSigToASN1Sig(n,r)},an.crypto.ECDSA.biRSSigToASN1Sig=function(t,e){var n=an.asn1,r=new n.DERInteger({bigint:t}),i=new n.DERInteger({bigint:e});return new n.DERSequence({array:[r,i]}).getEncodedHex()},an.crypto.ECDSA.getName=function(t){return"2a8648ce3d030107"===t?"secp256r1":"2b8104000a"===t?"secp256k1":"2b81040022"===t?"secp384r1":-1!=="|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(t)?"secp256r1":-1!=="|secp256k1|".indexOf(t)?"secp256k1":-1!=="|secp384r1|NIST P-384|P-384|".indexOf(t)?"secp384r1":null},void 0!==an&&an||(an={}),void 0!==an.crypto&&an.crypto||(an.crypto={}),an.crypto.ECParameterDB=new function(){var t={},e={};function n(t){return new ve(t,16)}this.getByName=function(n){var r=n;if(void 0!==e[r]&&(r=e[n]),void 0!==t[r])return t[r];throw"unregistered EC curve name: "+r},this.regist=function(r,i,s,o,a,h,u,c,f,l,d,p){t[r]={};var g=n(s),y=n(o),v=n(a),m=n(h),b=n(u),S=new sn(g,y,v),w=S.decodePointHex("04"+c+f);t[r].name=r,t[r].keylen=i,t[r].curve=S,t[r].G=w,t[r].n=m,t[r].h=b,t[r].oid=d,t[r].info=p;for(var x=0;x<l.length;x++)e[l[x]]=r}},an.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),an.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),an.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),an.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),an.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),an.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),an.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),an.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),an.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),an.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]),void 0!==an&&an||(an={}),void 0!==an.crypto&&an.crypto||(an.crypto={}),an.crypto.DSA=function(){this.p=null,this.q=null,this.g=null,this.y=null,this.x=null,this.type="DSA",this.isPrivate=!1,this.isPublic=!1,this.setPrivate=function(t,e,n,r,i){this.isPrivate=!0,this.p=t,this.q=e,this.g=n,this.y=r,this.x=i},this.setPrivateHex=function(t,e,n,r,i){var s,o,a,h,u;s=new ve(t,16),o=new ve(e,16),a=new ve(n,16),h="string"==typeof r&&r.length>1?new ve(r,16):null,u=new ve(i,16),this.setPrivate(s,o,a,h,u)},this.setPublic=function(t,e,n,r){this.isPublic=!0,this.p=t,this.q=e,this.g=n,this.y=r,this.x=null},this.setPublicHex=function(t,e,n,r){var i,s,o,a;i=new ve(t,16),s=new ve(e,16),o=new ve(n,16),a=new ve(r,16),this.setPublic(i,s,o,a)},this.signWithMessageHash=function(t){var e=this.p,n=this.q,r=this.g,i=(this.y,this.x),s=an.crypto.Util.getRandomBigIntegerMinToMax(ve.ONE.add(ve.ONE),n.subtract(ve.ONE)),o=new ve(t.substr(0,n.bitLength()/4),16),a=r.modPow(s,e).mod(n),h=s.modInverse(n).multiply(o.add(i.multiply(a))).mod(n);return an.asn1.ASN1Util.jsonToASN1HEX({seq:[{int:{bigint:a}},{int:{bigint:h}}]})},this.verifyWithMessageHash=function(t,e){var n=this.p,r=this.q,i=this.g,s=this.y,o=this.parseASN1Signature(e),a=o[0],h=o[1],u=new ve(t.substr(0,r.bitLength()/4),16);if(ve.ZERO.compareTo(a)>0||a.compareTo(r)>0)throw"invalid DSA signature";if(ve.ZERO.compareTo(h)>=0||h.compareTo(r)>0)throw"invalid DSA signature";var c=h.modInverse(r),f=u.multiply(c).mod(r),l=a.multiply(c).mod(r);return 0==i.modPow(f,n).multiply(s.modPow(l,n)).mod(n).mod(r).compareTo(a)},this.parseASN1Signature=function(t){try{return[new ve(cn.getVbyList(t,0,[0],"02"),16),new ve(cn.getVbyList(t,0,[1],"02"),16)]}catch(t){throw"malformed ASN.1 DSA signature"}},this.readPKCS5PrvKeyHex=function(t){var e,n,r,i,s,o=cn,a=o.getVbyList;if(!1===o.isASN1HEX(t))throw"not ASN.1 hex string";try{e=a(t,0,[1],"02"),n=a(t,0,[2],"02"),r=a(t,0,[3],"02"),i=a(t,0,[4],"02"),s=a(t,0,[5],"02")}catch(t){throw console.log("EXCEPTION:"+t),"malformed PKCS#1/5 plain DSA private key"}this.setPrivateHex(e,n,r,i,s)},this.readPKCS8PrvKeyHex=function(t){var e,n,r,i,s=cn,o=s.getVbyList;if(!1===s.isASN1HEX(t))throw"not ASN.1 hex string";try{e=o(t,0,[1,1,0],"02"),n=o(t,0,[1,1,1],"02"),r=o(t,0,[1,1,2],"02"),i=o(t,0,[2,0],"02")}catch(t){throw console.log("EXCEPTION:"+t),"malformed PKCS#8 plain DSA private key"}this.setPrivateHex(e,n,r,null,i)},this.readPKCS8PubKeyHex=function(t){var e,n,r,i,s=cn,o=s.getVbyList;if(!1===s.isASN1HEX(t))throw"not ASN.1 hex string";try{e=o(t,0,[0,1,0],"02"),n=o(t,0,[0,1,1],"02"),r=o(t,0,[0,1,2],"02"),i=o(t,0,[1,0],"02")}catch(t){throw console.log("EXCEPTION:"+t),"malformed PKCS#8 DSA public key"}this.setPublicHex(e,n,r,i)},this.readCertPubKeyHex=function(t,e){var n,r,i,s;5!==e&&(e=6);var o=cn,a=o.getVbyList;if(!1===o.isASN1HEX(t))throw"not ASN.1 hex string";try{n=a(t,0,[0,e,0,1,0],"02"),r=a(t,0,[0,e,0,1,1],"02"),i=a(t,0,[0,e,0,1,2],"02"),s=a(t,0,[0,e,1,0],"02")}catch(t){throw console.log("EXCEPTION:"+t),"malformed X.509 certificate DSA public key"}this.setPublicHex(n,r,i,s)}};var Dn=function(){var t=function(t,n,r){return e(fe.AES,t,n,r)},e=function(t,e,n,r){var i=fe.enc.Hex.parse(e),s=fe.enc.Hex.parse(n),o=fe.enc.Hex.parse(r),a={};a.key=s,a.iv=o,a.ciphertext=i;var h=t.decrypt(a,s,{iv:o});return fe.enc.Hex.stringify(h)},n=function(t,e,n){return r(fe.AES,t,e,n)},r=function(t,e,n,r){var i=fe.enc.Hex.parse(e),s=fe.enc.Hex.parse(n),o=fe.enc.Hex.parse(r),a=t.encrypt(i,s,{iv:o}),h=fe.enc.Hex.parse(a.toString());return fe.enc.Base64.stringify(h)},i={"AES-256-CBC":{proc:t,eproc:n,keylen:32,ivlen:16},"AES-192-CBC":{proc:t,eproc:n,keylen:24,ivlen:16},"AES-128-CBC":{proc:t,eproc:n,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(t,n,r){return e(fe.TripleDES,t,n,r)},eproc:function(t,e,n){return r(fe.TripleDES,t,e,n)},keylen:24,ivlen:8},"DES-CBC":{proc:function(t,n,r){return e(fe.DES,t,n,r)},eproc:function(t,e,n){return r(fe.DES,t,e,n)},keylen:8,ivlen:8}},s=function(t){var e={},n=t.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));n&&(e.cipher=n[1],e.ivsalt=n[2]);var r=t.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));r&&(e.type=r[1]);var i=-1,s=0;-1!=t.indexOf("\r\n\r\n")&&(i=t.indexOf("\r\n\r\n"),s=2),-1!=t.indexOf("\n\n")&&(i=t.indexOf("\n\n"),s=1);var o=t.indexOf("-----END");if(-1!=i&&-1!=o){var a=t.substring(i+2*s,o-s);a=a.replace(/\s+/g,""),e.data=a}return e},o=function(t,e,n){for(var r=n.substring(0,16),s=fe.enc.Hex.parse(r),o=fe.enc.Utf8.parse(e),a=i[t].keylen+i[t].ivlen,h="",u=null;;){var c=fe.algo.MD5.create();if(null!=u&&c.update(u),c.update(o),c.update(s),u=c.finalize(),(h+=fe.enc.Hex.stringify(u)).length>=2*a)break}var f={};return f.keyhex=h.substr(0,2*i[t].keylen),f.ivhex=h.substr(2*i[t].keylen,2*i[t].ivlen),f},a=function(t,e,n,r){var s=fe.enc.Base64.parse(t),o=fe.enc.Hex.stringify(s);return(0,i[e].proc)(o,n,r)};return{version:"1.0.0",parsePKCS5PEM:function(t){return s(t)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(t,e,n){return o(t,e,n)},decryptKeyB64:function(t,e,n,r){return a(t,e,n,r)},getDecryptedKeyHex:function(t,e){var n=s(t),r=n.cipher,i=n.ivsalt,h=n.data,u=o(r,e,i).keyhex;return a(h,r,u,i)},getEncryptedPKCS5PEMFromPrvKeyHex:function(t,e,n,r,s){var a="";if(void 0!==r&&null!=r||(r="AES-256-CBC"),void 0===i[r])throw"KEYUTIL unsupported algorithm: "+r;void 0!==s&&null!=s||(s=function(t){var e=fe.lib.WordArray.random(t);return fe.enc.Hex.stringify(e)}(i[r].ivlen).toUpperCase());var h=function(t,e,n,r){return(0,i[e].eproc)(t,n,r)}(e,r,o(r,n,s).keyhex,s);a="-----BEGIN "+t+" PRIVATE KEY-----\r\n";return a+="Proc-Type: 4,ENCRYPTED\r\n",a+="DEK-Info: "+r+","+s+"\r\n",a+="\r\n",a+=h.replace(/(.{64})/g,"$1\r\n"),a+="\r\n-----END "+t+" PRIVATE KEY-----\r\n"},parseHexOfEncryptedPKCS8:function(t){var e=cn,n=e.getChildIdx,r=e.getV,i={},s=n(t,0);if(2!=s.length)throw"malformed format: SEQUENCE(0).items != 2: "+s.length;i.ciphertext=r(t,s[1]);var o=n(t,s[0]);if(2!=o.length)throw"malformed format: SEQUENCE(0.0).items != 2: "+o.length;if("2a864886f70d01050d"!=r(t,o[0]))throw"this only supports pkcs5PBES2";var a=n(t,o[1]);if(2!=o.length)throw"malformed format: SEQUENCE(0.0.1).items != 2: "+a.length;var h=n(t,a[1]);if(2!=h.length)throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+h.length;if("2a864886f70d0307"!=r(t,h[0]))throw"this only supports TripleDES";i.encryptionSchemeAlg="TripleDES",i.encryptionSchemeIV=r(t,h[1]);var u=n(t,a[0]);if(2!=u.length)throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+u.length;if("2a864886f70d01050c"!=r(t,u[0]))throw"this only supports pkcs5PBKDF2";var c=n(t,u[1]);if(c.length<2)throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+c.length;i.pbkdf2Salt=r(t,c[0]);var f=r(t,c[1]);try{i.pbkdf2Iter=parseInt(f,16)}catch(t){throw"malformed format pbkdf2Iter: "+f}return i},getPBKDF2KeyHexFromParam:function(t,e){var n=fe.enc.Hex.parse(t.pbkdf2Salt),r=t.pbkdf2Iter,i=fe.PBKDF2(e,n,{keySize:6,iterations:r});return fe.enc.Hex.stringify(i)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(t,e){var n=kn(t,"ENCRYPTED PRIVATE KEY"),r=this.parseHexOfEncryptedPKCS8(n),i=Dn.getPBKDF2KeyHexFromParam(r,e),s={};s.ciphertext=fe.enc.Hex.parse(r.ciphertext);var o=fe.enc.Hex.parse(i),a=fe.enc.Hex.parse(r.encryptionSchemeIV),h=fe.TripleDES.decrypt(s,o,{iv:a});return fe.enc.Hex.stringify(h)},getKeyFromEncryptedPKCS8PEM:function(t,e){var n=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(t,e);return this.getKeyFromPlainPrivatePKCS8Hex(n)},parsePlainPrivatePKCS8Hex:function(t){var e=cn,n=e.getChildIdx,r=e.getV,i={algparam:null};if("30"!=t.substr(0,2))throw"malformed plain PKCS8 private key(code:001)";var s=n(t,0);if(3!=s.length)throw"malformed plain PKCS8 private key(code:002)";if("30"!=t.substr(s[1],2))throw"malformed PKCS8 private key(code:003)";var o=n(t,s[1]);if(2!=o.length)throw"malformed PKCS8 private key(code:004)";if("06"!=t.substr(o[0],2))throw"malformed PKCS8 private key(code:005)";if(i.algoid=r(t,o[0]),"06"==t.substr(o[1],2)&&(i.algparam=r(t,o[1])),"04"!=t.substr(s[2],2))throw"malformed PKCS8 private key(code:006)";return i.keyidx=e.getVidx(t,s[2]),i},getKeyFromPlainPrivatePKCS8PEM:function(t){var e=kn(t,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(e)},getKeyFromPlainPrivatePKCS8Hex:function(t){var e,n=this.parsePlainPrivatePKCS8Hex(t);if("2a864886f70d010101"==n.algoid)e=new tn;else if("2a8648ce380401"==n.algoid)e=new an.crypto.DSA;else{if("2a8648ce3d0201"!=n.algoid)throw"unsupported private key algorithm";e=new an.crypto.ECDSA}return e.readPKCS8PrvKeyHex(t),e},_getKeyFromPublicPKCS8Hex:function(t){var e,n=cn.getVbyList(t,0,[0,0],"06");if("2a864886f70d010101"===n)e=new tn;else if("2a8648ce380401"===n)e=new an.crypto.DSA;else{if("2a8648ce3d0201"!==n)throw"unsupported PKCS#8 public key hex";e=new an.crypto.ECDSA}return e.readPKCS8PubKeyHex(t),e},parsePublicRawRSAKeyHex:function(t){var e=cn,n=e.getChildIdx,r=e.getV,i={};if("30"!=t.substr(0,2))throw"malformed RSA key(code:001)";var s=n(t,0);if(2!=s.length)throw"malformed RSA key(code:002)";if("02"!=t.substr(s[0],2))throw"malformed RSA key(code:003)";if(i.n=r(t,s[0]),"02"!=t.substr(s[1],2))throw"malformed RSA key(code:004)";return i.e=r(t,s[1]),i},parsePublicPKCS8Hex:function(t){var e=cn,n=e.getChildIdx,r=e.getV,i={algparam:null},s=n(t,0);if(2!=s.length)throw"outer DERSequence shall have 2 elements: "+s.length;var o=s[0];if("30"!=t.substr(o,2))throw"malformed PKCS8 public key(code:001)";var a=n(t,o);if(2!=a.length)throw"malformed PKCS8 public key(code:002)";if("06"!=t.substr(a[0],2))throw"malformed PKCS8 public key(code:003)";if(i.algoid=r(t,a[0]),"06"==t.substr(a[1],2)?i.algparam=r(t,a[1]):"30"==t.substr(a[1],2)&&(i.algparam={},i.algparam.p=e.getVbyList(t,a[1],[0],"02"),i.algparam.q=e.getVbyList(t,a[1],[1],"02"),i.algparam.g=e.getVbyList(t,a[1],[2],"02")),"03"!=t.substr(s[1],2))throw"malformed PKCS8 public key(code:004)";return i.key=r(t,s[1]).substr(2),i}}}();Dn.getKey=function(t,e,n){var r=(y=cn).getChildIdx,i=(y.getV,y.getVbyList),s=an.crypto,o=s.ECDSA,a=s.DSA,h=tn,u=kn,c=Dn;if(void 0!==h&&t instanceof h)return t;if(void 0!==o&&t instanceof o)return t;if(void 0!==a&&t instanceof a)return t;if(void 0!==t.curve&&void 0!==t.xy&&void 0===t.d)return new o({pub:t.xy,curve:t.curve});if(void 0!==t.curve&&void 0!==t.d)return new o({prv:t.d,curve:t.curve});if(void 0===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0===t.d)return(C=new h).setPublic(t.n,t.e),C;if(void 0===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d&&void 0!==t.p&&void 0!==t.q&&void 0!==t.dp&&void 0!==t.dq&&void 0!==t.co&&void 0===t.qi)return(C=new h).setPrivateEx(t.n,t.e,t.d,t.p,t.q,t.dp,t.dq,t.co),C;if(void 0===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d&&void 0===t.p)return(C=new h).setPrivate(t.n,t.e,t.d),C;if(void 0!==t.p&&void 0!==t.q&&void 0!==t.g&&void 0!==t.y&&void 0===t.x)return(C=new a).setPublic(t.p,t.q,t.g,t.y),C;if(void 0!==t.p&&void 0!==t.q&&void 0!==t.g&&void 0!==t.y&&void 0!==t.x)return(C=new a).setPrivate(t.p,t.q,t.g,t.y,t.x),C;if("RSA"===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0===t.d)return(C=new h).setPublic(yn(t.n),yn(t.e)),C;if("RSA"===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d&&void 0!==t.p&&void 0!==t.q&&void 0!==t.dp&&void 0!==t.dq&&void 0!==t.qi)return(C=new h).setPrivateEx(yn(t.n),yn(t.e),yn(t.d),yn(t.p),yn(t.q),yn(t.dp),yn(t.dq),yn(t.qi)),C;if("RSA"===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d)return(C=new h).setPrivate(yn(t.n),yn(t.e),yn(t.d)),C;if("EC"===t.kty&&void 0!==t.crv&&void 0!==t.x&&void 0!==t.y&&void 0===t.d){var f=(F=new o({curve:t.crv})).ecparams.keylen/4,l="04"+("0000000000"+yn(t.x)).slice(-f)+("0000000000"+yn(t.y)).slice(-f);return F.setPublicKeyHex(l),F}if("EC"===t.kty&&void 0!==t.crv&&void 0!==t.x&&void 0!==t.y&&void 0!==t.d){f=(F=new o({curve:t.crv})).ecparams.keylen/4,l="04"+("0000000000"+yn(t.x)).slice(-f)+("0000000000"+yn(t.y)).slice(-f);var d=("0000000000"+yn(t.d)).slice(-f);return F.setPublicKeyHex(l),F.setPrivateKeyHex(d),F}if("pkcs5prv"===n){var p,g=t,y=cn;if(9===(p=r(g,0)).length)(C=new h).readPKCS5PrvKeyHex(g);else if(6===p.length)(C=new a).readPKCS5PrvKeyHex(g);else{if(!(p.length>2&&"04"===g.substr(p[1],2)))throw"unsupported PKCS#1/5 hexadecimal key";(C=new o).readPKCS5PrvKeyHex(g)}return C}if("pkcs8prv"===n)return C=c.getKeyFromPlainPrivatePKCS8Hex(t);if("pkcs8pub"===n)return c._getKeyFromPublicPKCS8Hex(t);if("x509pub"===n)return Bn.getPublicKeyFromCertHex(t);if(-1!=t.indexOf("-END CERTIFICATE-",0)||-1!=t.indexOf("-END X509 CERTIFICATE-",0)||-1!=t.indexOf("-END TRUSTED CERTIFICATE-",0))return Bn.getPublicKeyFromCertPEM(t);if(-1!=t.indexOf("-END PUBLIC KEY-")){var v=kn(t,"PUBLIC KEY");return c._getKeyFromPublicPKCS8Hex(v)}if(-1!=t.indexOf("-END RSA PRIVATE KEY-")&&-1==t.indexOf("4,ENCRYPTED")){var m=u(t,"RSA PRIVATE KEY");return c.getKey(m,null,"pkcs5prv")}if(-1!=t.indexOf("-END DSA PRIVATE KEY-")&&-1==t.indexOf("4,ENCRYPTED")){var b=i(P=u(t,"DSA PRIVATE KEY"),0,[1],"02"),S=i(P,0,[2],"02"),w=i(P,0,[3],"02"),x=i(P,0,[4],"02"),k=i(P,0,[5],"02");return(C=new a).setPrivate(new ve(b,16),new ve(S,16),new ve(w,16),new ve(x,16),new ve(k,16)),C}if(-1!=t.indexOf("-END PRIVATE KEY-"))return c.getKeyFromPlainPrivatePKCS8PEM(t);if(-1!=t.indexOf("-END RSA PRIVATE KEY-")&&-1!=t.indexOf("4,ENCRYPTED")){var E=c.getDecryptedKeyHex(t,e),A=new tn;return A.readPKCS5PrvKeyHex(E),A}if(-1!=t.indexOf("-END EC PRIVATE KEY-")&&-1!=t.indexOf("4,ENCRYPTED")){var F,C=i(P=c.getDecryptedKeyHex(t,e),0,[1],"04"),T=i(P,0,[2,0],"06"),D=i(P,0,[3,0],"03").substr(2);if(void 0===an.crypto.OID.oidhex2name[T])throw"undefined OID(hex) in KJUR.crypto.OID: "+T;return(F=new o({curve:an.crypto.OID.oidhex2name[T]})).setPublicKeyHex(D),F.setPrivateKeyHex(C),F.isPublic=!1,F}if(-1!=t.indexOf("-END DSA PRIVATE KEY-")&&-1!=t.indexOf("4,ENCRYPTED")){var P;b=i(P=c.getDecryptedKeyHex(t,e),0,[1],"02"),S=i(P,0,[2],"02"),w=i(P,0,[3],"02"),x=i(P,0,[4],"02"),k=i(P,0,[5],"02");return(C=new a).setPrivate(new ve(b,16),new ve(S,16),new ve(w,16),new ve(x,16),new ve(k,16)),C}if(-1!=t.indexOf("-END ENCRYPTED PRIVATE KEY-"))return c.getKeyFromEncryptedPKCS8PEM(t,e);throw"not supported argument"},Dn.generateKeypair=function(t,e){if("RSA"==t){var n=e;(o=new tn).generate(n,"10001"),o.isPrivate=!0,o.isPublic=!0;var r=new tn,i=o.n.toString(16),s=o.e.toString(16);return r.setPublic(i,s),r.isPrivate=!1,r.isPublic=!0,(a={}).prvKeyObj=o,a.pubKeyObj=r,a}if("EC"==t){var o,a,h=e,u=new an.crypto.ECDSA({curve:h}).generateKeyPairHex();return(o=new an.crypto.ECDSA({curve:h})).setPublicKeyHex(u.ecpubhex),o.setPrivateKeyHex(u.ecprvhex),o.isPrivate=!0,o.isPublic=!1,(r=new an.crypto.ECDSA({curve:h})).setPublicKeyHex(u.ecpubhex),r.isPrivate=!1,r.isPublic=!0,(a={}).prvKeyObj=o,a.pubKeyObj=r,a}throw"unknown algorithm: "+t},Dn.getPEM=function(t,e,n,r,i,s){var o=an,a=o.asn1,h=a.DERObjectIdentifier,u=a.DERInteger,c=a.ASN1Util.newObject,f=a.x509.SubjectPublicKeyInfo,l=o.crypto,d=l.DSA,p=l.ECDSA,g=tn;function y(t){return c({seq:[{int:0},{int:{bigint:t.n}},{int:t.e},{int:{bigint:t.d}},{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.dmp1}},{int:{bigint:t.dmq1}},{int:{bigint:t.coeff}}]})}function v(t){return c({seq:[{int:1},{octstr:{hex:t.prvKeyHex}},{tag:["a0",!0,{oid:{name:t.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+t.pubKeyHex}}]}]})}function m(t){return c({seq:[{int:0},{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.g}},{int:{bigint:t.y}},{int:{bigint:t.x}}]})}if((void 0!==g&&t instanceof g||void 0!==d&&t instanceof d||void 0!==p&&t instanceof p)&&1==t.isPublic&&(void 0===e||"PKCS8PUB"==e))return xn(x=new f(t).getEncodedHex(),"PUBLIC KEY");if("PKCS1PRV"==e&&void 0!==g&&t instanceof g&&(void 0===n||null==n)&&1==t.isPrivate)return xn(x=y(t).getEncodedHex(),"RSA PRIVATE KEY");if("PKCS1PRV"==e&&void 0!==p&&t instanceof p&&(void 0===n||null==n)&&1==t.isPrivate){var b=new h({name:t.curveName}).getEncodedHex(),S=v(t).getEncodedHex(),w="";return w+=xn(b,"EC PARAMETERS"),w+=xn(S,"EC PRIVATE KEY")}if("PKCS1PRV"==e&&void 0!==d&&t instanceof d&&(void 0===n||null==n)&&1==t.isPrivate)return xn(x=m(t).getEncodedHex(),"DSA PRIVATE KEY");if("PKCS5PRV"==e&&void 0!==g&&t instanceof g&&void 0!==n&&null!=n&&1==t.isPrivate){var x=y(t).getEncodedHex();return void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",x,n,r,s)}if("PKCS5PRV"==e&&void 0!==p&&t instanceof p&&void 0!==n&&null!=n&&1==t.isPrivate){x=v(t).getEncodedHex();return void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",x,n,r,s)}if("PKCS5PRV"==e&&void 0!==d&&t instanceof d&&void 0!==n&&null!=n&&1==t.isPrivate){x=m(t).getEncodedHex();return void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",x,n,r,s)}var k=function(t,e){var n=E(t,e);return new c({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:n.pbkdf2Salt}},{int:n.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:n.encryptionSchemeIV}}]}]}]},{octstr:{hex:n.ciphertext}}]}).getEncodedHex()},E=function(t,e){var n=fe.lib.WordArray.random(8),r=fe.lib.WordArray.random(8),i=fe.PBKDF2(e,n,{keySize:6,iterations:100}),s=fe.enc.Hex.parse(t),o=fe.TripleDES.encrypt(s,i,{iv:r})+"",a={};return a.ciphertext=o,a.pbkdf2Salt=fe.enc.Hex.stringify(n),a.pbkdf2Iter=100,a.encryptionSchemeAlg="DES-EDE3-CBC",a.encryptionSchemeIV=fe.enc.Hex.stringify(r),a};if("PKCS8PRV"==e&&void 0!=g&&t instanceof g&&1==t.isPrivate){var A=y(t).getEncodedHex();x=c({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:A}}]}).getEncodedHex();return void 0===n||null==n?xn(x,"PRIVATE KEY"):xn(S=k(x,n),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==e&&void 0!==p&&t instanceof p&&1==t.isPrivate){A=new c({seq:[{int:1},{octstr:{hex:t.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+t.pubKeyHex}}]}]}).getEncodedHex(),x=c({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:t.curveName}}]},{octstr:{hex:A}}]}).getEncodedHex();return void 0===n||null==n?xn(x,"PRIVATE KEY"):xn(S=k(x,n),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==e&&void 0!==d&&t instanceof d&&1==t.isPrivate){A=new u({bigint:t.x}).getEncodedHex(),x=c({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.g}}]}]},{octstr:{hex:A}}]}).getEncodedHex();return void 0===n||null==n?xn(x,"PRIVATE KEY"):xn(S=k(x,n),"ENCRYPTED PRIVATE KEY")}throw"unsupported object nor format"},Dn.getKeyFromCSRPEM=function(t){var e=kn(t,"CERTIFICATE REQUEST");return Dn.getKeyFromCSRHex(e)},Dn.getKeyFromCSRHex=function(t){var e=Dn.parseCSRHex(t);return Dn.getKey(e.p8pubkeyhex,null,"pkcs8pub")},Dn.parseCSRHex=function(t){var e=cn,n=e.getChildIdx,r=e.getTLV,i={},s=t;if("30"!=s.substr(0,2))throw"malformed CSR(code:001)";var o=n(s,0);if(o.length<1)throw"malformed CSR(code:002)";if("30"!=s.substr(o[0],2))throw"malformed CSR(code:003)";var a=n(s,o[0]);if(a.length<3)throw"malformed CSR(code:004)";return i.p8pubkeyhex=r(s,a[2]),i},Dn.getJWKFromKey=function(t){var e={};if(t instanceof tn&&t.isPrivate)return e.kty="RSA",e.n=gn(t.n.toString(16)),e.e=gn(t.e.toString(16)),e.d=gn(t.d.toString(16)),e.p=gn(t.p.toString(16)),e.q=gn(t.q.toString(16)),e.dp=gn(t.dmp1.toString(16)),e.dq=gn(t.dmq1.toString(16)),e.qi=gn(t.coeff.toString(16)),e;if(t instanceof tn&&t.isPublic)return e.kty="RSA",e.n=gn(t.n.toString(16)),e.e=gn(t.e.toString(16)),e;if(t instanceof an.crypto.ECDSA&&t.isPrivate){if("P-256"!==(r=t.getShortNISTPCurveName())&&"P-384"!==r)throw"unsupported curve name for JWT: "+r;var n=t.getPublicKeyXYHex();return e.kty="EC",e.crv=r,e.x=gn(n.x),e.y=gn(n.y),e.d=gn(t.prvKeyHex),e}if(t instanceof an.crypto.ECDSA&&t.isPublic){var r;if("P-256"!==(r=t.getShortNISTPCurveName())&&"P-384"!==r)throw"unsupported curve name for JWT: "+r;n=t.getPublicKeyXYHex();return e.kty="EC",e.crv=r,e.x=gn(n.x),e.y=gn(n.y),e}throw"not supported key object"},tn.getPosArrayOfChildrenFromHex=function(t){return cn.getChildIdx(t,0)},tn.getHexValueArrayOfChildrenFromHex=function(t){var e,n=cn.getV,r=n(t,(e=tn.getPosArrayOfChildrenFromHex(t))[0]),i=n(t,e[1]),s=n(t,e[2]),o=n(t,e[3]),a=n(t,e[4]),h=n(t,e[5]),u=n(t,e[6]),c=n(t,e[7]),f=n(t,e[8]);return(e=new Array).push(r,i,s,o,a,h,u,c,f),e},tn.prototype.readPrivateKeyFromPEMString=function(t){var e=kn(t),n=tn.getHexValueArrayOfChildrenFromHex(e);this.setPrivateEx(n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8])},tn.prototype.readPKCS5PrvKeyHex=function(t){var e=tn.getHexValueArrayOfChildrenFromHex(t);this.setPrivateEx(e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},tn.prototype.readPKCS8PrvKeyHex=function(t){var e,n,r,i,s,o,a,h,u=cn,c=u.getVbyList;if(!1===u.isASN1HEX(t))throw"not ASN.1 hex string";try{e=c(t,0,[2,0,1],"02"),n=c(t,0,[2,0,2],"02"),r=c(t,0,[2,0,3],"02"),i=c(t,0,[2,0,4],"02"),s=c(t,0,[2,0,5],"02"),o=c(t,0,[2,0,6],"02"),a=c(t,0,[2,0,7],"02"),h=c(t,0,[2,0,8],"02")}catch(t){throw"malformed PKCS#8 plain RSA private key"}this.setPrivateEx(e,n,r,i,s,o,a,h)},tn.prototype.readPKCS5PubKeyHex=function(t){var e=cn,n=e.getV;if(!1===e.isASN1HEX(t))throw"keyHex is not ASN.1 hex string";var r=e.getChildIdx(t,0);if(2!==r.length||"02"!==t.substr(r[0],2)||"02"!==t.substr(r[1],2))throw"wrong hex for PKCS#5 public key";var i=n(t,r[0]),s=n(t,r[1]);this.setPublic(i,s)},tn.prototype.readPKCS8PubKeyHex=function(t){var e=cn;if(!1===e.isASN1HEX(t))throw"not ASN.1 hex string";if("06092a864886f70d010101"!==e.getTLVbyList(t,0,[0,0]))throw"not PKCS8 RSA public key";var n=e.getTLVbyList(t,0,[1,0]);this.readPKCS5PubKeyHex(n)},tn.prototype.readCertPubKeyHex=function(t,e){var n,r;(n=new Bn).readCertHex(t),r=n.getPublicKeyHex(),this.readPKCS8PubKeyHex(r)};var Pn=new RegExp("");function In(t,e){for(var n="",r=e/4-t.length,i=0;i<r;i++)n+="0";return n+t}function Rn(t,e,n){for(var r="",i=0;r.length<e;)r+=bn(n(Sn(t+String.fromCharCode.apply(String,[(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i])))),i+=1;return r}function _n(t){for(var e in an.crypto.Util.DIGESTINFOHEAD){var n=an.crypto.Util.DIGESTINFOHEAD[e],r=n.length;if(t.substring(0,r)==n)return[e,t.substring(r)]}return[]}function Bn(){var t=cn,e=t.getChildIdx,n=t.getV,r=t.getTLV,i=t.getVbyList,s=t.getTLVbyList,o=t.getIdxbyList,a=t.getVidx,h=t.oidname,u=Bn,c=kn;this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){return null===this.hex||0!==this.version?this.version:"a003020102"!==s(this.hex,0,[0,0])?(this.version=1,this.foffset=-1,1):(this.version=3,3)},this.getSerialNumberHex=function(){return i(this.hex,0,[0,1+this.foffset],"02")},this.getSignatureAlgorithmField=function(){return h(i(this.hex,0,[0,2+this.foffset,0],"06"))},this.getIssuerHex=function(){return s(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return u.hex2dn(this.getIssuerHex())},this.getSubjectHex=function(){return s(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return u.hex2dn(this.getSubjectHex())},this.getNotBefore=function(){var t=i(this.hex,0,[0,4+this.foffset,0]);return t=t.replace(/(..)/g,"%$1"),t=decodeURIComponent(t)},this.getNotAfter=function(){var t=i(this.hex,0,[0,4+this.foffset,1]);return t=t.replace(/(..)/g,"%$1"),t=decodeURIComponent(t)},this.getPublicKeyHex=function(){return t.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return o(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var t=this.getPublicKeyIdx();return o(this.hex,t,[1,0],"30")},this.getPublicKey=function(){return Dn.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){return h(i(this.hex,0,[1,0],"06"))},this.getSignatureValueHex=function(){return i(this.hex,0,[2],"03",!0)},this.verifySignature=function(t){var e=this.getSignatureAlgorithmName(),n=this.getSignatureValueHex(),r=s(this.hex,0,[0],"30"),i=new an.crypto.Signature({alg:e});return i.init(t),i.updateHex(r),i.verify(n)},this.parseExt=function(){if(3!==this.version)return-1;var n=o(this.hex,0,[0,7,0],"30"),r=e(this.hex,n);this.aExtInfo=new Array;for(var s=0;s<r.length;s++){var h={critical:!1},u=0;3===e(this.hex,r[s]).length&&(h.critical=!0,u=1),h.oid=t.hextooidstr(i(this.hex,r[s],[0],"06"));var c=o(this.hex,r[s],[1+u]);h.vidx=a(this.hex,c),this.aExtInfo.push(h)}},this.getExtInfo=function(t){var e=this.aExtInfo,n=t;if(t.match(/^[0-9.]+$/)||(n=an.asn1.x509.OID.name2oid(t)),""!==n)for(var r=0;r<e.length;r++)if(e[r].oid===n)return e[r]},this.getExtBasicConstraints=function(){var t=this.getExtInfo("basicConstraints");if(void 0===t)return t;var e=n(this.hex,t.vidx);if(""===e)return{};if("0101ff"===e)return{cA:!0};if("0101ff02"===e.substr(0,8)){var r=n(e,6);return{cA:!0,pathLen:parseInt(r,16)}}throw"basicConstraints parse error"},this.getExtKeyUsageBin=function(){var t=this.getExtInfo("keyUsage");if(void 0===t)return"";var e=n(this.hex,t.vidx);if(e.length%2!=0||e.length<=2)throw"malformed key usage value";var r=parseInt(e.substr(0,2)),i=parseInt(e.substr(2),16).toString(2);return i.substr(0,i.length-r)},this.getExtKeyUsageString=function(){for(var t=this.getExtKeyUsageBin(),e=new Array,n=0;n<t.length;n++)"1"==t.substr(n,1)&&e.push(Bn.KEYUSAGE_NAME[n]);return e.join(",")},this.getExtSubjectKeyIdentifier=function(){var t=this.getExtInfo("subjectKeyIdentifier");return void 0===t?t:n(this.hex,t.vidx)},this.getExtAuthorityKeyIdentifier=function(){var t=this.getExtInfo("authorityKeyIdentifier");if(void 0===t)return t;for(var i={},s=r(this.hex,t.vidx),o=e(s,0),a=0;a<o.length;a++)"80"===s.substr(o[a],2)&&(i.kid=n(s,o[a]));return i},this.getExtExtKeyUsageName=function(){var t=this.getExtInfo("extKeyUsage");if(void 0===t)return t;var i=new Array,s=r(this.hex,t.vidx);if(""===s)return i;for(var o=e(s,0),a=0;a<o.length;a++)i.push(h(n(s,o[a])));return i},this.getExtSubjectAltName=function(){for(var t=this.getExtSubjectAltName2(),e=new Array,n=0;n<t.length;n++)"DNS"===t[n][0]&&e.push(t[n][1]);return e},this.getExtSubjectAltName2=function(){var t,i,s,o=this.getExtInfo("subjectAltName");if(void 0===o)return o;for(var a=new Array,h=r(this.hex,o.vidx),u=e(h,0),c=0;c<u.length;c++)if(s=h.substr(u[c],2),t=n(h,u[c]),"81"===s&&(i=mn(t),a.push(["MAIL",i])),"82"===s&&(i=mn(t),a.push(["DNS",i])),"84"===s&&(i=Bn.hex2dn(t,0),a.push(["DN",i])),"86"===s&&(i=mn(t),a.push(["URI",i])),"87"===s)try{i=parseInt(i.substr(0,2),16)+"."+parseInt(i.substr(2,2),16)+"."+parseInt(i.substr(4,2),16)+"."+parseInt(i.substr(6,2),16),a.push(["IP",i])}catch(t){}return a},this.getExtCRLDistributionPointsURI=function(){var t=this.getExtInfo("cRLDistributionPoints");if(void 0===t)return t;for(var n=new Array,r=e(this.hex,t.vidx),s=0;s<r.length;s++)try{var o=mn(i(this.hex,r[s],[0,0,0],"86"));n.push(o)}catch(t){}return n},this.getExtAIAInfo=function(){var t=this.getExtInfo("authorityInfoAccess");if(void 0===t)return t;for(var n={ocsp:[],caissuer:[]},r=e(this.hex,t.vidx),s=0;s<r.length;s++){var o=i(this.hex,r[s],[0],"06"),a=i(this.hex,r[s],[1],"86");"2b06010505073001"===o&&n.ocsp.push(mn(a)),"2b06010505073002"===o&&n.caissuer.push(mn(a))}return n},this.getExtCertificatePolicies=function(){var t=this.getExtInfo("certificatePolicies");if(void 0===t)return t;for(var s=r(this.hex,t.vidx),o=[],a=e(s,0),u=0;u<a.length;u++){var c={},f=e(s,a[u]);if(c.id=h(n(s,f[0])),2===f.length)for(var l=e(s,f[1]),d=0;d<l.length;d++){var p=i(s,l[d],[0],"06");"2b06010505070201"===p?c.cps=mn(i(s,l[d],[1])):"2b06010505070202"===p&&(c.unotice=mn(i(s,l[d],[1,0])))}o.push(c)}return o},this.readCertPEM=function(t){this.readCertHex(c(t))},this.readCertHex=function(t){this.hex=t,this.getVersion();try{o(this.hex,0,[0,7],"a3"),this.parseExt()}catch(t){}},this.getInfo=function(){var t,e,n;if(t="Basic Fields\n",t+="  serial number: "+this.getSerialNumberHex()+"\n",t+="  signature algorithm: "+this.getSignatureAlgorithmField()+"\n",t+="  issuer: "+this.getIssuerString()+"\n",t+="  notBefore: "+this.getNotBefore()+"\n",t+="  notAfter: "+this.getNotAfter()+"\n",t+="  subject: "+this.getSubjectString()+"\n",t+="  subject public key info: \n",t+="    key algorithm: "+(e=this.getPublicKey()).type+"\n","RSA"===e.type&&(t+="    n="+Tn(e.n.toString(16)).substr(0,16)+"...\n",t+="    e="+Tn(e.e.toString(16))+"\n"),void 0!==(n=this.aExtInfo)&&null!==n){t+="X509v3 Extensions:\n";for(var r=0;r<n.length;r++){var i=n[r],s=an.asn1.x509.OID.oid2name(i.oid);""===s&&(s=i.oid);var o="";if(!0===i.critical&&(o="CRITICAL"),t+="  "+s+" "+o+":\n","basicConstraints"===s){var a=this.getExtBasicConstraints();void 0===a.cA?t+="    {}\n":(t+="    cA=true",void 0!==a.pathLen&&(t+=", pathLen="+a.pathLen),t+="\n")}else if("keyUsage"===s)t+="    "+this.getExtKeyUsageString()+"\n";else if("subjectKeyIdentifier"===s)t+="    "+this.getExtSubjectKeyIdentifier()+"\n";else if("authorityKeyIdentifier"===s){var h=this.getExtAuthorityKeyIdentifier();void 0!==h.kid&&(t+="    kid="+h.kid+"\n")}else{if("extKeyUsage"===s)t+="    "+this.getExtExtKeyUsageName().join(", ")+"\n";else if("subjectAltName"===s)t+="    "+this.getExtSubjectAltName2()+"\n";else if("cRLDistributionPoints"===s)t+="    "+this.getExtCRLDistributionPointsURI()+"\n";else if("authorityInfoAccess"===s){var u=this.getExtAIAInfo();void 0!==u.ocsp&&(t+="    ocsp: "+u.ocsp.join(",")+"\n"),void 0!==u.caissuer&&(t+="    caissuer: "+u.caissuer.join(",")+"\n")}else if("certificatePolicies"===s)for(var c=this.getExtCertificatePolicies(),f=0;f<c.length;f++)void 0!==c[f].id&&(t+="    policy oid: "+c[f].id+"\n"),void 0!==c[f].cps&&(t+="    cps: "+c[f].cps+"\n")}}}return t+="signature algorithm: "+this.getSignatureAlgorithmName()+"\n",t+="signature: "+this.getSignatureValueHex().substr(0,16)+"...\n"}}Pn.compile("[^0-9a-f]","gi"),tn.prototype.sign=function(t,e){var n,r=(n=t,an.crypto.Util.hashString(n,e));return this.signWithMessageHash(r,e)},tn.prototype.signWithMessageHash=function(t,e){var n=Ze(an.crypto.Util.getPaddedDigestInfoHex(t,e,this.n.bitLength()),16);return In(this.doPrivate(n).toString(16),this.n.bitLength())},tn.prototype.signPSS=function(t,e,n){var r,i=(r=Sn(t),an.crypto.Util.hashHex(r,e));return void 0===n&&(n=-1),this.signWithMessageHashPSS(i,e,n)},tn.prototype.signWithMessageHashPSS=function(t,e,n){var r,i=bn(t),s=i.length,o=this.n.bitLength()-1,a=Math.ceil(o/8),h=function(t){return an.crypto.Util.hashHex(t,e)};if(-1===n||void 0===n)n=s;else if(-2===n)n=a-s-2;else if(n<-2)throw"invalid salt length";if(a<s+n+2)throw"data too long";var u="";n>0&&(u=new Array(n),(new Xe).nextBytes(u),u=String.fromCharCode.apply(String,u));var c=bn(h(Sn("\0\0\0\0\0\0\0\0"+i+u))),f=[];for(r=0;r<a-n-s-2;r+=1)f[r]=0;var l=String.fromCharCode.apply(String,f)+""+u,d=Rn(c,l.length,h),p=[];for(r=0;r<l.length;r+=1)p[r]=l.charCodeAt(r)^d.charCodeAt(r);var g=65280>>8*a-o&255;for(p[0]&=~g,r=0;r<s;r++)p.push(c.charCodeAt(r));return p.push(188),In(this.doPrivate(new ve(p)).toString(16),this.n.bitLength())},tn.prototype.verify=function(t,e){var n=Ze(e=(e=e.replace(Pn,"")).replace(/[ \n]+/g,""),16);if(n.bitLength()>this.n.bitLength())return 0;var r=_n(this.doPublic(n).toString(16).replace(/^1f+00/,""));if(0==r.length)return!1;var i,s=r[0];return r[1]==(i=t,an.crypto.Util.hashString(i,s))},tn.prototype.verifyWithMessageHash=function(t,e){var n=Ze(e=(e=e.replace(Pn,"")).replace(/[ \n]+/g,""),16);if(n.bitLength()>this.n.bitLength())return 0;var r=_n(this.doPublic(n).toString(16).replace(/^1f+00/,""));return 0!=r.length&&r[1]==t},tn.prototype.verifyPSS=function(t,e,n,r){var i,s=(i=Sn(t),an.crypto.Util.hashHex(i,n));return void 0===r&&(r=-1),this.verifyWithMessageHashPSS(s,e,n,r)},tn.prototype.verifyWithMessageHashPSS=function(t,e,n,r){var i=new ve(e,16);if(i.bitLength()>this.n.bitLength())return!1;var s,o=function(t){return an.crypto.Util.hashHex(t,n)},a=bn(t),h=a.length,u=this.n.bitLength()-1,c=Math.ceil(u/8);if(-1===r||void 0===r)r=h;else if(-2===r)r=c-h-2;else if(r<-2)throw"invalid salt length";if(c<h+r+2)throw"data too long";var f=this.doPublic(i).toByteArray();for(s=0;s<f.length;s+=1)f[s]&=255;for(;f.length<c;)f.unshift(0);if(188!==f[c-1])throw"encoded message does not end in 0xbc";var l=(f=String.fromCharCode.apply(String,f)).substr(0,c-h-1),d=f.substr(l.length,h),p=65280>>8*c-u&255;if(0!=(l.charCodeAt(0)&p))throw"bits beyond keysize not zero";var g=Rn(d,l.length,o),y=[];for(s=0;s<l.length;s+=1)y[s]=l.charCodeAt(s)^g.charCodeAt(s);y[0]&=~p;var v=c-h-r-2;for(s=0;s<v;s+=1)if(0!==y[s])throw"leftmost octets not zero";if(1!==y[v])throw"0x01 marker not found";return d===bn(o(Sn("\0\0\0\0\0\0\0\0"+a+String.fromCharCode.apply(String,y.slice(-r)))))},tn.SALT_LEN_HLEN=-1,tn.SALT_LEN_MAX=-2,tn.SALT_LEN_RECOVER=-2,Bn.hex2dn=function(t,e){if(void 0===e&&(e=0),"30"!==t.substr(e,2))throw"malformed DN";for(var n=new Array,r=cn.getChildIdx(t,e),i=0;i<r.length;i++)n.push(Bn.hex2rdn(t,r[i]));return"/"+(n=n.map(function(t){return t.replace("/","\\/")})).join("/")},Bn.hex2rdn=function(t,e){if(void 0===e&&(e=0),"31"!==t.substr(e,2))throw"malformed RDN";for(var n=new Array,r=cn.getChildIdx(t,e),i=0;i<r.length;i++)n.push(Bn.hex2attrTypeValue(t,r[i]));return(n=n.map(function(t){return t.replace("+","\\+")})).join("+")},Bn.hex2attrTypeValue=function(t,e){var n=cn,r=n.getV;if(void 0===e&&(e=0),"30"!==t.substr(e,2))throw"malformed attribute type and value";var i=n.getChildIdx(t,e);2!==i.length||t.substr(i[0],2);var s=r(t,i[0]),o=an.asn1.ASN1Util.oidHexToInt(s);return an.asn1.x509.OID.oid2atype(o)+"="+bn(r(t,i[1]))},Bn.getPublicKeyFromCertHex=function(t){var e=new Bn;return e.readCertHex(t),e.getPublicKey()},Bn.getPublicKeyFromCertPEM=function(t){var e=new Bn;return e.readCertPEM(t),e.getPublicKey()},Bn.getPublicKeyInfoPropOfCertPEM=function(t){var e,n,r=cn.getVbyList,i={};return i.algparam=null,(e=new Bn).readCertPEM(t),n=e.getPublicKeyHex(),i.keyhex=r(n,0,[1],"03").substr(2),i.algoid=r(n,0,[0,0],"06"),"2a8648ce3d0201"===i.algoid&&(i.algparam=r(n,0,[0,1],"06")),i},Bn.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],void 0!==an&&an||(an={}),void 0!==an.jws&&an.jws||(an.jws={}),an.jws.JWS=function(){var t=an.jws.JWS.isSafeJSONString;this.parseJWS=function(e,n){if(void 0===this.parsedJWS||!n&&void 0===this.parsedJWS.sigvalH){var r=e.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(null==r)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var i=r[1],s=r[2],o=r[3],a=i+"."+s;if(this.parsedJWS={},this.parsedJWS.headB64U=i,this.parsedJWS.payloadB64U=s,this.parsedJWS.sigvalB64U=o,this.parsedJWS.si=a,!n){var h=yn(o),u=Ze(h,16);this.parsedJWS.sigvalH=h,this.parsedJWS.sigvalBI=u}var c=un(i),f=un(s);if(this.parsedJWS.headS=c,this.parsedJWS.payloadS=f,!t(c,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+c}}},an.jws.JWS.sign=function(t,e,n,r,i){var s,o,a,h=an,u=h.jws.JWS,c=u.readSafeJSONString,f=u.isSafeJSONString,l=h.crypto,d=(l.ECDSA,l.Mac),p=l.Signature,g=JSON;if("string"!=typeof e&&"object"!=typeof e)throw"spHeader must be JSON string or object: "+e;if("object"==typeof e&&(o=e,s=g.stringify(o)),"string"==typeof e){if(!f(s=e))throw"JWS Head is not safe JSON string: "+s;o=c(s)}if(a=n,"object"==typeof n&&(a=g.stringify(n)),""!=t&&null!=t||void 0===o.alg||(t=o.alg),""!=t&&null!=t&&void 0===o.alg&&(o.alg=t,s=g.stringify(o)),t!==o.alg)throw"alg and sHeader.alg doesn't match: "+t+"!="+o.alg;var y=null;if(void 0===u.jwsalg2sigalg[t])throw"unsupported alg name: "+t;y=u.jwsalg2sigalg[t];var v=hn(s)+"."+hn(a),m="";if("Hmac"==y.substr(0,4)){if(void 0===r)throw"mac key shall be specified for HS* alg";var b=new d({alg:y,prov:"cryptojs",pass:r});b.updateString(v),m=b.doFinal()}else if(-1!=y.indexOf("withECDSA")){(w=new p({alg:y})).init(r,i),w.updateString(v);var S=w.sign();m=an.crypto.ECDSA.asn1SigToConcatSig(S)}else{var w;if("none"!=y)(w=new p({alg:y})).init(r,i),w.updateString(v),m=w.sign()}return v+"."+gn(m)},an.jws.JWS.verify=function(t,e,n){var r,i=an,s=i.jws.JWS,o=s.readSafeJSONString,a=i.crypto,h=a.ECDSA,u=a.Mac,c=a.Signature;r=tn;var f=t.split("."),l=f[0]+"."+f[1],d=yn(f[2]),p=o(un(f[0])),g=null,y=null;if(void 0===p.alg)throw"algorithm not specified in header";if((y=(g=p.alg).substr(0,2),null!=n&&"[object Array]"===Object.prototype.toString.call(n)&&n.length>0)&&-1==(":"+n.join(":")+":").indexOf(":"+g+":"))throw"algorithm '"+g+"' not accepted in the list";if("none"!=g&&null===e)throw"key shall be specified to verify.";if("string"==typeof e&&-1!=e.indexOf("-----BEGIN ")&&(e=Dn.getKey(e)),!("RS"!=y&&"PS"!=y||e instanceof r))throw"key shall be a RSAKey obj for RS* and PS* algs";if("ES"==y&&!(e instanceof h))throw"key shall be a ECDSA obj for ES* algs";var v=null;if(void 0===s.jwsalg2sigalg[p.alg])throw"unsupported alg name: "+g;if("none"==(v=s.jwsalg2sigalg[g]))throw"not supported";if("Hmac"==v.substr(0,4)){if(void 0===e)throw"hexadecimal key shall be specified for HMAC";var m=new u({alg:v,pass:e});return m.updateString(l),d==m.doFinal()}if(-1!=v.indexOf("withECDSA")){var b,S=null;try{S=h.concatSigToASN1Sig(d)}catch(t){return!1}return(b=new c({alg:v})).init(e),b.updateString(l),b.verify(S)}return(b=new c({alg:v})).init(e),b.updateString(l),b.verify(d)},an.jws.JWS.parse=function(t){var e,n,r,i=t.split("."),s={};if(2!=i.length&&3!=i.length)throw"malformed sJWS: wrong number of '.' splitted elements";return e=i[0],n=i[1],3==i.length&&(r=i[2]),s.headerObj=an.jws.JWS.readSafeJSONString(un(e)),s.payloadObj=an.jws.JWS.readSafeJSONString(un(n)),s.headerPP=JSON.stringify(s.headerObj,null,"  "),null==s.payloadObj?s.payloadPP=un(n):s.payloadPP=JSON.stringify(s.payloadObj,null,"  "),void 0!==r&&(s.sigHex=yn(r)),s},an.jws.JWS.verifyJWT=function(t,e,n){var r=an.jws,i=r.JWS,s=i.readSafeJSONString,o=i.inArray,a=i.includedArray,h=t.split("."),u=h[0],c=h[1],f=(yn(h[2]),s(un(u))),l=s(un(c));if(void 0===f.alg)return!1;if(void 0===n.alg)throw"acceptField.alg shall be specified";if(!o(f.alg,n.alg))return!1;if(void 0!==l.iss&&"object"==typeof n.iss&&!o(l.iss,n.iss))return!1;if(void 0!==l.sub&&"object"==typeof n.sub&&!o(l.sub,n.sub))return!1;if(void 0!==l.aud&&"object"==typeof n.aud)if("string"==typeof l.aud){if(!o(l.aud,n.aud))return!1}else if("object"==typeof l.aud&&!a(l.aud,n.aud))return!1;var d=r.IntDate.getNow();return void 0!==n.verifyAt&&"number"==typeof n.verifyAt&&(d=n.verifyAt),void 0!==n.gracePeriod&&"number"==typeof n.gracePeriod||(n.gracePeriod=0),!(void 0!==l.exp&&"number"==typeof l.exp&&l.exp+n.gracePeriod<d)&&(!(void 0!==l.nbf&&"number"==typeof l.nbf&&d<l.nbf-n.gracePeriod)&&(!(void 0!==l.iat&&"number"==typeof l.iat&&d<l.iat-n.gracePeriod)&&((void 0===l.jti||void 0===n.jti||l.jti===n.jti)&&!!i.verify(t,e,n.alg))))},an.jws.JWS.includedArray=function(t,e){var n=an.jws.JWS.inArray;if(null===t)return!1;if("object"!=typeof t)return!1;if("number"!=typeof t.length)return!1;for(var r=0;r<t.length;r++)if(!n(t[r],e))return!1;return!0},an.jws.JWS.inArray=function(t,e){if(null===e)return!1;if("object"!=typeof e)return!1;if("number"!=typeof e.length)return!1;for(var n=0;n<e.length;n++)if(e[n]==t)return!0;return!1},an.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},an.jws.JWS.isSafeJSONString=function(t,e,n){var r=null;try{return"object"!=typeof(r=on(t))?0:r.constructor===Array?0:(e&&(e[n]=r),1)}catch(t){return 0}},an.jws.JWS.readSafeJSONString=function(t){var e=null;try{return"object"!=typeof(e=on(t))?null:e.constructor===Array?null:e}catch(t){return null}},an.jws.JWS.getEncodedSignatureValueFromJWS=function(t){var e=t.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(null==e)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return e[1]},an.jws.JWS.getJWKthumbprint=function(t){if("RSA"!==t.kty&&"EC"!==t.kty&&"oct"!==t.kty)throw"unsupported algorithm for JWK Thumprint";var e="{";if("RSA"===t.kty){if("string"!=typeof t.n||"string"!=typeof t.e)throw"wrong n and e value for RSA key";e+='"e":"'+t.e+'",',e+='"kty":"'+t.kty+'",',e+='"n":"'+t.n+'"}'}else if("EC"===t.kty){if("string"!=typeof t.crv||"string"!=typeof t.x||"string"!=typeof t.y)throw"wrong crv, x and y value for EC key";e+='"crv":"'+t.crv+'",',e+='"kty":"'+t.kty+'",',e+='"x":"'+t.x+'",',e+='"y":"'+t.y+'"}'}else if("oct"===t.kty){if("string"!=typeof t.k)throw"wrong k value for oct(symmetric) key";e+='"kty":"'+t.kty+'",',e+='"k":"'+t.k+'"}'}var n=Sn(e);return gn(an.crypto.Util.hashHex(n,"sha256"))},an.jws.IntDate={},an.jws.IntDate.get=function(t){var e=an.jws.IntDate,n=e.getNow,r=e.getZulu;if("now"==t)return n();if("now + 1hour"==t)return n()+3600;if("now + 1day"==t)return n()+86400;if("now + 1month"==t)return n()+2592e3;if("now + 1year"==t)return n()+31536e3;if(t.match(/Z$/))return r(t);if(t.match(/^[0-9]+$/))return parseInt(t);throw"unsupported format: "+t},an.jws.IntDate.getZulu=function(t){return En(t)},an.jws.IntDate.getNow=function(){return~~(new Date/1e3)},an.jws.IntDate.intDate2UTCString=function(t){return new Date(1e3*t).toUTCString()},an.jws.IntDate.intDate2Zulu=function(t){var e=new Date(1e3*t);return("0000"+e.getUTCFullYear()).slice(-4)+("00"+(e.getUTCMonth()+1)).slice(-2)+("00"+e.getUTCDate()).slice(-2)+("00"+e.getUTCHours()).slice(-2)+("00"+e.getUTCMinutes()).slice(-2)+("00"+e.getUTCSeconds()).slice(-2)+"Z"},void 0!==an&&an||(an={}),void 0!==an.jws&&an.jws||(an.jws={}),an.jws.JWSJS=function(){var t=an.jws.JWS,e=t.readSafeJSONString;this.aHeader=[],this.sPayload="",this.aSignature=[],this.init=function(){this.aHeader=[],this.sPayload=void 0,this.aSignature=[]},this.initWithJWS=function(t){this.init();var e=t.split(".");if(3!=e.length)throw"malformed input JWS";this.aHeader.push(e[0]),this.sPayload=e[1],this.aSignature.push(e[2])},this.addSignature=function(t,e,n,r){if(void 0===this.sPayload||null===this.sPayload)throw"there's no JSON-JS signature to add.";var i=this.aHeader.length;if(this.aHeader.length!=this.aSignature.length)throw"aHeader.length != aSignature.length";try{var s=an.jws.JWS.sign(t,e,this.sPayload,n,r).split(".");s[0],s[2];this.aHeader.push(s[0]),this.aSignature.push(s[2])}catch(t){throw this.aHeader.length>i&&this.aHeader.pop(),this.aSignature.length>i&&this.aSignature.pop(),"addSignature failed: "+t}},this.verifyAll=function(t){if(this.aHeader.length!==t.length||this.aSignature.length!==t.length)return!1;for(var e=0;e<t.length;e++){var n=t[e];if(2!==n.length)return!1;if(!1===this.verifyNth(e,n[0],n[1]))return!1}return!0},this.verifyNth=function(e,n,r){if(this.aHeader.length<=e||this.aSignature.length<=e)return!1;var i=this.aHeader[e],s=this.aSignature[e],o=i+"."+this.sPayload+"."+s,a=!1;try{a=t.verify(o,n,r)}catch(t){return!1}return a},this.readJWSJS=function(t){if("string"==typeof t){var n=e(t);if(null==n)throw"argument is not safe JSON object string";this.aHeader=n.headers,this.sPayload=n.payload,this.aSignature=n.signatures}else try{if(!(t.headers.length>0))throw"malformed header";if(this.aHeader=t.headers,"string"!=typeof t.payload)throw"malformed signatures";if(this.sPayload=t.payload,!(t.signatures.length>0))throw"malformed signatures";this.signatures=t.signatures}catch(t){throw"malformed JWS-JS JSON object: "+t}},this.getJSON=function(){return{headers:this.aHeader,payload:this.sPayload,signatures:this.aSignature}},this.isEmpty=function(){return 0==this.aHeader.length?1:0}};an.crypto.ECDSA,an.crypto.DSA,an.crypto.Signature;var Hn=an.crypto.MessageDigest,Nn=(an.crypto.Mac,an.crypto.Cipher,Dn),On=kn,jn=(an.crypto,an.asn1),Ln=an.jws,Mn=(an.lang,{apiRoot:"http://127.0.0.1:4944/api",request:function(t){t.headers=void 0!==t.headers?t.json:{"Content-Type":"application/json"},t.method="POST";var e=void 0!==t.uri?t.uri:this.apiRoot;return t.apiMethod&&(t.uri+="/"+t.apiMethod),t.apiIdType&&(t.uri+="/"+encodeURIComponent(t.apiIdType)),t.apiId&&(t.uri+="/"+encodeURIComponent(t.apiId)),t.apiAction&&(t.uri+="/"+t.apiAction),rt(e,t)},getJwt:function(t,e){var n=Math.floor(Date.now()/1e3)+60;return e=nt({exp:n},e),Ln.sign({header:{typ:"JWT",alg:"ES256"},payload:e,privateKey:t})}}),Vn=s.JSON||(s.JSON={stringify:JSON.stringify}),Un=function(t){return Vn.stringify.apply(Vn,arguments)},Kn=n(r(function(t){t.exports={default:Un,__esModule:!0}})),qn=n(r(function(t,e){e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}})),zn=S,Yn={},Gn=f?Object.defineProperties:function(t,e){u(t);for(var n,r=W(e),i=r.length,s=0;i>s;)m.f(t,n=r[s++],e[n]);return t},Jn=i.document,Wn=Jn&&Jn.documentElement,$n=q("IE_PROTO"),Xn=function(){},Zn=function(){var t,e=p("iframe"),n=J.length;for(e.style.display="none",Wn.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),Zn=t.F;n--;)delete Zn.prototype[J[n]];return Zn()},Qn=Object.create||function(t,e){var n;return null!==t?(Xn.prototype=u(t),n=new Xn,Xn.prototype=null,n[$n]=t):n=Zn(),void 0===e?n:Gn(n,e)},tr=r(function(t){var e=L("wks"),n=i.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:U)("Symbol."+t))}).store=e}),er=m.f,nr=tr("toStringTag"),rr=function(t,e,n){t&&!A(t=n?t:t.prototype,nr)&&er(t,nr,{configurable:!0,value:e})},ir={};S(ir,tr("iterator"),function(){return this});var sr,or=function(t,e,n){t.prototype=Qn(ir,{next:b(1,n)}),rr(t,e+" Iterator")},ar=q("IE_PROTO"),hr=Object.prototype,ur=Object.getPrototypeOf||function(t){return t=Z(t),A(t,ar)?t[ar]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?hr:null},cr=tr("iterator"),fr=!([].keys&&"next"in[].keys()),lr=function(){return this},dr=function(t,e,n,r,i,s,o){or(n,e,r);var a,h,u,c=function(t){if(!fr&&t in p)return p[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},f=e+" Iterator",l="values"==i,d=!1,p=t.prototype,g=p[cr]||p["@@iterator"]||i&&p[i],y=!fr&&g||c(i),v=i?l?c("entries"):y:void 0,m="Array"==e&&p.entries||g;if(m&&(u=ur(m.call(new t)))!==Object.prototype&&u.next&&rr(u,f,!0),l&&g&&"values"!==g.name&&(d=!0,y=function(){return g.call(this)}),o&&(fr||d||!p[cr])&&S(p,cr,y),Yn[e]=y,Yn[f]=lr,i)if(a={values:l?y:c("values"),keys:s?y:c("keys"),entries:v},o)for(h in a)h in p||zn(p,h,a[h]);else k(k.P+k.F*(fr||d),e,a);return a},pr=(sr=!0,function(t,e){var n,r,i=String(D(t)),s=_(e),o=i.length;return s<0||s>=o?sr?"":void 0:(n=i.charCodeAt(s))<55296||n>56319||s+1===o||(r=i.charCodeAt(s+1))<56320||r>57343?sr?i.charAt(s):n:sr?i.slice(s,s+2):r-56320+(n-55296<<10)+65536});dr(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=pr(e,n),this._i+=t.length,{value:t,done:!1})});var gr=function(t,e){return{value:e,done:!!t}};dr(Array,"Array",function(t,e){this._t=P(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,gr(1)):gr(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values");Yn.Arguments=Yn.Array;for(var yr=tr("toStringTag"),vr="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),mr=0;mr<vr.length;mr++){var br=vr[mr],Sr=i[br],wr=Sr&&Sr.prototype;wr&&!wr[yr]&&S(wr,yr,br),Yn[br]=Yn.Array}var xr={f:tr},kr=xr.f("iterator"),Er=r(function(t){t.exports={default:kr,__esModule:!0}});n(Er);var Ar=r(function(t){var e=U("meta"),n=m.f,r=0,i=Object.isExtensible||function(){return!0},s=!c(function(){return i(Object.preventExtensions({}))}),o=function(t){n(t,e,{value:{i:"O"+ ++r,w:{}}})},a=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!h(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!A(t,e)){if(!i(t))return"F";if(!n)return"E";o(t)}return t[e].i},getWeak:function(t,n){if(!A(t,e)){if(!i(t))return!0;if(!n)return!1;o(t)}return t[e].w},onFreeze:function(t){return s&&a.NEED&&i(t)&&!A(t,e)&&o(t),t}}}),Fr=(Ar.KEY,Ar.NEED,Ar.fastKey,Ar.getWeak,Ar.onFreeze,m.f),Cr=function(t){var e=s.Symbol||(s.Symbol={});"_"==t.charAt(0)||t in e||Fr(e,t,{value:xr.f(t)})},Tr=Array.isArray||function(t){return"Array"==C(t)},Dr=J.concat("length","prototype"),Pr={f:Object.getOwnPropertyNames||function(t){return G(t,Dr)}},Ir=Pr.f,Rr={}.toString,_r="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Br={f:function(t){return _r&&"[object Window]"==Rr.call(t)?function(t){try{return Ir(t)}catch(t){return _r.slice()}}(t):Ir(P(t))}},Hr=Object.getOwnPropertyDescriptor,Nr={f:f?Hr:function(t,e){if(t=P(t),e=y(e,!0),g)try{return Hr(t,e)}catch(t){}if(A(t,e))return b(!X.f.call(t,e),t[e])}},Or=Ar.KEY,jr=Nr.f,Lr=m.f,Mr=Br.f,Vr=i.Symbol,Ur=i.JSON,Kr=Ur&&Ur.stringify,qr=tr("_hidden"),zr=tr("toPrimitive"),Yr={}.propertyIsEnumerable,Gr=L("symbol-registry"),Jr=L("symbols"),Wr=L("op-symbols"),$r=Object.prototype,Xr="function"==typeof Vr,Zr=i.QObject,Qr=!Zr||!Zr.prototype||!Zr.prototype.findChild,ti=f&&c(function(){return 7!=Qn(Lr({},"a",{get:function(){return Lr(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=jr($r,e);r&&delete $r[e],Lr(t,e,n),r&&t!==$r&&Lr($r,e,r)}:Lr,ei=function(t){var e=Jr[t]=Qn(Vr.prototype);return e._k=t,e},ni=Xr&&"symbol"==typeof Vr.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof Vr},ri=function(t,e,n){return t===$r&&ri(Wr,e,n),u(t),e=y(e,!0),u(n),A(Jr,e)?(n.enumerable?(A(t,qr)&&t[qr][e]&&(t[qr][e]=!1),n=Qn(n,{enumerable:b(0,!1)})):(A(t,qr)||Lr(t,qr,b(1,{})),t[qr][e]=!0),ti(t,e,n)):Lr(t,e,n)},ii=function(t,e){u(t);for(var n,r=function(t){var e=W(t),n=$.f;if(n)for(var r,i=n(t),s=X.f,o=0;i.length>o;)s.call(t,r=i[o++])&&e.push(r);return e}(e=P(e)),i=0,s=r.length;s>i;)ri(t,n=r[i++],e[n]);return t},si=function(t){var e=Yr.call(this,t=y(t,!0));return!(this===$r&&A(Jr,t)&&!A(Wr,t))&&(!(e||!A(this,t)||!A(Jr,t)||A(this,qr)&&this[qr][t])||e)},oi=function(t,e){if(t=P(t),e=y(e,!0),t!==$r||!A(Jr,e)||A(Wr,e)){var n=jr(t,e);return!n||!A(Jr,e)||A(t,qr)&&t[qr][e]||(n.enumerable=!0),n}},ai=function(t){for(var e,n=Mr(P(t)),r=[],i=0;n.length>i;)A(Jr,e=n[i++])||e==qr||e==Or||r.push(e);return r},hi=function(t){for(var e,n=t===$r,r=Mr(n?Wr:P(t)),i=[],s=0;r.length>s;)!A(Jr,e=r[s++])||n&&!A($r,e)||i.push(Jr[e]);return i};Xr||(zn((Vr=function(){if(this instanceof Vr)throw TypeError("Symbol is not a constructor!");var t=U(arguments.length>0?arguments[0]:void 0),e=function(n){this===$r&&e.call(Wr,n),A(this,qr)&&A(this[qr],t)&&(this[qr][t]=!1),ti(this,t,b(1,n))};return f&&Qr&&ti($r,t,{configurable:!0,set:e}),ei(t)}).prototype,"toString",function(){return this._k}),Nr.f=oi,m.f=ri,Pr.f=Br.f=ai,X.f=si,$.f=hi,xr.f=function(t){return ei(tr(t))}),k(k.G+k.W+k.F*!Xr,{Symbol:Vr});for(var ui="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ci=0;ui.length>ci;)tr(ui[ci++]);for(var fi=W(tr.store),li=0;fi.length>li;)Cr(fi[li++]);k(k.S+k.F*!Xr,"Symbol",{for:function(t){return A(Gr,t+="")?Gr[t]:Gr[t]=Vr(t)},keyFor:function(t){if(!ni(t))throw TypeError(t+" is not a symbol!");for(var e in Gr)if(Gr[e]===t)return e},useSetter:function(){Qr=!0},useSimple:function(){Qr=!1}}),k(k.S+k.F*!Xr,"Object",{create:function(t,e){return void 0===e?Qn(t):ii(Qn(t),e)},defineProperty:ri,defineProperties:ii,getOwnPropertyDescriptor:oi,getOwnPropertyNames:ai,getOwnPropertySymbols:hi}),Ur&&k(k.S+k.F*(!Xr||c(function(){var t=Vr();return"[null]"!=Kr([t])||"{}"!=Kr({a:t})||"{}"!=Kr(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(h(e)||void 0!==t)&&!ni(t))return Tr(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!ni(e))return e}),r[1]=e,Kr.apply(Ur,r)}}),Vr.prototype[zr]||S(Vr.prototype,zr,Vr.prototype.valueOf),rr(Vr,"Symbol"),rr(Math,"Math",!0),rr(i.JSON,"JSON",!0),Cr("asyncIterator"),Cr("observable");var di=s.Symbol,pi=r(function(t){t.exports={default:di,__esModule:!0}});n(pi);var gi=r(function(t,e){e.__esModule=!0;var n=s(Er),r=s(pi),i="function"==typeof r.default&&"symbol"==typeof n.default?function(t){return typeof t}:function(t){return t&&"function"==typeof r.default&&t.constructor===r.default&&t!==r.default.prototype?"symbol":typeof t};function s(t){return t&&t.__esModule?t:{default:t}}e.default="function"==typeof r.default&&"symbol"===i(n.default)?function(t){return void 0===t?"undefined":i(t)}:function(t){return t&&"function"==typeof r.default&&t.constructor===r.default&&t!==r.default.prototype?"symbol":void 0===t?"undefined":i(t)}}),yi=n(gi),vi=n(r(function(t,e){e.__esModule=!0;var n,r=(n=gi)&&n.__esModule?n:{default:n};e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,r.default)(e))&&"function"!=typeof e?t:e}})),mi=function(t,e){if(u(t),!h(e)&&null!==e)throw TypeError(e+": can't set as prototype!")},bi={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{(n=a(Function.call,Nr.f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,r){return mi(t,r),e?t.__proto__=r:n(t,r),t}}({},!1):void 0),check:mi};k(k.S,"Object",{setPrototypeOf:bi.set});var Si=s.Object.setPrototypeOf,wi=r(function(t){t.exports={default:Si,__esModule:!0}});n(wi),k(k.S,"Object",{create:Qn});var xi=s.Object,ki=function(t,e){return xi.create(t,e)},Ei=r(function(t){t.exports={default:ki,__esModule:!0}});n(Ei);var Ai,Fi,Ci,Ti=n(r(function(t,e){e.__esModule=!0;var n=s(wi),r=s(Ei),i=s(gi);function s(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":(0,i.default)(e)));t.prototype=(0,r.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(n.default?(0,n.default)(t,e):t.__proto__=e)}})),Di=tr("toStringTag"),Pi="Arguments"==C(function(){return arguments}()),Ii=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Di))?n:Pi?C(e):"Object"==(r=C(e))&&"function"==typeof e.callee?"Arguments":r},Ri=function(t,e,n,r){try{return r?e(u(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&u(i.call(t)),e}},_i=tr("iterator"),Bi=Array.prototype,Hi=tr("iterator"),Ni=s.getIteratorMethod=function(t){if(void 0!=t)return t[Hi]||t["@@iterator"]||Yn[Ii(t)]},Oi=r(function(t){var e={},n={},r=t.exports=function(t,r,i,s,o){var h,c,f,l,d,p=o?function(){return t}:Ni(t),g=a(i,s,r?2:1),y=0;if("function"!=typeof p)throw TypeError(t+" is not iterable!");if(void 0===(d=p)||Yn.Array!==d&&Bi[_i]!==d){for(f=p.call(t);!(c=f.next()).done;)if((l=Ri(f,g,c.value,r))===e||l===n)return l}else for(h=H(t.length);h>y;y++)if((l=r?g(u(c=t[y])[0],c[1]):g(t[y]))===e||l===n)return l};r.BREAK=e,r.RETURN=n}),ji=tr("species"),Li=function(t,e){var n,r=u(t).constructor;return void 0===r||void 0==(n=u(r)[ji])?e:o(n)},Mi=i.process,Vi=i.setImmediate,Ui=i.clearImmediate,Ki=i.MessageChannel,qi=i.Dispatch,zi=0,Yi={},Gi=function(){var t=+this;if(Yi.hasOwnProperty(t)){var e=Yi[t];delete Yi[t],e()}},Ji=function(t){Gi.call(t.data)};Vi&&Ui||(Vi=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return Yi[++zi]=function(){!function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}t.apply(n,e)}("function"==typeof t?t:Function(t),e)},Ai(zi),zi},Ui=function(t){delete Yi[t]},"process"==C(Mi)?Ai=function(t){Mi.nextTick(a(Gi,t,1))}:qi&&qi.now?Ai=function(t){qi.now(a(Gi,t,1))}:Ki?(Ci=(Fi=new Ki).port2,Fi.port1.onmessage=Ji,Ai=a(Ci.postMessage,Ci,1)):i.addEventListener&&"function"==typeof postMessage&&!i.importScripts?(Ai=function(t){i.postMessage(t+"","*")},i.addEventListener("message",Ji,!1)):Ai="onreadystatechange"in p("script")?function(t){Wn.appendChild(p("script")).onreadystatechange=function(){Wn.removeChild(this),Gi.call(t)}}:function(t){setTimeout(a(Gi,t,1),0)});var Wi={set:Vi,clear:Ui},$i=Wi.set,Xi=i.MutationObserver||i.WebKitMutationObserver,Zi=i.process,Qi=i.Promise,ts="process"==C(Zi);var es={f:function(t){return new function(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=o(e),this.reject=o(n)}(t)}},ns=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},rs=function(t,e){if(u(t),h(e)&&e.constructor===t)return e;var n=es.f(t);return(0,n.resolve)(e),n.promise},is=tr("species"),ss=tr("iterator"),os=!1;try{[7][ss]().return=function(){os=!0}}catch(t){}var as,hs,us,cs,fs,ls,ds=Wi.set,ps=function(){var t,e,n,r=function(){var r,i;for(ts&&(r=Zi.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(ts)n=function(){Zi.nextTick(r)};else if(!Xi||i.navigator&&i.navigator.standalone)if(Qi&&Qi.resolve){var s=Qi.resolve();n=function(){s.then(r)}}else n=function(){$i.call(i,r)};else{var o=!0,a=document.createTextNode("");new Xi(r).observe(a,{characterData:!0}),n=function(){a.data=o=!o}}return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}(),gs=i.TypeError,ys=i.process,vs=i.Promise,ms="process"==Ii(ys),bs=function(){},Ss=hs=es.f,ws=!!function(){try{var t=vs.resolve(1),e=(t.constructor={})[tr("species")]=function(t){t(bs,bs)};return(ms||"function"==typeof PromiseRejectionEvent)&&t.then(bs)instanceof e}catch(t){}}(),xs=function(t){var e;return!(!h(t)||"function"!=typeof(e=t.then))&&e},ks=function(t,e){if(!t._n){t._n=!0;var n=t._c;ps(function(){for(var r=t._v,i=1==t._s,s=0,o=function(e){var n,s,o=i?e.ok:e.fail,a=e.resolve,h=e.reject,u=e.domain;try{o?(i||(2==t._h&&Fs(t),t._h=1),!0===o?n=r:(u&&u.enter(),n=o(r),u&&u.exit()),n===e.promise?h(gs("Promise-chain cycle")):(s=xs(n))?s.call(n,a,h):a(n)):h(r)}catch(t){h(t)}};n.length>s;)o(n[s++]);t._c=[],t._n=!1,e&&!t._h&&Es(t)})}},Es=function(t){ds.call(i,function(){var e,n,r,s=t._v,o=As(t);if(o&&(e=ns(function(){ms?ys.emit("unhandledRejection",s,t):(n=i.onunhandledrejection)?n({promise:t,reason:s}):(r=i.console)&&r.error&&r.error("Unhandled promise rejection",s)}),t._h=ms||As(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},As=function(t){return 1!==t._h&&0===(t._a||t._c).length},Fs=function(t){ds.call(i,function(){var e;ms?ys.emit("rejectionHandled",t):(e=i.onrejectionhandled)&&e({promise:t,reason:t._v})})},Cs=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),ks(e,!0))},Ts=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw gs("Promise can't be resolved itself");(e=xs(t))?ps(function(){var r={_w:n,_d:!1};try{e.call(t,a(Ts,r,1),a(Cs,r,1))}catch(t){Cs.call(r,t)}}):(n._v=t,n._s=1,ks(n,!1))}catch(t){Cs.call({_w:n,_d:!1},t)}}};ws||(vs=function(t){!function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!")}(this,vs,"Promise","_h"),o(t),as.call(this);try{t(a(Ts,this,1),a(Cs,this,1))}catch(t){Cs.call(this,t)}},(as=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(t,e,n){for(var r in e)n&&t[r]?t[r]=e[r]:S(t,r,e[r]);return t}(vs.prototype,{then:function(t,e){var n=Ss(Li(this,vs));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=ms?ys.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&ks(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),us=function(){var t=new as;this.promise=t,this.resolve=a(Ts,t,1),this.reject=a(Cs,t,1)},es.f=Ss=function(t){return t===vs||t===cs?new us(t):hs(t)}),k(k.G+k.W+k.F*!ws,{Promise:vs}),rr(vs,"Promise"),ls="function"==typeof s[fs="Promise"]?s[fs]:i[fs],f&&ls&&!ls[is]&&m.f(ls,is,{configurable:!0,get:function(){return this}}),cs=s.Promise,k(k.S+k.F*!ws,"Promise",{reject:function(t){var e=Ss(this);return(0,e.reject)(t),e.promise}}),k(k.S+!0*k.F,"Promise",{resolve:function(t){return rs(this===cs?vs:this,t)}}),k(k.S+k.F*!(ws&&function(t,e){if(!e&&!os)return!1;var n=!1;try{var r=[7],i=r[ss]();i.next=function(){return{done:n=!0}},r[ss]=function(){return i},t(r)}catch(t){}return n}(function(t){vs.all(t).catch(bs)})),"Promise",{all:function(t){var e=this,n=Ss(e),r=n.resolve,i=n.reject,s=ns(function(){var n=[],s=0,o=1;Oi(t,!1,function(t){var a=s++,h=!1;n.push(void 0),o++,e.resolve(t).then(function(t){h||(h=!0,n[a]=t,--o||r(n))},i)}),--o||r(n)});return s.e&&i(s.v),n.promise},race:function(t){var e=this,n=Ss(e),r=n.reject,i=ns(function(){Oi(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}}),k(k.P+k.R,"Promise",{finally:function(t){var e=Li(this,s.Promise||i.Promise),n="function"==typeof t;return this.then(n?function(n){return rs(e,t()).then(function(){return n})}:t,n?function(n){return rs(e,t()).then(function(){throw n})}:t)}}),k(k.S,"Promise",{try:function(t){var e=es.f(this),n=ns(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}});var Ds=s.Promise,Ps=r(function(t){t.exports={default:Ds,__esModule:!0}}),Is=n(Ps);!function(t,e){var n=(s.Object||{})[t]||Object[t],r={};r[t]=e(n),k(k.S+k.F*c(function(){n(1)}),"Object",r)}("keys",function(){return function(t){return W(Z(t))}});var Rs=s.Object.keys,_s=n(r(function(t){t.exports={default:Rs,__esModule:!0}})),Bs=void 0,Hs=!1;try{Hs="[object process]"===Object.prototype.toString.call(it.process)}catch(t){}var Ns={UNIQUE_ID_VALIDATORS:{email:/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i,bitcoin:/^[13][a-km-zA-HJ-NP-Z0-9]{26,33}$/,bitcoin_address:/^[13][a-km-zA-HJ-NP-Z0-9]{26,33}$/,ip:/^(([1-9]?\d|1\d\d|2[0-5][0-5]|2[0-4]\d)\.){3}([1-9]?\d|1\d\d|2[0-5][0-5]|2[0-4]\d)$/,ipv6:/^(?:[A-F0-9]{1,4}:){7}[A-F0-9]{1,4}$/,gpg_fingerprint:null,gpg_keyid:null,google_oauth2:null,tel:/^\d{7,}$/,phone:/^\d{7,}$/,keyID:null,url:/[-a-zA-Z0-9@:%_\+.~#?&//=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&//=]*)?/gi,account:/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i},isNode:Hs,isUniqueType:function(t){return _s(this.UNIQUE_ID_VALIDATORS).indexOf(t)>-1},guessTypeOf:function(t){for(var e in this.UNIQUE_ID_VALIDATORS)if(t.match(this.UNIQUE_ID_VALIDATORS[e]))return e},getPubKeyASN1:function(t){"P-256"===t.curveName&&(t.curveName="secp256r1");var e=Nn.getPEM(t);return On(e)},generateKeyPair:function(){return Nn.generateKeypair("EC","secp256r1")},jwkToPrvKey:function(t){var e=Nn.getKey(t);return e.pubKeyASN1=this.getPubKeyASN1(e),e.keyID=this.getHash(e.pubKeyASN1),e},attributeEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]},generateKey:function(){var t=this.generateKeyPair();return t.prvKeyObj.pubKeyASN1=this.getPubKeyASN1(t.pubKeyObj),t.prvKeyObj.keyID=this.getHash(t.prvKeyObj.pubKeyASN1),t.prvKeyObj},prvKeyToJwk:function(t){return Nn.getJWKFromKey(t)},getHash:function(t){return new bt(new Hn({alg:"sha256",prov:"cryptojs"}).digestString(t),"hex").toString("base64")},_generateAndSerializeKey:function(){return Bs=this.generateKey(),Kn(this.prvKeyToJwk(Bs))},getDefaultKey:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".";if(Bs)return Bs;if(Hs){var e=require("fs"),n=t+"/private.key";if(e.existsSync(n)){var r=e.readFileSync(n,"utf8"),i=JSON.parse(r);Bs=this.jwkToPrvKey(i)}else e.writeFile(n,this._generateAndSerializeKey()),e.chmodSync(n,400)}else{var s=window.localStorage.getItem("identifi.myKey");s?Bs=this.jwkToPrvKey(JSON.parse(s)):window.localStorage.setItem("identifi.myKey",this._generateAndSerializeKey())}return Bs},timeoutPromise:function(t,e){return Is.race([t,new Is(function(t){setTimeout(function(){t()},e)})])}},Os=r(function(t){!function(e){var n,r=Object.prototype,i=r.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",h=s.toStringTag||"@@toStringTag",u=e.regeneratorRuntime;if(u)t.exports=u;else{(u=e.regeneratorRuntime=t.exports).wrap=b;var c="suspendedStart",f="suspendedYield",l="executing",d="completed",p={},g={};g[o]=function(){return this};var y=Object.getPrototypeOf,v=y&&y(y(P([])));v&&v!==r&&i.call(v,o)&&(g=v);var m=k.prototype=w.prototype=Object.create(g);x.prototype=m.constructor=k,k.constructor=x,k[h]=x.displayName="GeneratorFunction",u.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===x||"GeneratorFunction"===(e.displayName||e.name))},u.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,k):(t.__proto__=k,h in t||(t[h]="GeneratorFunction")),t.prototype=Object.create(m),t},u.awrap=function(t){return{__await:t}},E(A.prototype),A.prototype[a]=function(){return this},u.AsyncIterator=A,u.async=function(t,e,n,r){var i=new A(b(t,e,n,r));return u.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},E(m),m[h]="Generator",m[o]=function(){return this},m.toString=function(){return"[object Generator]"},u.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},u.values=P,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(T),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,i){return a.type="throw",a.arg=t,e.next=r,i&&(e.method="next",e.arg=n),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var h=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(h&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(h){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var s=r;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=e,s?(this.method="next",this.next=s.finallyLoc,p):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:P(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),p}}}function b(t,e,n,r){var i=e&&e.prototype instanceof w?e:w,s=Object.create(i.prototype),o=new D(r||[]);return s._invoke=function(t,e,n){var r=c;return function(i,s){if(r===l)throw new Error("Generator is already running");if(r===d){if("throw"===i)throw s;return I()}for(n.method=i,n.arg=s;;){var o=n.delegate;if(o){var a=F(o,n);if(a){if(a===p)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===c)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=l;var h=S(t,e,n);if("normal"===h.type){if(r=n.done?d:f,h.arg===p)continue;return{value:h.arg,done:n.done}}"throw"===h.type&&(r=d,n.method="throw",n.arg=h.arg)}}}(t,n,o),s}function S(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function w(){}function x(){}function k(){}function E(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function A(t){var e;this._invoke=function(n,r){function s(){return new Promise(function(e,s){!function e(n,r,s,o){var a=S(t[n],t,r);if("throw"!==a.type){var h=a.arg,u=h.value;return u&&"object"==typeof u&&i.call(u,"__await")?Promise.resolve(u.__await).then(function(t){e("next",t,s,o)},function(t){e("throw",t,s,o)}):Promise.resolve(u).then(function(t){h.value=t,s(h)},o)}o(a.arg)}(n,r,e,s)})}return e=e?e.then(s,s):s()}}function F(t,e){var r=t.iterator[e.method];if(r===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,F(t,e),"throw"===e.method))return p;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var i=S(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,p;var s=i.arg;return s?s.done?(e[t.resultName]=s.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,p):s:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function D(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function P(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,s=function e(){for(;++r<t.length;)if(i.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=n,e.done=!0,e};return s.next=s}}return{next:I}}function I(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())}),js=function(){return this}()||Function("return this")(),Ls=js.regeneratorRuntime&&Object.getOwnPropertyNames(js).indexOf("regeneratorRuntime")>=0,Ms=Ls&&js.regeneratorRuntime;js.regeneratorRuntime=void 0;var Vs=Os;if(Ls)js.regeneratorRuntime=Ms;else try{delete js.regeneratorRuntime}catch(t){js.regeneratorRuntime=void 0}var Us=Vs,Ks=n(r(function(t,e){e.__esModule=!0;var n,r=(n=Ps)&&n.__esModule?n:{default:n};e.default=function(t){return function(){var e=t.apply(this,arguments);return new r.default(function(t,n){return function i(s,o){try{var a=e[s](o),h=a.value}catch(t){return void n(t)}if(!a.done)return r.default.resolve(h).then(function(t){i("next",t)},function(t){i("throw",t)});t(h)}("next")})}}}));k(k.S,"Number",{isNaN:function(t){return t!=t}});var qs,zs=s.Number.isNaN,Ys=n(r(function(t){t.exports={default:zs,__esModule:!0}})),Gs=r(function(t){!function(){function e(t,e){for(var n=2;n<arguments.length;n++)for(var r=0;r<arguments[n].length;r++)t[e++]=arguments[n].charAt(r)}function n(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,255&t)}function r(t){return String.fromCharCode(255&t,t>>8&255)}t.exports=function(t,i,s){this.width=t,this.height=i,this.depth=s,this.pix_size=i*(t+1),this.data_size=2+this.pix_size+5*Math.floor((65534+this.pix_size)/65535)+4,this.ihdr_offs=0,this.ihdr_size=25,this.plte_offs=this.ihdr_offs+this.ihdr_size,this.plte_size=8+3*s+4,this.trns_offs=this.plte_offs+this.plte_size,this.trns_size=8+s+4,this.idat_offs=this.trns_offs+this.trns_size,this.idat_size=8+this.data_size+4,this.iend_offs=this.idat_offs+this.idat_size,this.iend_size=12,this.buffer_size=this.iend_offs+this.iend_size,this.buffer=new Array,this.palette=new Object,this.pindex=0;for(var o=new Array,a=0;a<this.buffer_size;a++)this.buffer[a]="\0";e(this.buffer,this.ihdr_offs,n(this.ihdr_size-12),"IHDR",n(t),n(i),"\b"),e(this.buffer,this.plte_offs,n(this.plte_size-12),"PLTE"),e(this.buffer,this.trns_offs,n(this.trns_size-12),"tRNS"),e(this.buffer,this.idat_offs,n(this.idat_size-12),"IDAT"),e(this.buffer,this.iend_offs,n(this.iend_size-12),"IEND");var h,u=30912;u+=31-u%31,e(this.buffer,this.idat_offs+8,(h=u,String.fromCharCode(h>>8&255,255&h)));for(a=0;(a<<16)-1<this.pix_size;a++){var c,f;a+65535<this.pix_size?(c=65535,f="\0"):(c=this.pix_size-(a<<16)-a,f=""),e(this.buffer,this.idat_offs+8+2+(a<<16)+(a<<2),f,r(c),r(~c))}for(a=0;a<256;a++){for(var l=a,d=0;d<8;d++)l=1&l?-306674912^l>>1&2147483647:l>>1&2147483647;o[a]=l}this.index=function(t,e){var n=e*(this.width+1)+t+1;return this.idat_offs+8+2+5*Math.floor(n/65535+1)+n},this.color=function(t,e,n,r){var i=(((r=r>=0?r:255)<<8|t)<<8|e)<<8|n;if(void 0===this.palette[i]){if(this.pindex==this.depth)return"\0";var s=this.plte_offs+8+3*this.pindex;this.buffer[s+0]=String.fromCharCode(t),this.buffer[s+1]=String.fromCharCode(e),this.buffer[s+2]=String.fromCharCode(n),this.buffer[this.trns_offs+8+this.pindex]=String.fromCharCode(r),this.palette[i]=String.fromCharCode(this.pindex++)}return this.palette[i]},this.getBase64=function(){var t,e,n,r,i,s,o,a=this.getDump(),h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u=a.length,c=0,f="";do{r=(t=a.charCodeAt(c))>>2,i=(3&t)<<4|(e=a.charCodeAt(c+1))>>4,n=a.charCodeAt(c+2),s=u<c+2?64:(15&e)<<2|n>>6,o=u<c+3?64:63&n,f+=h.charAt(r)+h.charAt(i)+h.charAt(s)+h.charAt(o)}while((c+=3)<u);return f},this.getDump=function(){for(var t=1,r=0,i=5552,s=0;s<this.height;s++)for(var a=-1;a<this.width;a++)r+=t+=this.buffer[this.index(a,s)].charCodeAt(0),0==(i-=1)&&(t%=65521,r%=65521,i=5552);function h(t,r,i){for(var s=-1,a=4;a<i-4;a+=1)s=o[255&(s^t[r+a].charCodeAt(0))]^s>>8&16777215;e(t,r+i-4,n(-1^s))}return t%=65521,r%=65521,e(this.buffer,this.idat_offs+this.idat_size-8,n(r<<16|t)),h(this.buffer,this.ihdr_offs,this.ihdr_size),h(this.buffer,this.plte_offs,this.plte_size),h(this.buffer,this.trns_offs,this.trns_size),h(this.buffer,this.idat_offs,this.idat_size),h(this.buffer,this.iend_offs,this.iend_size),"PNG\r\n\n"+this.buffer.join("")}}}()}),Js=r(function(t){!function(){var e;e=Gs;var n=function(t,e){if("string"!=typeof t||t.length<15)throw"A hash of at least 15 characters is required.";this.defaults={background:[240,240,240,255],margin:.08,size:64,saturation:.7,brightness:.5,format:"png"},this.options="object"==typeof e?e:this.defaults,"number"==typeof arguments[1]&&(this.options.size=arguments[1]),arguments[2]&&(this.options.margin=arguments[2]),this.hash=t,this.background=this.options.background||this.defaults.background,this.size=this.options.size||this.defaults.size,this.format=this.options.format||this.defaults.format,this.margin=void 0!==this.options.margin?this.options.margin:this.defaults.margin;var n=parseInt(this.hash.substr(-7),16)/268435455,r=this.options.saturation||this.defaults.saturation,i=this.options.brightness||this.defaults.brightness;this.foreground=this.options.foreground||this.hsl2rgb(n,r,i)};n.prototype={background:null,foreground:null,hash:null,margin:null,size:null,format:null,image:function(){return this.isSvg()?new r(this.size,this.foreground,this.background):new e(this.size,this.size,256)},render:function(){var t,e,n=this.image(),r=this.size,i=Math.floor(r*this.margin),s=Math.floor((r-2*i)/5),o=Math.floor((r-5*s)/2),a=n.color.apply(n,this.background),h=n.color.apply(n,this.foreground);for(t=0;t<15;t++)e=parseInt(this.hash.charAt(t),16)%2?a:h,t<5?this.rectangle(2*s+o,t*s+o,s,s,e,n):t<10?(this.rectangle(1*s+o,(t-5)*s+o,s,s,e,n),this.rectangle(3*s+o,(t-5)*s+o,s,s,e,n)):t<15&&(this.rectangle(0*s+o,(t-10)*s+o,s,s,e,n),this.rectangle(4*s+o,(t-10)*s+o,s,s,e,n));return n},rectangle:function(t,e,n,r,i,s){var o,a;if(this.isSvg())s.rectangles.push({x:t,y:e,w:n,h:r,color:i});else for(o=t;o<t+n;o++)for(a=e;a<e+r;a++)s.buffer[s.index(o,a)]=i},hsl2rgb:function(t,e,n){return t*=6,[255*(e=[n+=e*=n<.5?n:1-n,n-t%1*e*2,n-=e*=2,n,n+t%1*e,n+e])[~~t%6],255*e[(16|t)%6],255*e[(8|t)%6]]},toString:function(t){return t?this.render().getDump():this.render().getBase64()},isSvg:function(){return this.format.match(/svg/i)}};var r=function(t,e,n){this.size=t,this.foreground=this.color.apply(this,e),this.background=this.color.apply(this,n),this.rectangles=[]};r.prototype={size:null,foreground:null,background:null,rectangles:null,color:function(t,e,n,r){var i=[t,e,n].map(Math.round);return i.push(r>=0&&r<=255?r/255:1),"rgba("+i.join(",")+")"},getDump:function(){var t,e,n,r=this.foreground,i=this.background,s=.005*this.size;for(e="<svg xmlns='http://www.w3.org/2000/svg' width='"+this.size+"' height='"+this.size+"' style='background-color:"+i+";'><g style='fill:"+r+"; stroke:"+r+"; stroke-width:"+s+";'>",t=0;t<this.rectangles.length;t++)(n=this.rectangles[t]).color!=i&&(e+="<rect  x='"+n.x+"' y='"+n.y+"' width='"+n.w+"' height='"+n.h+"'/>");return e+="</g></svg>"},getBase64:function(){if(btoa)return btoa(this.getDump());if(bt)return new bt(this.getDump(),"binary").toString("base64");throw"Cannot generate base64 output"}},t.exports=n}()}),Ws=function(){function t(e){var n=this;if(qn(this,t),this.data=e,this.profile={},this.mostVerifiedAttributes={},e.attrs.length){var r=e.attrs[0];this.data.receivedPositive=r.pos,this.data.receivedNegative=r.neg,this.data.receivedNeutral=r.neut}this.data.receivedNegative|=0,this.data.receivedPositive|=0,this.data.receivedNeutral|=0,this.data.trustDistance|=1e3,this.data.attrs.forEach(function(t){switch(!n.linkTo&&Ns.isUniqueType(t.name)&&(n.linkTo=t),!Ys(parseInt(t.dist))&&t.dist>=0&&t.dist<n.data.trustDistance&&(n.data.trustDistance=parseInt(t.dist),Ns.isUniqueType(t.name)&&(n.linkTo=t)),t.name){case"email":t.iconStyle="glyphicon glyphicon-envelope",t.btnStyle="btn-success",t.link="mailto:"+t.val,t.quickContact=!0;break;case"bitcoin_address":case"bitcoin":t.iconStyle="fa fa-bitcoin",t.btnStyle="btn-primary",t.link="https://blockchain.info/address/"+t.val,t.quickContact=!0;break;case"gpg_fingerprint":case"gpg_keyid":t.iconStyle="fa fa-key",t.btnStyle="btn-default",t.link="https://pgp.mit.edu/pks/lookup?op=get&search=0x"+t.val;break;case"account":t.iconStyle="fa fa-at";break;case"nickname":case"name":t.iconStyle="glyphicon glyphicon-font";break;case"tel":case"phone":t.iconStyle="glyphicon glyphicon-earphone",t.btnStyle="btn-success",t.link="tel:"+t.val,t.quickContact=!0;break;case"keyID":t.iconStyle="fa fa-key";break;case"url":t.link=t.val,t.val.indexOf("facebook.com/")>-1?(t.iconStyle="fa fa-facebook",t.btnStyle="btn-facebook",t.link=t.val,t.linkName=t.val.split("facebook.com/")[1],t.quickContact=!0):t.val.indexOf("twitter.com/")>-1?(t.iconStyle="fa fa-twitter",t.btnStyle="btn-twitter",t.link=t.val,t.linkName=t.val.split("twitter.com/")[1],t.quickContact=!0):t.val.indexOf("plus.google.com/")>-1?(t.iconStyle="fa fa-google-plus",t.btnStyle="btn-google-plus",t.link=t.val,t.linkName=t.val.split("plus.google.com/")[1],t.quickContact=!0):t.val.indexOf("linkedin.com/")>-1?(t.iconStyle="fa fa-linkedin",t.btnStyle="btn-linkedin",t.link=t.val,t.linkName=t.val.split("linkedin.com/")[1],t.quickContact=!0):t.val.indexOf("github.com/")>-1?(t.iconStyle="fa fa-github",t.btnStyle="btn-github",t.link=t.val,t.linkName=t.val.split("github.com/")[1],t.quickContact=!0):(t.iconStyle="glyphicon glyphicon-link",t.btnStyle="btn-default")}var e=_s(n.mostVerifiedAttributes).indexOf(t.name)>-1;2*t.conf>3*t.ref&&(!e||t.conf-t.ref>n.mostVerifiedAttributes[t.name].verificationScore)&&(n.mostVerifiedAttributes[t.name]={attribute:t,verificationScore:t.conf-t.ref})}),_s(this.mostVerifiedAttributes).forEach(function(t){["name","nickname","email","url","coverPhoto","profilePhoto"].indexOf(t)>-1&&(n.profile[t]=n.mostVerifiedAttributes[t].attribute.val)})}return t.prototype.verified=function(t){return this.mostVerifiedAttributes.hasOwnProperty(t)?this.mostVerifiedAttributes[t].attribute.val:void 0},t.prototype.profileCard=function(){var t=document.createElement("div");t.className="identifi-card";var e=this.identicon(60);e.style.order=1,e.style.flexShrink=0,e.style.marginRight="15px";var n=document.createElement("div");n.style.padding="5px",n.style.order=2,n.style.flexGrow=1;var r="https://identi.fi/#/identities/"+this.linkTo.name+"/"+this.linkTo.val;n.innerHTML='<a href="'+r+'">'+(this.profile.name||this.profile.nickname||this.linkTo.name+":"+this.linkTo.val)+"</a><br>",n.innerHTML+='<small>Received: <span class="identifi-pos">+'+(this.data.receivedPositive||0)+'</span> / <span class="identifi-neg">-'+(this.data.receivedNegative||0)+"</span></small><br>";var i=document.createElement("small");return this.data.attrs.forEach(function(t){t.link&&(i.innerHTML+=t.name+': <a href="'+t.link+'">'+t.val+"</a> ")}),n.appendChild(i),t.appendChild(e),t.appendChild(n),t},t.appendSearchWidget=function(t,e){var n=this,r=document.createElement("form"),i=document.createElement("input");i.type="text",i.placeholder="Search",i.id="identifiSearchInput",r.innerHTML+='<div id="identifiSearchResults"></div>';var s=document.createElement("div");t.appendChild(r),r.appendChild(i),r.appendChild(s),i.addEventListener("keyup",Ks(Us.mark(function t(){var r;return Us.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.search(i.value);case 2:r=t.sent,s.innerHTML="",r.sort(function(t,e){return t.trustDistance-e.trustDistance}),r.forEach(function(t){s.appendChild(t.profileCard())});case 6:case"end":return t.stop()}},t,n)})))},t._ordinal=function(t){var e=["th","st","nd","rd"],n=t%100;return t+(e[(n-20)%10]||e[n]||e[0])},t._injectCss=function(){if(!document.getElementById("identifiStyle")){var t=document.createElement("style");t.id="identifiStyle",t.innerHTML="\n      .identifi-identicon * {\n        box-sizing: border-box;\n      }\n\n      .identifi-identicon {\n        vertical-align: middle;\n        margin: auto;\n        border-radius: 50%;\n        text-align: center;\n        display: inline-block;\n        position: relative;\n        margin: auto;\n        max-width: 100%;\n      }\n\n      .identifi-distance {\n        z-index: 2;\n        position: absolute;\n        left:0%;\n        top:2px;\n        width: 100%;\n        text-align: right;\n        color: #fff;\n        text-shadow: 0 0 1px #000;\n        font-size: 75%;\n        line-height: 75%;\n        font-weight: bold;\n      }\n\n      .identifi-pie {\n        border-radius: 50%;\n        position: absolute;\n        top: 0;\n        left: 0;\n        box-shadow: 0px 0px 0px 0px #82FF84;\n        padding-bottom: 100%;\n        max-width: 100%;\n        -webkit-transition: all 0.2s ease-in-out;\n        -moz-transition: all 0.2s ease-in-out;\n        transition: all 0.2s ease-in-out;\n      }\n\n      .identifi-card {\n        padding: 10px;\n        background-color: #f7f7f7;\n        color: #777;\n        border: 1px solid #ddd;\n        display: flex;\n        flex-direction: row;\n        overflow: hidden;\n      }\n\n      .identifi-card a {\n        -webkit-transition: color 150ms;\n        transition: color 150ms;\n        text-decoration: none;\n        color: #337ab7;\n      }\n\n      .identifi-card a:hover, .identifi-card a:active {\n        text-decoration: underline;\n        color: #23527c;\n      }\n\n      .identifi-pos {\n        color: #3c763d;\n      }\n\n      .identifi-neg {\n        color: #a94442;\n      }\n\n      .identifi-identicon img {\n        position: absolute;\n        top: 0;\n        left: 0;\n        max-width: 100%;\n        border-radius: 50%;\n        border-color: transparent;\n        border-style: solid;\n      }",document.body.appendChild(t)}},t.prototype.identicon=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t._injectCss();var i=document.createElement("div");i.className="identifi-identicon",i.style.width=e+"px",i.style.height=e+"px";var s="rgba(0,0,0,0.2)",o="none",a="",h="0px 0px 0px 0px #82FF84";this.data.receivedPositive>20*this.data.receivedNegative?h="0px 0px "+n*this.data.receivedPositive/50+"px 0px #82FF84":this.data.receivedPositive<3*this.data.receivedNegative&&(h="0px 0px "+n*this.data.receivedNegative/10+"px 0px #BF0400"),this.data.receivedPositive+this.data.receivedNegative>0&&(this.data.receivedPositive>this.data.receivedNegative?(a="rotate("+(-this.data.receivedPositive/(this.data.receivedPositive+this.data.receivedNegative)*360-180)/2+"deg)",s="#A94442",o="linear-gradient("+this.data.receivedPositive/(this.data.receivedPositive+this.data.receivedNegative)*360+"deg, transparent 50%, #3C763D 50%), linear-gradient(0deg, #3C763D 50%, transparent 50%)"):(a="rotate("+((-this.data.receivedNegative/(this.data.receivedPositive+this.data.receivedNegative)*360-180)/2+180)+"deg)",s="#3C763D",o="linear-gradient("+this.data.receivedNegative/(this.data.receivedPositive+this.data.receivedNegative)*360+"deg, transparent 50%, #A94442 50%), linear-gradient(0deg, #A94442 50%, transparent 50%)"));var u=document.createElement("div");u.className="identifi-pie",u.style.backgroundColor=s,u.style.backgroundImage=o,u.style.width=e+"px",u.style.boxShadow=h,u.style.opacity=(this.data.receivedPositive+this.data.receivedNegative)/10*.5+.35,u.style.transform=a;var c=new Hn({alg:"md5",prov:"cryptojs"}).digestString(Kn(this.linkTo)),f=new Js(c,{width:e,format:"svg"}),l=document.createElement("img");if(l.src="data:image/svg+xml;base64,"+f.toString(),l.alt="",l.width=e,l.style.borderWidth=n+"px",r){var d=document.createElement("span");d.textContent=this.data.trustDistance<1e3?t._ordinal(this.data.trustDistance):"–",d.className="identifi-distance",d.style.fontSize=e>50?e/4+"px":"10px",i.appendChild(d)}return i.appendChild(u),i.appendChild(l),i},t}(),$s="Invalid Identifi message:",Xs=function(t){function e(){return qn(this,e),vi(this,t.apply(this,arguments))}return Ti(e,t),e}(Error),Zs=function(){function t(e){qn(this,t),this.signedData=e,this.validate()}return t.prototype.getSignerKeyID=function(){return Ns.getHash(this.jwsHeader.key||this.jwsHeader.kid)},t.prototype.validate=function(){if(!this.signedData)throw new Xs($s+" Missing signedData");if("object"!=typeof this.signedData)throw new Xs($s+" signedData must be an object");var t=this.signedData;if(!t.type)throw new Xs($s+" Missing type definition");if(!t.author)throw new Xs($s+" Missing author");if(!t.author.length)throw new Xs($s+" Author empty");var e=void 0,n=void 0;for(this.jwsHeader&&(this.signerKeyHash=this.getSignerKeyID()),e=0;e<t.author.length;e++){if(2!==t.author[e].length)throw new Xs($s+" Invalid author: "+t.author[e].toString());if("keyID"===t.author[e][0]){if(n)throw new Xs($s+" Author may have only one keyID");if(n=t.author[e][1],this.signerKeyHash&&n!==this.signerKeyHash)throw new Xs($s+" If message has a keyID author, it must be signed by the same key")}}if(!t.recipient)throw new Xs($s+" Missing recipient");if(!t.recipient.length)throw new Xs($s+" Author empty");for(e=0;e<t.recipient.length;e++)if(2!==t.recipient[e].length)throw new Xs($s+" Invalid recipient: "+t.recipient[e].toString());if(!t.timestamp)throw new Xs($s+" Missing timestamp");if(!Date.parse(t.timestamp))throw new Xs($s+" Invalid timestamp");if("rating"===t.type){if(isNaN(t.rating))throw new Xs($s+" Invalid rating");if(isNaN(t.maxRating))throw new Xs($s+" Invalid maxRating");if(isNaN(t.minRating))throw new Xs($s+" Invalid minRating");if(t.rating>t.maxRating)throw new Xs($s+" Rating is above maxRating");if(t.rating<t.minRating)throw new Xs($s+" Rating is below minRating");if("string"!=typeof t.context||!t.context.length)throw new Xs($s+" Rating messages must have a context field")}if(("verify_identity"===t.type||"unverify_identity"===t.type)&&t.recipient.length<2)throw new Xs($s+" At least 2 recipient attributes are needed for a connection / disconnection");return!0},t.prototype.isPositive=function(){return this.signedData.rating>(this.signedData.maxRating+this.signedData.minRating)/2},t.prototype.sign=function(e,n){return this.jwsHeader={alg:"ES256",key:e.pubKeyASN1},this.jws=Ln.JWS.sign(this.jwsHeader.alg,Kn(this.jwsHeader),Kn(this.signedData),e),n||t.validateJws(this.jws),this.getHash(),this},t.create=function(e,n){!e.author&&n&&(e.author=[["keyID",n.keyID]]),e.timestamp=e.timestamp||(new Date).toISOString(),e.context=e.context||"identifi";var r=new t(e);return n&&r.sign(n),r},t.createVerification=function(e,n){return e.type="verification",t.create(e,n)},t.createRating=function(e,n){return e.type="rating",e.maxRating=e.maxRating||10,e.minRating=e.minRating||-10,t.create(e,n)},t.fromJws=function(e){t.validateJws(e);var n=Ln.JWS.parse(e),r=new t(n.payloadObj);return r.hash=t.getHash(e),r.jwsHeader=n.headerObj,r.jws=e,r},t.prototype.getAuthor=function(t){if(!t){var e=[];this.signedData.author.forEach(function(t){e.push({name:t[0],val:t[1]})});var n=new Ws({attrs:e});return this.hasOwnProperty("authorPos")&&this.hasOwnProperty("authorNeg")&&(n.data.receivedPositive=this.authorPos,n.data.receivedNegative=this.authorNeg),this.hasOwnProperty("authorTrustDistance")&&(n.data.trustDistance=this.authorTrustDistance),this.authorName&&(n.profile.name=this.authorName),n}},t.prototype.getRecipient=function(t){if(!t){var e=[];this.signedData.recipient.forEach(function(t){e.push({name:t[0],val:t[1]})});var n=new Ws({attrs:e});return this.hasOwnProperty("recipientPos")&&this.hasOwnProperty("recipientNeg")&&(n.data.receivedPositive=this.recipientPos,n.data.receivedNegative=this.recipientNeg),this.hasOwnProperty("recipientTrustDistance")&&(n.data.trustDistance=this.recipientTrustDistance),this.recipientName&&(n.profile.name=this.recipientName),n}},t.prototype.getHash=function(){return this.jws&&!this.hash&&(this.hash=t.getHash(this.jws)),this.hash},t.getHash=function(t){return new bt(new Hn({alg:"sha256",prov:"cryptojs"}).digestString(t),"hex").toString("base64")},t.prototype.verify=function(){var e=this.jwsHeader.key||this.jwsHeader.kid,n=jn.ASN1Util.getPEMStringFromHex(e,"PUBLIC KEY"),r=Nn.getKey(n);if(!Ln.JWS.verify(this.jws,r,[this.jwsHeader.alg]))throw new Xs($s+" Invalid signature");if(this.hash){if(this.hash!==t.getHash(this.jws))throw new Xs($s+" Invalid message hash")}else this.getHash();return!0},t.validateJws=function(t){if("string"!=typeof t)throw new Xs($s+" Message JWS must be a string");if(t.length>1e4)throw new Xs($s+" Message JWS max length is 10000");return!0},t}(),Qs=X.f,to=(qs=!1,function(t){for(var e,n=P(t),r=W(n),i=r.length,s=0,o=[];i>s;)Qs.call(n,e=r[s++])&&o.push(qs?[e,n[e]]:n[e]);return o});k(k.S,"Object",{values:function(t){return to(t)}});var eo=s.Object.values,no=n(r(function(t){t.exports={default:eo,__esModule:!0}})),ro="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",io="["+ro+"]",so=RegExp("^"+io+io+"*"),oo=RegExp(io+io+"*$"),ao=function(t,e,n){var r={},i=c(function(){return!!ro[t]()||"​"!="​"[t]()}),s=r[t]=i?e(ho):ro[t];n&&(r[n]=s),k(k.P+k.F*i,"String",r)},ho=ao.trim=function(t,e){return t=String(D(t)),1&e&&(t=t.replace(so,"")),2&e&&(t=t.replace(oo,"")),t},uo=ao,co=i.parseInt,fo=uo.trim,lo=/^[-+]?0[xX]/,po=8!==co(ro+"08")||22!==co(ro+"0x16")?function(t,e){var n=fo(String(t),3);return co(n,e>>>0||(lo.test(n)?16:10))}:co;k(k.S+k.F*(Number.parseInt!=po),"Number",{parseInt:po});var go=parseInt,yo=n(r(function(t){t.exports={default:go,__esModule:!0}})),vo={},mo=Object.freeze({default:vo});function bo(){throw new Error("setTimeout has not been defined")}function So(){throw new Error("clearTimeout has not been defined")}var wo=bo,xo=So;function ko(t){if(wo===setTimeout)return setTimeout(t,0);if((wo===bo||!wo)&&setTimeout)return wo=setTimeout,setTimeout(t,0);try{return wo(t,0)}catch(e){try{return wo.call(null,t,0)}catch(e){return wo.call(this,t,0)}}}"function"==typeof it.setTimeout&&(wo=setTimeout),"function"==typeof it.clearTimeout&&(xo=clearTimeout);var Eo,Ao=[],Fo=!1,Co=-1;function To(){Fo&&Eo&&(Fo=!1,Eo.length?Ao=Eo.concat(Ao):Co=-1,Ao.length&&Do())}function Do(){if(!Fo){var t=ko(To);Fo=!0;for(var e=Ao.length;e;){for(Eo=Ao,Ao=[];++Co<e;)Eo&&Eo[Co].run();Co=-1,e=Ao.length}Eo=null,Fo=!1,function(t){if(xo===clearTimeout)return clearTimeout(t);if((xo===So||!xo)&&clearTimeout)return xo=clearTimeout,clearTimeout(t);try{xo(t)}catch(e){try{return xo.call(null,t)}catch(e){return xo.call(this,t)}}}(t)}}function Po(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];Ao.push(new Io(t,e)),1!==Ao.length||Fo||ko(Do)}function Io(t,e){this.fun=t,this.array=e}Io.prototype.run=function(){this.fun.apply(null,this.array)};function Ro(){}var _o=Ro,Bo=Ro,Ho=Ro,No=Ro,Oo=Ro,jo=Ro,Lo=Ro;var Mo=it.performance||{},Vo=Mo.now||Mo.mozNow||Mo.msNow||Mo.oNow||Mo.webkitNow||function(){return(new Date).getTime()};var Uo=new Date;var Ko,qo,zo={nextTick:Po,title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:_o,addListener:Bo,once:Ho,off:No,removeListener:Oo,removeAllListeners:jo,emit:Lo,binding:function(t){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(t){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var e=.001*Vo.call(Mo),n=Math.floor(e),r=Math.floor(e%1*1e9);return t&&(n-=t[0],(r-=t[1])<0&&(n--,r+=1e9)),[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-Uo)/1e3}},Yo=ea(it.fetch)&&ea(it.ReadableStream);function Go(t){qo||(qo=new it.XMLHttpRequest).open("GET",it.location.host?"/":"https://example.com");try{return qo.responseType=t,qo.responseType===t}catch(t){return!1}}var Jo=void 0!==it.ArrayBuffer,Wo=Jo&&ea(it.ArrayBuffer.prototype.slice),$o=Jo&&Go("arraybuffer"),Xo=!Yo&&Wo&&Go("ms-stream"),Zo=!Yo&&Jo&&Go("moz-chunked-arraybuffer"),Qo=ea(qo.overrideMimeType),ta=ea(it.VBArray);function ea(t){return"function"==typeof t}qo=null;var na="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t},ra=/%[sdj%]/g;var ia,sa={};function oa(t,e){var n={seen:[],stylize:ha};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),la(e)?n.showHidden=e:e&&function(t,e){if(!e||!va(e))return t;var n=Object.keys(e),r=n.length;for(;r--;)t[n[r]]=e[n[r]]}(n,e),ga(n.showHidden)&&(n.showHidden=!1),ga(n.depth)&&(n.depth=2),ga(n.colors)&&(n.colors=!1),ga(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=aa),ua(n,t,n.depth)}function aa(t,e){var n=oa.styles[e];return n?"["+oa.colors[n][0]+"m"+t+"["+oa.colors[n][1]+"m":t}function ha(t,e){return t}function ua(t,e,n){if(t.customInspect&&e&&Sa(e.inspect)&&e.inspect!==oa&&(!e.constructor||e.constructor.prototype!==e)){var r=e.inspect(n,t);return pa(r)||(r=ua(t,r,n)),r}var i=function(t,e){if(ga(e))return t.stylize("undefined","undefined");if(pa(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(r=e,"number"==typeof r)return t.stylize(""+e,"number");var r;if(la(e))return t.stylize(""+e,"boolean");if(da(e))return t.stylize("null","null")}(t,e);if(i)return i;var s=Object.keys(e),o=function(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(e)),ba(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return ca(e);if(0===s.length){if(Sa(e)){var a=e.name?": "+e.name:"";return t.stylize("[Function"+a+"]","special")}if(ya(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(ma(e))return t.stylize(Date.prototype.toString.call(e),"date");if(ba(e))return ca(e)}var h,u,c="",f=!1,l=["{","}"];(h=e,Array.isArray(h)&&(f=!0,l=["[","]"]),Sa(e))&&(c=" [Function"+(e.name?": "+e.name:"")+"]");return ya(e)&&(c=" "+RegExp.prototype.toString.call(e)),ma(e)&&(c=" "+Date.prototype.toUTCString.call(e)),ba(e)&&(c=" "+ca(e)),0!==s.length||f&&0!=e.length?n<0?ya(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),u=f?function(t,e,n,r,i){for(var s=[],o=0,a=e.length;o<a;++o)ka(e,String(o))?s.push(fa(t,e,n,r,String(o),!0)):s.push("");return i.forEach(function(i){i.match(/^\d+$/)||s.push(fa(t,e,n,r,i,!0))}),s}(t,e,n,o,s):s.map(function(r){return fa(t,e,n,o,r,f)}),t.seen.pop(),function(t,e,n){if(t.reduce(function(t,e){return 0,e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1];return n[0]+e+" "+t.join(", ")+" "+n[1]}(u,c,l)):l[0]+c+l[1]}function ca(t){return"["+Error.prototype.toString.call(t)+"]"}function fa(t,e,n,r,i,s){var o,a,h;if((h=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?a=h.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):h.set&&(a=t.stylize("[Setter]","special")),ka(r,i)||(o="["+i+"]"),a||(t.seen.indexOf(h.value)<0?(a=da(n)?ua(t,h.value,null):ua(t,h.value,n-1)).indexOf("\n")>-1&&(a=s?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n")):a=t.stylize("[Circular]","special")),ga(o)){if(s&&i.match(/^\d+$/))return a;(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=t.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=t.stylize(o,"string"))}return o+": "+a}function la(t){return"boolean"==typeof t}function da(t){return null===t}function pa(t){return"string"==typeof t}function ga(t){return void 0===t}function ya(t){return va(t)&&"[object RegExp]"===xa(t)}function va(t){return"object"==typeof t&&null!==t}function ma(t){return va(t)&&"[object Date]"===xa(t)}function ba(t){return va(t)&&("[object Error]"===xa(t)||t instanceof Error)}function Sa(t){return"function"==typeof t}function wa(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function xa(t){return Object.prototype.toString.call(t)}function ka(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ea(){}function Aa(){Aa.init.call(this)}function Fa(t){return void 0===t._maxListeners?Aa.defaultMaxListeners:t._maxListeners}function Ca(t,e,n,r){var i,s,o,a;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((s=t._events)?(s.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]):(s=t._events=new Ea,t._eventsCount=0),o){if("function"==typeof o?o=s[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),!o.warned&&(i=Fa(t))&&i>0&&o.length>i){o.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=t,h.type=e,h.count=o.length,a=h,"function"==typeof console.warn?console.warn(a):console.log(a)}}else o=s[e]=n,++t._eventsCount;return t}function Ta(t,e,n){var r=!1;function i(){t.removeListener(e,i),r||(r=!0,n.apply(t,arguments))}return i.listener=n,i}function Da(t){var e=this._events;if(e){var n=e[t];if("function"==typeof n)return 1;if(n)return n.length}return 0}function Pa(t,e){for(var n=new Array(e);e--;)n[e]=t[e];return n}function Ia(){this.head=null,this.tail=null,this.length=0}oa.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},oa.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},Ea.prototype=Object.create(null),Aa.EventEmitter=Aa,Aa.usingDomains=!1,Aa.prototype.domain=void 0,Aa.prototype._events=void 0,Aa.prototype._maxListeners=void 0,Aa.defaultMaxListeners=10,Aa.init=function(){this.domain=null,Aa.usingDomains&&(!(void 0).active||this instanceof(void 0).Domain||(this.domain=(void 0).active)),this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new Ea,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Aa.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},Aa.prototype.getMaxListeners=function(){return Fa(this)},Aa.prototype.emit=function(t){var e,n,r,i,s,o,a,h="error"===t;if(o=this._events)h=h&&null==o.error;else if(!h)return!1;if(a=this.domain,h){if(e=arguments[1],!a){if(e instanceof Error)throw e;var u=new Error('Uncaught, unspecified "error" event. ('+e+")");throw u.context=e,u}return e||(e=new Error('Uncaught, unspecified "error" event')),e.domainEmitter=this,e.domain=a,e.domainThrown=!1,a.emit("error",e),!1}if(!(n=o[t]))return!1;var c="function"==typeof n;switch(r=arguments.length){case 1:!function(t,e,n){if(e)t.call(n);else for(var r=t.length,i=Pa(t,r),s=0;s<r;++s)i[s].call(n)}(n,c,this);break;case 2:!function(t,e,n,r){if(e)t.call(n,r);else for(var i=t.length,s=Pa(t,i),o=0;o<i;++o)s[o].call(n,r)}(n,c,this,arguments[1]);break;case 3:!function(t,e,n,r,i){if(e)t.call(n,r,i);else for(var s=t.length,o=Pa(t,s),a=0;a<s;++a)o[a].call(n,r,i)}(n,c,this,arguments[1],arguments[2]);break;case 4:!function(t,e,n,r,i,s){if(e)t.call(n,r,i,s);else for(var o=t.length,a=Pa(t,o),h=0;h<o;++h)a[h].call(n,r,i,s)}(n,c,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),s=1;s<r;s++)i[s-1]=arguments[s];!function(t,e,n,r){if(e)t.apply(n,r);else for(var i=t.length,s=Pa(t,i),o=0;o<i;++o)s[o].apply(n,r)}(n,c,this,i)}return!0},Aa.prototype.addListener=function(t,e){return Ca(this,t,e,!1)},Aa.prototype.on=Aa.prototype.addListener,Aa.prototype.prependListener=function(t,e){return Ca(this,t,e,!0)},Aa.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,Ta(this,t,e)),this},Aa.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,Ta(this,t,e)),this},Aa.prototype.removeListener=function(t,e){var n,r,i,s,o;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[t]))return this;if(n===e||n.listener&&n.listener===e)0==--this._eventsCount?this._events=new Ea:(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,s=n.length;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){o=n[s].listener,i=s;break}if(i<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new Ea,this;delete r[t]}else!function(t,e){for(var n=e,r=n+1,i=t.length;r<i;n+=1,r+=1)t[n]=t[r];t.pop()}(n,i);r.removeListener&&this.emit("removeListener",t,o||e)}return this},Aa.prototype.removeAllListeners=function(t){var e,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new Ea,this._eventsCount=0):n[t]&&(0==--this._eventsCount?this._events=new Ea:delete n[t]),this;if(0===arguments.length){for(var r,i=Object.keys(n),s=0;s<i.length;++s)"removeListener"!==(r=i[s])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new Ea,this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(e)do{this.removeListener(t,e[e.length-1])}while(e[0]);return this},Aa.prototype.listeners=function(t){var e,n=this._events;return n&&(e=n[t])?"function"==typeof e?[e.listener||e]:function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(e):[]},Aa.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):Da.call(t,e)},Aa.prototype.listenerCount=Da,Aa.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]},Ia.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},Ia.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},Ia.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},Ia.prototype.clear=function(){this.head=this.tail=null,this.length=0},Ia.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},Ia.prototype.concat=function(t){if(0===this.length)return bt.alloc(0);if(1===this.length)return this.head.data;for(var e=bt.allocUnsafe(t>>>0),n=this.head,r=0;n;)n.data.copy(e,r),r+=n.data.length,n=n.next;return e};var Ra=bt.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function _a(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),function(t){if(t&&!Ra(t))throw new Error("Unknown encoding: "+t)}(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=Ha;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=Na;break;default:return void(this.write=Ba)}this.charBuffer=new bt(6),this.charReceived=0,this.charLength=0}function Ba(t){return t.toString(this.encoding)}function Ha(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function Na(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}_a.prototype.write=function(t){for(var e="";this.charLength;){var n=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";if(t=t.slice(n,t.length),!((i=(e=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(e.length-1))>=55296&&i<=56319)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var r=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,r),r-=this.charReceived);var i;r=(e+=t.toString(this.encoding,0,r)).length-1;if((i=e.charCodeAt(r))>=55296&&i<=56319){var s=this.surrogateSize;return this.charLength+=s,this.charReceived+=s,this.charBuffer.copy(this.charBuffer,s,0,s),t.copy(this.charBuffer,0,0,s),e.substring(0,r)}return e},_a.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var n=t[t.length-e];if(1==e&&n>>5==6){this.charLength=2;break}if(e<=2&&n>>4==14){this.charLength=3;break}if(e<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=e},_a.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;e+=r.slice(0,n).toString(i)}return e},La.ReadableState=ja;var Oa=function(t){ga(ia)&&(ia=zo.env.NODE_DEBUG||""),t=t.toUpperCase(),sa[t]||(new RegExp("\\b"+t+"\\b","i").test(ia)?sa[t]=function(){var e=function(t){if(!pa(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(oa(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,i=r.length,s=String(t).replace(ra,function(t){if("%%"===t)return"%";if(n>=i)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}}),o=r[n];n<i;o=r[++n])da(o)||!va(o)?s+=" "+o:s+=" "+oa(o);return s}.apply(null,arguments);console.error("%s %d: %s",t,0,e)}:sa[t]=function(){});return sa[t]}("stream");function ja(t,e){t=t||{},this.objectMode=!!t.objectMode,e instanceof lh&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var n=t.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r,this.highWaterMark=~~this.highWaterMark,this.buffer=new Ia,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(this.decoder=new _a(t.encoding),this.encoding=t.encoding)}function La(t){if(!(this instanceof La))return new La(t);this._readableState=new ja(t,this),this.readable=!0,t&&"function"==typeof t.read&&(this._read=t.read),Aa.call(this)}function Ma(t,e,n,r,i){var s=function(t,e){var n=null;ee(e)||"string"==typeof e||null===e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));return n}(e,n);if(s)t.emit("error",s);else if(null===n)e.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,Ka(t)}(t,e);else if(e.objectMode||n&&n.length>0)if(e.ended&&!i){var o=new Error("stream.push() after EOF");t.emit("error",o)}else if(e.endEmitted&&i){var a=new Error("stream.unshift() after end event");t.emit("error",a)}else{var h;!e.decoder||i||r||(n=e.decoder.write(n),h=!e.objectMode&&0===n.length),i||(e.reading=!1),h||(e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,i?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&Ka(t))),function(t,e){e.readingMore||(e.readingMore=!0,Po(za,t,e))}(t,e)}else i||(e.reading=!1);return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(e)}na(La,Aa),La.prototype.push=function(t,e){var n=this._readableState;return n.objectMode||"string"!=typeof t||(e=e||n.defaultEncoding)!==n.encoding&&(t=bt.from(t,e),e=""),Ma(this,n,t,e,!1)},La.prototype.unshift=function(t){return Ma(this,this._readableState,t,"",!0)},La.prototype.isPaused=function(){return!1===this._readableState.flowing},La.prototype.setEncoding=function(t){return this._readableState.decoder=new _a(t),this._readableState.encoding=t,this};var Va=8388608;function Ua(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=Va?t=Va:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function Ka(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(Oa("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?Po(qa,t):qa(t))}function qa(t){Oa("emit readable"),t.emit("readable"),Ja(t)}function za(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(Oa("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function Ya(t){Oa("readable nexttick read 0"),t.read(0)}function Ga(t,e){e.reading||(Oa("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),Ja(t),e.flowing&&!e.reading&&t.read(0)}function Ja(t){var e=t._readableState;for(Oa("flow",e.flowing);e.flowing&&null!==t.read(););}function Wa(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var r;t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():n?function(t,e){var n=e.head,r=1,i=n.data;t-=i.length;for(;n=n.next;){var s=n.data,o=t>s.length?s.length:t;if(o===s.length?i+=s:i+=s.slice(0,t),0===(t-=o)){o===s.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=s.slice(o));break}++r}return e.length-=r,i}(t,e):function(t,e){var n=bt.allocUnsafe(t),r=e.head,i=1;r.data.copy(n),t-=r.data.length;for(;r=r.next;){var s=r.data,o=t>s.length?s.length:t;if(s.copy(n,n.length-t,0,o),0===(t-=o)){o===s.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=s.slice(o));break}++i}return e.length-=i,n}(t,e);return r}(t,e.buffer,e.decoder),n);var n}function $a(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,Po(Xa,e,t))}function Xa(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function Za(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}function Qa(){}function th(t,e){Object.defineProperty(this,"buffer",{get:function t(e,n){if(ga(it.process))return function(){return t(e,n).apply(this,arguments)};if(!0===zo.noDeprecation)return e;var r=!1;return function(){if(!r){if(zo.throwDeprecation)throw new Error(n);zo.traceDeprecation?console.trace(n):console.error(n),r=!0}return e.apply(this,arguments)}}(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),t=t||{},this.objectMode=!!t.objectMode,e instanceof lh&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var n=t.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var i=!1===t.decodeStrings;this.decodeStrings=!i,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,r,i){--e.pendingcb,n?Po(i,r):i(r);t._writableState.errorEmitted=!0,t.emit("error",r)}(t,n,r,e,i);else{var s=sh(n);s||n.corked||n.bufferProcessing||!n.bufferedRequest||ih(t,n),r?Po(rh,t,n,s,i):rh(t,n,s,i)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new hh(this)}function eh(t){if(!(this instanceof eh||this instanceof lh))return new eh(t);this._writableState=new th(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev)),Aa.call(this)}function nh(t,e,n,r,i,s,o){e.writelen=r,e.writecb=o,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function rh(t,e,n,r){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),ah(t,e)}function ih(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,i=new Array(r),s=e.corkedRequestsFree;s.entry=n;for(var o=0;n;)i[o]=n,n=n.next,o+=1;nh(t,e,!0,e.length,i,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new hh(e)}else{for(;n;){var a=n.chunk,h=n.encoding,u=n.callback;if(nh(t,e,!1,e.objectMode?1:a.length,a,h,u),n=n.next,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=n,e.bufferProcessing=!1}function sh(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function oh(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function ah(t,e){var n=sh(e);return n&&(0===e.pendingcb?(oh(t,e),e.finished=!0,t.emit("finish")):oh(t,e)),n}function hh(t){var e=this;this.next=null,this.entry=null,this.finish=function(n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}}La.prototype.read=function(t){Oa("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return Oa("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?$a(this):Ka(this),null;if(0===(t=Ua(t,e))&&e.ended)return 0===e.length&&$a(this),null;var r,i=e.needReadable;return Oa("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&Oa("length less than watermark",i=!0),e.ended||e.reading?Oa("reading or ended",i=!1):i&&(Oa("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=Ua(n,e))),null===(r=t>0?Wa(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&$a(this)),null!==r&&this.emit("data",r),r},La.prototype._read=function(t){this.emit("error",new Error("not implemented"))},La.prototype.pipe=function(t,e){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=t;break;case 1:r.pipes=[r.pipes,t];break;default:r.pipes.push(t)}r.pipesCount+=1,Oa("pipe count=%d opts=%j",r.pipesCount,e);var i=!e||!1!==e.end?o:u;function s(t){Oa("onunpipe"),t===n&&u()}function o(){Oa("onend"),t.end()}r.endEmitted?Po(i):n.once("end",i),t.on("unpipe",s);var a=function(t){return function(){var e=t._readableState;Oa("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&t.listeners("data").length&&(e.flowing=!0,Ja(t))}}(n);t.on("drain",a);var h=!1;function u(){Oa("cleanup"),t.removeListener("close",d),t.removeListener("finish",p),t.removeListener("drain",a),t.removeListener("error",l),t.removeListener("unpipe",s),n.removeListener("end",o),n.removeListener("end",u),n.removeListener("data",f),h=!0,!r.awaitDrain||t._writableState&&!t._writableState.needDrain||a()}var c=!1;function f(e){Oa("ondata"),c=!1,!1!==t.write(e)||c||((1===r.pipesCount&&r.pipes===t||r.pipesCount>1&&-1!==Za(r.pipes,t))&&!h&&(Oa("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,c=!0),n.pause())}function l(e){var n;Oa("onerror",e),g(),t.removeListener("error",l),0===(n="error",t.listeners(n).length)&&t.emit("error",e)}function d(){t.removeListener("finish",p),g()}function p(){Oa("onfinish"),t.removeListener("close",d),g()}function g(){Oa("unpipe"),n.unpipe(t)}return n.on("data",f),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(t,"error",l),t.once("close",d),t.once("finish",p),t.emit("pipe",n),r.flowing||(Oa("pipe resume"),n.resume()),t},La.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var n=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;i<r;i++)n[i].emit("unpipe",this);return this}var s=Za(e.pipes,t);return-1===s?this:(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)},La.prototype.on=function(t,e){var n=Aa.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&Ka(this):Po(Ya,this))}return n},La.prototype.addListener=La.prototype.on,La.prototype.resume=function(){var t=this._readableState;return t.flowing||(Oa("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,Po(Ga,t,e))}(this,t)),this},La.prototype.pause=function(){return Oa("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(Oa("pause"),this._readableState.flowing=!1,this.emit("pause")),this},La.prototype.wrap=function(t){var e=this._readableState,n=!1,r=this;for(var i in t.on("end",function(){if(Oa("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&r.push(t)}r.push(null)}),t.on("data",function(i){(Oa("wrapped data"),e.decoder&&(i=e.decoder.write(i)),!e.objectMode||null!==i&&void 0!==i)&&((e.objectMode||i&&i.length)&&(r.push(i)||(n=!0,t.pause())))}),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));return function(t,e){for(var n=0,r=t.length;n<r;n++)e(t[n],n)}(["error","close","destroy","pause","resume"],function(e){t.on(e,r.emit.bind(r,e))}),r._read=function(e){Oa("wrapped _read",e),n&&(n=!1,t.resume())},r},La._fromList=Wa,eh.WritableState=th,na(eh,Aa),th.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},eh.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},eh.prototype.write=function(t,e,n){var r=this._writableState,i=!1;return"function"==typeof e&&(n=e,e=null),bt.isBuffer(t)?e="buffer":e||(e=r.defaultEncoding),"function"!=typeof n&&(n=Qa),r.ended?function(t,e){var n=new Error("write after end");t.emit("error",n),Po(e,n)}(this,n):function(t,e,n,r){var i=!0,s=!1;return null===n?s=new TypeError("May not write null values to stream"):bt.isBuffer(n)||"string"==typeof n||void 0===n||e.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(t.emit("error",s),Po(r,s),i=!1),i}(this,r,t,n)&&(r.pendingcb++,i=function(t,e,n,r,i){n=function(t,e,n){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=bt.from(e,n)),e}(e,n,r),bt.isBuffer(n)&&(r="buffer");var s=e.objectMode?1:n.length;e.length+=s;var o=e.length<e.highWaterMark;o||(e.needDrain=!0);if(e.writing||e.corked){var a=e.lastBufferedRequest;e.lastBufferedRequest=new function(t,e,n){this.chunk=t,this.encoding=e,this.callback=n,this.next=null}(n,r,i),a?a.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else nh(t,e,!1,s,n,r,i);return o}(this,r,t,e,n)),i},eh.prototype.cork=function(){this._writableState.corked++},eh.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||ih(this,t))},eh.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},eh.prototype._write=function(t,e,n){n(new Error("not implemented"))},eh.prototype._writev=null,eh.prototype.end=function(t,e,n){var r=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!==t&&void 0!==t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(t,e,n){e.ending=!0,ah(t,e),n&&(e.finished?Po(n):t.once("finish",n));e.ended=!0,t.writable=!1}(this,r,n)},na(lh,La);for(var uh=Object.keys(eh.prototype),ch=0;ch<uh.length;ch++){var fh=uh[ch];lh.prototype[fh]||(lh.prototype[fh]=eh.prototype[fh])}function lh(t){if(!(this instanceof lh))return new lh(t);La.call(this,t),eh.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",dh)}function dh(){this.allowHalfOpen||this._writableState.ended||Po(ph,this)}function ph(t){t.end()}function gh(t){this.afterTransform=function(e,n){return function(t,e,n){var r=t._transformState;r.transforming=!1;var i=r.writecb;if(!i)return t.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,null!==n&&void 0!==n&&t.push(n);i(e);var s=t._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&t._read(s.highWaterMark)}(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function yh(t){if(!(this instanceof yh))return new yh(t);lh.call(this,t),this._transformState=new gh(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(t){vh(e,t)}):vh(e)})}function vh(t,e){if(e)return t.emit("error",e);var n=t._writableState,r=t._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(r.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}function mh(t){if(!(this instanceof mh))return new mh(t);yh.call(this,t)}function bh(){Aa.call(this)}na(yh,lh),yh.prototype.push=function(t,e){return this._transformState.needTransform=!1,lh.prototype.push.call(this,t,e)},yh.prototype._transform=function(t,e,n){throw new Error("Not implemented")},yh.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},yh.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},na(mh,yh),mh.prototype._transform=function(t,e,n){n(null,t)},na(bh,Aa),bh.Readable=La,bh.Writable=eh,bh.Duplex=lh,bh.Transform=yh,bh.PassThrough=mh,bh.Stream=bh,bh.prototype.pipe=function(t,e){var n=this;function r(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause()}function i(){n.readable&&n.resume&&n.resume()}n.on("data",r),t.on("drain",i),t._isStdio||e&&!1===e.end||(n.on("end",o),n.on("close",a));var s=!1;function o(){s||(s=!0,t.end())}function a(){s||(s=!0,"function"==typeof t.destroy&&t.destroy())}function h(t){if(u(),0===Aa.listenerCount(this,"error"))throw t}function u(){n.removeListener("data",r),t.removeListener("drain",i),n.removeListener("end",o),n.removeListener("close",a),n.removeListener("error",h),t.removeListener("error",h),n.removeListener("end",u),n.removeListener("close",u),t.removeListener("close",u)}return n.on("error",h),t.on("error",h),n.on("end",u),n.on("close",u),t.on("close",u),t.emit("pipe",n),t};var Sh=3,wh=4;function xh(t,e,n){var r,i=this;if(La.call(i),i._mode=n,i.headers={},i.rawHeaders=[],i.trailers={},i.rawTrailers=[],i.on("end",function(){Po(function(){i.emit("close")})}),"fetch"===n){i._fetchResponse=e,i.url=e.url,i.statusCode=e.status,i.statusMessage=e.statusText;for(var s,o,a=e.headers[Symbol.iterator]();s=(o=a.next()).value,!o.done;)i.headers[s[0].toLowerCase()]=s[1],i.rawHeaders.push(s[0],s[1]);var h=e.body.getReader();(r=function(){h.read().then(function(t){i._destroyed||(t.done?i.push(null):(i.push(new bt(t.value)),r()))})})()}else{if(i._xhr=t,i._pos=0,i.url=t.responseURL,i.statusCode=t.status,i.statusMessage=t.statusText,t.getAllResponseHeaders().split(/\r?\n/).forEach(function(t){var e=t.match(/^([^:]+):\s*(.*)/);if(e){var n=e[1].toLowerCase();"set-cookie"===n?(void 0===i.headers[n]&&(i.headers[n]=[]),i.headers[n].push(e[2])):void 0!==i.headers[n]?i.headers[n]+=", "+e[2]:i.headers[n]=e[2],i.rawHeaders.push(e[1],e[2])}}),i._charset="x-user-defined",!Qo){var u=i.rawHeaders["mime-type"];if(u){var c=u.match(/;\s*charset=([^;])(;|$)/);c&&(i._charset=c[1].toLowerCase())}i._charset||(i._charset="utf-8")}}}function kh(t){var e,n=this;eh.call(n),n._opts=t,n._body=[],n._headers={},t.auth&&n.setHeader("Authorization","Basic "+new bt(t.auth).toString("base64")),Object.keys(t.headers).forEach(function(e){n.setHeader(e,t.headers[e])});var r=!0;if("disable-fetch"===t.mode)r=!1,e=!0;else if("prefer-streaming"===t.mode)e=!1;else if("allow-wrong-content-type"===t.mode)e=!Qo;else{if(t.mode&&"default"!==t.mode&&"prefer-fast"!==t.mode)throw new Error("Invalid value for opts.mode");e=!0}n._mode=function(t,e){return Yo&&e?"fetch":Zo?"moz-chunked-arraybuffer":Xo?"ms-stream":$o&&t?"arraybuffer":ta&&t?"text:vbarray":"text"}(e,r),n.on("finish",function(){n._onFinish()})}na(xh,La),xh.prototype._read=function(){},xh.prototype._onXHRProgress=function(){var t=this,e=t._xhr,n=null;switch(t._mode){case"text:vbarray":if(e.readyState!==wh)break;try{n=new it.VBArray(e.responseBody).toArray()}catch(t){}if(null!==n){t.push(new bt(n));break}case"text":try{n=e.responseText}catch(e){t._mode="text:vbarray";break}if(n.length>t._pos){var r=n.substr(t._pos);if("x-user-defined"===t._charset){for(var i=new bt(r.length),s=0;s<r.length;s++)i[s]=255&r.charCodeAt(s);t.push(i)}else t.push(r,t._charset);t._pos=n.length}break;case"arraybuffer":if(e.readyState!==wh||!e.response)break;n=e.response,t.push(new bt(new Uint8Array(n)));break;case"moz-chunked-arraybuffer":if(n=e.response,e.readyState!==Sh||!n)break;t.push(new bt(new Uint8Array(n)));break;case"ms-stream":if(n=e.response,e.readyState!==Sh)break;var o=new it.MSStreamReader;o.onprogress=function(){o.result.byteLength>t._pos&&(t.push(new bt(new Uint8Array(o.result.slice(t._pos)))),t._pos=o.result.byteLength)},o.onload=function(){t.push(null)},o.readAsArrayBuffer(n)}t._xhr.readyState===wh&&"ms-stream"!==t._mode&&t.push(null)},na(kh,eh);var Eh=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];kh.prototype.setHeader=function(t,e){var n=t.toLowerCase();-1===Eh.indexOf(n)&&(this._headers[n]={name:t,value:e})},kh.prototype.getHeader=function(t){return this._headers[t.toLowerCase()].value},kh.prototype.removeHeader=function(t){delete this._headers[t.toLowerCase()]},kh.prototype._onFinish=function(){var t=this;if(!t._destroyed){var e,n=t._opts,r=t._headers;if("POST"!==n.method&&"PUT"!==n.method&&"PATCH"!==n.method||(e=function(){if(void 0!==Ko)return Ko;try{new it.Blob([new ArrayBuffer(1)]),Ko=!0}catch(t){Ko=!1}return Ko}()?new it.Blob(t._body.map(function(t){return function(t){if(t instanceof Uint8Array){if(0===t.byteOffset&&t.byteLength===t.buffer.byteLength)return t.buffer;if("function"==typeof t.buffer.slice)return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}if(ee(t)){for(var e=new Uint8Array(t.length),n=t.length,r=0;r<n;r++)e[r]=t[r];return e.buffer}throw new Error("Argument must be a Buffer")}(t)}),{type:(r["content-type"]||{}).value||""}):bt.concat(t._body).toString()),"fetch"===t._mode){var i=Object.keys(r).map(function(t){return[r[t].name,r[t].value]});it.fetch(t._opts.url,{method:t._opts.method,headers:i,body:e,mode:"cors",credentials:n.withCredentials?"include":"same-origin"}).then(function(e){t._fetchResponse=e,t._connect()},function(e){t.emit("error",e)})}else{var s=t._xhr=new it.XMLHttpRequest;try{s.open(t._opts.method,t._opts.url,!0)}catch(e){return void Po(function(){t.emit("error",e)})}"responseType"in s&&(s.responseType=t._mode.split(":")[0]),"withCredentials"in s&&(s.withCredentials=!!n.withCredentials),"text"===t._mode&&"overrideMimeType"in s&&s.overrideMimeType("text/plain; charset=x-user-defined"),Object.keys(r).forEach(function(t){s.setRequestHeader(r[t].name,r[t].value)}),t._response=null,s.onreadystatechange=function(){switch(s.readyState){case Sh:case wh:t._onXHRProgress()}},"moz-chunked-arraybuffer"===t._mode&&(s.onprogress=function(){t._onXHRProgress()}),s.onerror=function(){t._destroyed||t.emit("error",new Error("XHR error"))};try{s.send(e)}catch(e){return void Po(function(){t.emit("error",e)})}}}},kh.prototype._onXHRProgress=function(){(function(t){try{var e=t.status;return null!==e&&0!==e}catch(t){return!1}})(this._xhr)&&!this._destroyed&&(this._response||this._connect(),this._response._onXHRProgress())},kh.prototype._connect=function(){this._destroyed||(this._response=new xh(this._xhr,this._fetchResponse,this._mode),this.emit("response",this._response))},kh.prototype._write=function(t,e,n){this._body.push(t),n()},kh.prototype.abort=kh.prototype.destroy=function(){this._destroyed=!0,this._response&&(this._response._destroyed=!0),this._xhr&&this._xhr.abort()},kh.prototype.end=function(t,e,n){"function"==typeof t&&(n=t,t=void 0),eh.prototype.end.call(this,t,e,n)},kh.prototype.flushHeaders=function(){},kh.prototype.setTimeout=function(){},kh.prototype.setNoDelay=function(){},kh.prototype.setSocketKeepAlive=function(){};var Ah=2147483647,Fh=36,Ch=1,Th=26,Dh=38,Ph=700,Ih=72,Rh=128,_h="-",Bh=/[^\x20-\x7E]/,Hh=/[\x2E\u3002\uFF0E\uFF61]/g,Nh={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Oh=Fh-Ch,jh=Math.floor,Lh=String.fromCharCode;function Mh(t){throw new RangeError(Nh[t])}function Vh(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function Uh(t,e,n){var r=0;for(t=n?jh(t/Ph):t>>1,t+=jh(t/e);t>Oh*Th>>1;r+=Fh)t=jh(t/Oh);return jh(r+(Oh+1)*t/(t+Dh))}function Kh(t){return function(t,e){var n=t.split("@"),r="";n.length>1&&(r=n[0]+"@",t=n[1]);var i=function(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}((t=t.replace(Hh,".")).split("."),e).join(".");return r+i}(t,function(t){return Bh.test(t)?"xn--"+function(t){var e,n,r,i,s,o,a,h,u,c,f,l,d,p,g,y=[];for(l=(t=function(t){for(var e,n,r=[],i=0,s=t.length;i<s;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<s?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}(t)).length,e=Rh,n=0,s=Ih,o=0;o<l;++o)(f=t[o])<128&&y.push(Lh(f));for(r=i=y.length,i&&y.push(_h);r<l;){for(a=Ah,o=0;o<l;++o)(f=t[o])>=e&&f<a&&(a=f);for(a-e>jh((Ah-n)/(d=r+1))&&Mh("overflow"),n+=(a-e)*d,e=a,o=0;o<l;++o)if((f=t[o])<e&&++n>Ah&&Mh("overflow"),f==e){for(h=n,u=Fh;!(h<(c=u<=s?Ch:u>=s+Th?Th:u-s));u+=Fh)g=h-c,p=Fh-c,y.push(Lh(Vh(c+g%p,0))),h=jh(g/p);y.push(Lh(Vh(h,0))),s=Uh(n,d,r==i),n=0,++r}++n,++e}return y.join("")}(t):t})}function qh(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var zh=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function Yh(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}}function Gh(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var Jh=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e};function Wh(t,e,n,r){e=e||"&",n=n||"=";var i={};if("string"!=typeof t||0===t.length)return i;var s=/\+/g;t=t.split(e);var o=1e3;r&&"number"==typeof r.maxKeys&&(o=r.maxKeys);var a=t.length;o>0&&a>o&&(a=o);for(var h=0;h<a;++h){var u,c,f,l,d=t[h].replace(s,"%20"),p=d.indexOf(n);p>=0?(u=d.substr(0,p),c=d.substr(p+1)):(u=d,c=""),f=decodeURIComponent(u),l=decodeURIComponent(c),qh(i,f)?zh(i[f])?i[f].push(l):i[f]=[i[f],l]:i[f]=l}return i}function $h(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var Xh=/^([a-z0-9.+-]+:)/i,Zh=/:[0-9]*$/,Qh=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,tu=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),eu=["'"].concat(tu),nu=["%","/","?",";","#"].concat(eu),ru=["/","?","#"],iu=255,su=/^[+a-z0-9A-Z_-]{0,63}$/,ou=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,au={javascript:!0,"javascript:":!0},hu={javascript:!0,"javascript:":!0},uu={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function cu(t,e,n){if(t&&va(t)&&t instanceof $h)return t;var r=new $h;return r.parse(t,e,n),r}function fu(t){var e=t.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var n,r,i,s,o=t.protocol||"",a=t.pathname||"",h=t.hash||"",u=!1,c="";t.host?u=e+t.host:t.hostname&&(u=e+(-1===t.hostname.indexOf(":")?t.hostname:"["+this.hostname+"]"),t.port&&(u+=":"+t.port)),t.query&&va(t.query)&&Object.keys(t.query).length&&(n=t.query,r=r||"&",i=i||"=",null===n&&(n=void 0),c="object"==typeof n?Gh(Jh(n),function(t){var e=encodeURIComponent(Yh(t))+i;return zh(n[t])?Gh(n[t],function(t){return e+encodeURIComponent(Yh(t))}).join(r):e+encodeURIComponent(Yh(n[t]))}).join(r):s?encodeURIComponent(Yh(s))+i+encodeURIComponent(Yh(n)):"");var f=t.search||c&&"?"+c||"";return o&&":"!==o.substr(-1)&&(o+=":"),t.slashes||(!o||uu[o])&&!1!==u?(u="//"+(u||""),a&&"/"!==a.charAt(0)&&(a="/"+a)):u||(u=""),h&&"#"!==h.charAt(0)&&(h="#"+h),f&&"?"!==f.charAt(0)&&(f="?"+f),o+u+(a=a.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(f=f.replace("#","%23"))+h}function lu(t){var e=t.host,n=Zh.exec(e);n&&(":"!==(n=n[0])&&(t.port=n.substr(1)),e=e.substr(0,e.length-n.length)),e&&(t.hostname=e)}function du(t,e){"string"==typeof t&&(t=cu(t));var n=-1===it.location.protocol.search(/^https?:$/)?"http:":"",r=t.protocol||n,i=t.hostname||t.host,s=t.port,o=t.path||"/";i&&-1!==i.indexOf(":")&&(i="["+i+"]"),t.url=(i?r+"//"+i:"")+(s?":"+s:"")+o,t.method=(t.method||"GET").toUpperCase(),t.headers=t.headers||{};var a=new kh(t);return e&&a.on("response",e),a}function pu(t,e){var n=du(t,e);return n.end(),n}function gu(){}$h.prototype.parse=function(t,e,n){return function(t,e,n,r){if(!pa(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var i=e.indexOf("?"),s=-1!==i&&i<e.indexOf("#")?"?":"#",o=e.split(s);o[0]=o[0].replace(/\\/g,"/");var a=e=o.join(s);if(a=a.trim(),!r&&1===e.split("#").length){var h=Qh.exec(a);if(h)return t.path=a,t.href=a,t.pathname=h[1],h[2]?(t.search=h[2],t.query=n?Wh(t.search.substr(1)):t.search.substr(1)):n&&(t.search="",t.query={}),t}var u,c,f,l,d=Xh.exec(a);if(d){var p=(d=d[0]).toLowerCase();t.protocol=p,a=a.substr(d.length)}if(r||d||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var g="//"===a.substr(0,2);!g||d&&hu[d]||(a=a.substr(2),t.slashes=!0)}if(!hu[d]&&(g||d&&!uu[d])){var y,v,m=-1;for(u=0;u<ru.length;u++)-1!==(c=a.indexOf(ru[u]))&&(-1===m||c<m)&&(m=c);for(-1!==(v=-1===m?a.lastIndexOf("@"):a.lastIndexOf("@",m))&&(y=a.slice(0,v),a=a.slice(v+1),t.auth=decodeURIComponent(y)),m=-1,u=0;u<nu.length;u++)-1!==(c=a.indexOf(nu[u]))&&(-1===m||c<m)&&(m=c);-1===m&&(m=a.length),t.host=a.slice(0,m),a=a.slice(m),lu(t),t.hostname=t.hostname||"";var b="["===t.hostname[0]&&"]"===t.hostname[t.hostname.length-1];if(!b){var S=t.hostname.split(/\./);for(u=0,f=S.length;u<f;u++){var w=S[u];if(w&&!w.match(su)){for(var x="",k=0,E=w.length;k<E;k++)w.charCodeAt(k)>127?x+="x":x+=w[k];if(!x.match(su)){var A=S.slice(0,u),F=S.slice(u+1),C=w.match(ou);C&&(A.push(C[1]),F.unshift(C[2])),F.length&&(a="/"+F.join(".")+a),t.hostname=A.join(".");break}}}}t.hostname.length>iu?t.hostname="":t.hostname=t.hostname.toLowerCase(),b||(t.hostname=Kh(t.hostname)),l=t.port?":"+t.port:"";var T=t.hostname||"";t.host=T+l,t.href+=t.host,b&&(t.hostname=t.hostname.substr(1,t.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!au[p])for(u=0,f=eu.length;u<f;u++){var D=eu[u];if(-1!==a.indexOf(D)){var P=encodeURIComponent(D);P===D&&(P=escape(D)),a=a.split(D).join(P)}}var I=a.indexOf("#");-1!==I&&(t.hash=a.substr(I),a=a.slice(0,I));var R=a.indexOf("?");-1!==R?(t.search=a.substr(R),t.query=a.substr(R+1),n&&(t.query=Wh(t.query)),a=a.slice(0,R)):n&&(t.search="",t.query={});a&&(t.pathname=a);uu[p]&&t.hostname&&!t.pathname&&(t.pathname="/");if(t.pathname||t.search){l=t.pathname||"";var _=t.search||"";t.path=l+_}return t.href=fu(t),t}(this,t,e,n)},$h.prototype.format=function(){return fu(this)},$h.prototype.resolve=function(t){return this.resolveObject(cu(t,!1,!0)).format()},$h.prototype.resolveObject=function(t){if(pa(t)){var e=new $h;e.parse(t,!1,!0),t=e}for(var n,r=new $h,i=Object.keys(this),s=0;s<i.length;s++){var o=i[s];r[o]=this[o]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),h=0;h<a.length;h++){var u=a[h];"protocol"!==u&&(r[u]=t[u])}return uu[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!uu[t.protocol]){for(var c=Object.keys(t),f=0;f<c.length;f++){var l=c[f];r[l]=t[l]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||hu[t.protocol])r.pathname=t.pathname;else{for(n=(t.pathname||"").split("/");n.length&&!(t.host=n.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==n[0]&&n.unshift(""),n.length<2&&n.unshift(""),r.pathname=n.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var d=r.pathname||"",p=r.search||"";r.path=d+p}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var g,y=r.pathname&&"/"===r.pathname.charAt(0),v=t.host||t.pathname&&"/"===t.pathname.charAt(0),m=v||y||r.host&&t.pathname,b=m,S=r.pathname&&r.pathname.split("/")||[],w=r.protocol&&!uu[r.protocol];if(n=t.pathname&&t.pathname.split("/")||[],w&&(r.hostname="",r.port=null,r.host&&(""===S[0]?S[0]=r.host:S.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===n[0]?n[0]=t.host:n.unshift(t.host)),t.host=null),m=m&&(""===n[0]||""===S[0])),v)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,S=n;else if(n.length)S||(S=[]),S.pop(),S=S.concat(n),r.search=t.search,r.query=t.query;else if(null!=t.search)return w&&(r.hostname=r.host=S.shift(),(g=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=g.shift(),r.host=r.hostname=g.shift())),r.search=t.search,r.query=t.query,da(r.pathname)&&da(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r;if(!S.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var x=S.slice(-1)[0],k=(r.host||t.host||S.length>1)&&("."===x||".."===x)||""===x,E=0,A=S.length;A>=0;A--)"."===(x=S[A])?S.splice(A,1):".."===x?(S.splice(A,1),E++):E&&(S.splice(A,1),E--);if(!m&&!b)for(;E--;E)S.unshift("..");!m||""===S[0]||S[0]&&"/"===S[0].charAt(0)||S.unshift(""),k&&"/"!==S.join("/").substr(-1)&&S.push("");var F=""===S[0]||S[0]&&"/"===S[0].charAt(0);return w&&(r.hostname=r.host=F?"":S.length?S.shift():"",(g=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=g.shift(),r.host=r.hostname=g.shift())),(m=m||r.host&&S.length)&&!F&&S.unshift(""),S.length?r.pathname=S.join("/"):(r.pathname=null,r.path=null),da(r.pathname)&&da(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},$h.prototype.parseHost=function(){return lu(this)},gu.defaultMaxSockets=4;var yu=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"],vu={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"},mu={request:du,get:pu,Agent:gu,METHODS:yu,STATUS_CODES:vu},bu=Object.freeze({request:du,get:pu,Agent:gu,METHODS:yu,STATUS_CODES:vu,default:mu}),Su=mo&&vo||mo,wu=bu&&mu||bu,xu=r(function(n,r){n.exports=function(n){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){return t<e}function s(t,e){return t<=e}function o(t,e){return t>e}function a(t,e){return t>=e}function h(){return!0}function u(t,e){return t.substring(0,e.length)===e}var c=function t(e,n,i){r(this,t),this.key=e,this.value=n,this.targetHash=i},f=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments[2];r(this,t),this.hash=i,this.leftChildHash=e,this.keys=n;var s=new c("",null,e);this.keys.length&&!this.keys[0].key.length||this.keys.unshift(s)}return t.prototype.get=function(e,n){for(var r=this.keys[0],i=this.keys,s=Array.isArray(i),o=0,i=s?i:i[Symbol.iterator]();;){var a;if(s){if(o>=i.length)break;a=i[o++]}else{if((o=i.next()).done)break;a=o.value}var h=a;if(e<h.key)break;r=h}return r.targetHash?n.get(r.targetHash).then(function(i){return t.deserialize(i,r.targetHash).get(e,n)}):r.key===e?Promise.resolve(r.value):Promise.resolve(null)},t.prototype.searchText=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments[2],r=arguments[3],i=arguments[4],s=n||t,o=void 0,a=!n,h=!0;return r&&(s=t,o=n||void 0,a=!0,h=!n),this.searchRange(s,o,t,e,a,h,r,i)},t.prototype.searchRange=function(e,n,r,c){var f=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],l=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],d=arguments[6],p=arguments[7],g=[],y=this,v=void 0,m=void 0;return v=e?f?a:o:h,m=n?l?s:i:h,function i(s){if(s<0||s>=y.keys.length)return Promise.resolve(g);if(c&&g.length>=c)return g=g.slice(0,c+1),Promise.resolve(g);var o=d?s-1:s+1,a=y.keys[s];if(o>=0&&o<y.keys.length){if(!d&&e>=y.keys[o].key)return i(o);if(d&&n<y.keys[o].key)return i(o)}if(d&&s+1<y.keys.length&&!v(y.keys[s+1].key,e))return Promise.resolve(g);if(!d&&!m(a.key,n))return Promise.resolve(g);if(a.targetHash)return p.get(a.targetHash).then(function(i){var s=c?c-g.length:void 0;return t.deserialize(i,a.targetHash).searchRange(e,n,r,s,f,l,d,p)}).then(function(t){if(t){if(g.length&&!t.length)return Promise.resolve(g);if(r&&!t.length)return Promise.resolve(g);Array.prototype.push.apply(g,t)}return i(o)});if(a.key.length&&a.value){if(r&&g.length&&!u(a.key,r))return Promise.resolve(g);v(a.key,e)&&m(a.key,n)&&(r&&!u(a.key,r)||g.push({key:a.key,value:a.value}))}return i(o)}(d?this.keys.length-1:0)},t.prototype._getLeafInsertIndex=function(t){var e=this._getNextSmallestIndex(t),n=e.index,r=e.exists,i=n+1;return t>this.keys[this.keys.length-1].key&&(i=this.keys.length),{leafInsertIndex:i,exists:r}},t.prototype._getNextSmallestIndex=function(t){for(var e=0,n=void 0,r=1;r<this.keys.length;r++){if(t===this.keys[r].key){n=!0;break}if(t<this.keys[r].key)break;e=r}return{index:e,exists:n}},t.prototype._splitNode=function(e){var n=Math.floor(this.keys.length/2),r=this.keys[n],i=new t(null,this.keys.slice(0,n)),s=e.put(i.serialize()),o=this.keys.slice(n,this.keys.length);this.keys[0].targetHash&&o.shift();var a=new t(this.keys[n].targetHash,o),h=e.put(a.serialize()),u=e.remove(this.hash);return Promise.all([s,h,u]).then(function(e){var n=e[0],i=e[1],s=new c(r.key,null,i);return new t(n,[s])})},t.prototype._saveToLeafNode=function(e,n,r,i){var s=this,o=new c(e,n,null),a=this._getLeafInsertIndex(e),h=a.leafInsertIndex,u=a.exists;return u?(this.keys[h]=o,r.remove(this.hash).then(function(){return r.put(s.serialize())}).then(function(e){return new t(s.leftChildHash,s.keys,e)})):(this.keys.splice(h,0,o),this.keys.length<i?r.remove(this.hash).then(function(){return r.put(s.serialize())}).then(function(e){return new t(s.leftChildHash,s.keys,e)}):this._splitNode(r))},t.prototype._saveToBranchNode=function(e,n,r,i){var s=this,o=this._getNextSmallestIndex(e),a=o.index,h=this.keys[a];return r.get(h.targetHash).then(function(s){return t.deserialize(s,h.targetHash).put(e,n,r,i)}).then(function(e){return e.hash?(s.keys[a]=new c(s.keys[a].key,null,e.hash),r.remove(s.hash),r.put(s.serialize()).then(function(e){return new t(s.leftChildHash,s.keys,e)})):(s.keys[a]=new c(h.key,null,e.keys[0].targetHash),s.keys.splice(a+1,0,e.keys[e.keys.length-1]),s.keys.length<i?(r.remove(s.hash),r.put(s.serialize()).then(function(e){return new t(s.leftChildHash,s.keys,e)})):s._splitNode(r))})},t.prototype.put=function(t,e,n,r){return this.keys[0].targetHash?this._saveToBranchNode(t,e,n,r):this._saveToLeafNode(t,e,n,r)},t.prototype.delete=function(e,n){var r=this,i=this.keys[0],s=void 0;for(s=0;s<this.keys.length;s++){if(e<this.keys[s].key){s=Math.max(s-1,0);break}i=this.keys[s]}var o=Promise.resolve();return i.targetHash?o=o.then(function(){return n.get(i.targetHash).then(function(r){return t.deserialize(r,i.targetHash).delete(e,n)}).then(function(t){var e=i.targetHash;return i.targetHash=t.hash,n.remove(e)})}):i.key===e&&this.keys.splice(s,1),o.then(function(){return n.put(r.serialize())}).then(function(e){return new t(r.leftChildHash,r.keys,e)})},t.prototype.size=function(e){return this.keys.reduce(function(n,r){return n.then(function(n){return r.targetHash?e.get(r.targetHash).then(function(n){return t.deserialize(n).size(e)}).then(function(t){return t+n}):n})},Promise.resolve(this.keys.length))},t.prototype.smallestKey=function(){return this.keys.length?this.keys[0]:null},t.prototype.smallestNonZeroKey=function(){return this.keys.length>1?this.keys[1]:null},t.prototype.rebalance=function(){},t.prototype.print=function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r="node: "+this.hash+"\n",i="",s=0;s<=n;s++)i+="- ";return this.keys.forEach(function(t){r+=i,r+="key: "+t.key,t.targetHash&&(r+=" link: "+t.targetHash),t.value&&(r+="\n"+i+"   value: "+JSON.stringify(t.value)),r+="\n"}),this.keys.forEach(function(s){s.targetHash&&e.get(s.targetHash).then(function(o){var a=t.deserialize(o,s.targetHash);r+="\n",r+=i,r+=a.print(e,n+1)})}),r},t.prototype.serialize=function(){return JSON.stringify({leftChildHash:this.leftChildHash,keys:this.keys})},t.deserialize=function(e,n){return new t((e=JSON.parse(e)).leftChildHash,e.keys,n)},t.fromSortedList=function(e,n,r){if(e.length>n)return function i(s){if(e.length){var o=e.splice(0,n);return r.put(new t(o[0].targetHash,o).serialize()).then(function(t){return s.push({key:o[1].key,targetHash:t,value:null}),i(s)})}return s.length&&s[0].targetHash&&(s[0].key=""),t.fromSortedList(s,n,r)}([]);var i=e.length?e[0].targetHash:null,s=new t(i,e);return r.put(s.serialize()).then(function(t){return s.hash=t,s})},t}(),l=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new f;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.rootNode=r,this.storage=e,this.maxChildren=Math.max(n,2)}return t.prototype.get=function(t){return this.rootNode.get(t,this.storage)},t.prototype.searchText=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.rootNode.searchText(t,e,n,r,this.storage)},t.prototype.searchRange=function(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return this.rootNode.searchRange(t,e,!1,n,r,i,s,this.storage)},t.prototype.put=function(t,e){var n=this;return this.rootNode.put(t,e,this.storage,this.maxChildren).then(function(t){return n.rootNode=t,n.rootNode.hash})},t.prototype.delete=function(t){var e=this;return this.rootNode.delete(t,this.storage,this.maxChildren).then(function(t){return e.rootNode=t,e.rootNode.hash})},t.prototype.print=function(){return this.rootNode.print(this.storage)},t.prototype.size=function(){return this.rootNode.size(this.storage)},t.getByHash=function(e,n,r){return n.get(e).then(function(e){var i=f.deserialize(e);return new t(n,r,i)})},t.fromSortedList=function(e,n,r){return f.fromSortedList(e,n,r).then(function(e){return new t(r,n,e)})},t}(),d=void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},p=[],g=[],y="undefined"!=typeof Uint8Array?Uint8Array:Array,v=!1;function m(){v=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,n=t.length;e<n;++e)p[e]=t[e],g[t.charCodeAt(e)]=e;g["-".charCodeAt(0)]=62,g["_".charCodeAt(0)]=63}function b(t,e,n){for(var r,i,s=[],o=e;o<n;o+=3)r=(t[o]<<16)+(t[o+1]<<8)+t[o+2],s.push(p[(i=r)>>18&63]+p[i>>12&63]+p[i>>6&63]+p[63&i]);return s.join("")}function S(t){var e;v||m();for(var n=t.length,r=n%3,i="",s=[],o=0,a=n-r;o<a;o+=16383)s.push(b(t,o,o+16383>a?a:o+16383));return 1===r?(e=t[n-1],i+=p[e>>2],i+=p[e<<4&63],i+="=="):2===r&&(e=(t[n-2]<<8)+t[n-1],i+=p[e>>10],i+=p[e>>4&63],i+=p[e<<2&63],i+="="),s.push(i),s.join("")}function w(t,e,n,r,i){var s,o,a=8*i-r-1,h=(1<<a)-1,u=h>>1,c=-7,f=n?i-1:0,l=n?-1:1,d=t[e+f];for(f+=l,s=d&(1<<-c)-1,d>>=-c,c+=a;c>0;s=256*s+t[e+f],f+=l,c-=8);for(o=s&(1<<-c)-1,s>>=-c,c+=r;c>0;o=256*o+t[e+f],f+=l,c-=8);if(0===s)s=1-u;else{if(s===h)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,r),s-=u}return(d?-1:1)*o*Math.pow(2,s-r)}function x(t,e,n,r,i,s){var o,a,h,u=8*s-i-1,c=(1<<u)-1,f=c>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:s-1,p=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-o))<1&&(o--,h*=2),(e+=o+f>=1?l/h:l*Math.pow(2,1-f))*h>=2&&(o++,h/=2),o+f>=c?(a=0,o=c):o+f>=1?(a=(e*h-1)*Math.pow(2,i),o+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;t[n+d]=255&a,d+=p,a/=256,i-=8);for(o=o<<i|a,u+=i;u>0;t[n+d]=255&o,d+=p,o/=256,u-=8);t[n+d-p]|=128*g}var k={}.toString,E=Array.isArray||function(t){return"[object Array]"==k.call(t)};function A(){return C.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function F(t,e){if(A()<e)throw new RangeError("Invalid typed array length");return C.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=C.prototype:(null===t&&(t=new C(e)),t.length=e),t}function C(t,e,n){if(!(C.TYPED_ARRAY_SUPPORT||this instanceof C))return new C(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return P(this,t)}return T(this,t,e,n)}function T(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),C.TYPED_ARRAY_SUPPORT?(t=e).__proto__=C.prototype:t=I(t,e),t}(t,e,n,r):"string"==typeof e?function(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!C.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|B(e,n),i=(t=F(t,r)).write(e,n);return i!==r&&(t=t.slice(0,i)),t}(t,e,n):function(t,e){if(_(e)){var n=0|R(e.length);return 0===(t=F(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?F(t,0):I(t,e);if("Buffer"===e.type&&E(e.data))return I(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function D(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function P(t,e){if(D(e),t=F(t,e<0?0:0|R(e)),!C.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function I(t,e){var n=e.length<0?0:0|R(e.length);t=F(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function R(t){if(t>=A())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+A().toString(16)+" bytes");return 0|t}function _(t){return!(null==t||!t._isBuffer)}function B(t,e){if(_(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return st(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return ot(t).length;default:if(r)return st(t).length;e=(""+e).toLowerCase(),r=!0}}function H(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function N(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=C.from(e,r)),_(e))return 0===e.length?-1:O(t,e,n,r,i);if("number"==typeof e)return e&=255,C.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):O(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function O(t,e,n,r,i){var s,o=1,a=t.length,h=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;o=2,a/=2,h/=2,n/=2}function u(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){var c=-1;for(s=n;s<a;s++)if(u(t,s)===u(e,-1===c?0:s-c)){if(-1===c&&(c=s),s-c+1===h)return c*o}else-1!==c&&(s-=s-c),c=-1}else for(n+h>a&&(n=a-h),s=n;s>=0;s--){for(var f=!0,l=0;l<h;l++)if(u(t,s+l)!==u(e,l)){f=!1;break}if(f)return s}return-1}function j(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var s=e.length;if(s%2!=0)throw new TypeError("Invalid hex string");r>s/2&&(r=s/2);for(var o=0;o<r;++o){var a=parseInt(e.substr(2*o,2),16);if(isNaN(a))return o;t[n+o]=a}return o}function L(t,e,n,r){return at(st(e,t.length-n),t,n,r)}function M(t,e,n,r){return at(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function V(t,e,n,r){return M(t,e,n,r)}function U(t,e,n,r){return at(ot(e),t,n,r)}function K(t,e,n,r){return at(function(t,e){for(var n,r,i,s=[],o=0;o<t.length&&!((e-=2)<0);++o)n=t.charCodeAt(o),r=n>>8,i=n%256,s.push(i),s.push(r);return s}(e,t.length-n),t,n,r)}function q(t,e,n){return 0===e&&n===t.length?S(t):S(t.slice(e,n))}function z(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var s,o,a,h,u=t[i],c=null,f=u>239?4:u>223?3:u>191?2:1;if(i+f<=n)switch(f){case 1:u<128&&(c=u);break;case 2:128==(192&(s=t[i+1]))&&(h=(31&u)<<6|63&s)>127&&(c=h);break;case 3:s=t[i+1],o=t[i+2],128==(192&s)&&128==(192&o)&&(h=(15&u)<<12|(63&s)<<6|63&o)>2047&&(h<55296||h>57343)&&(c=h);break;case 4:s=t[i+1],o=t[i+2],a=t[i+3],128==(192&s)&&128==(192&o)&&128==(192&a)&&(h=(15&u)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&h<1114112&&(c=h)}null===c?(c=65533,f=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=f}return function(t){var e=t.length;if(e<=Y)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=Y));return n}(r)}C.TYPED_ARRAY_SUPPORT=void 0===d.TYPED_ARRAY_SUPPORT||d.TYPED_ARRAY_SUPPORT,C.poolSize=8192,C._augment=function(t){return t.__proto__=C.prototype,t},C.from=function(t,e,n){return T(null,t,e,n)},C.TYPED_ARRAY_SUPPORT&&(C.prototype.__proto__=Uint8Array.prototype,C.__proto__=Uint8Array),C.alloc=function(t,e,n){return function(t,e,n,r){return D(e),e<=0?F(t,e):void 0!==n?"string"==typeof r?F(t,e).fill(n,r):F(t,e).fill(n):F(t,e)}(null,t,e,n)},C.allocUnsafe=function(t){return P(null,t)},C.allocUnsafeSlow=function(t){return P(null,t)},C.isBuffer=function(t){return null!=t&&(!!t._isBuffer||ht(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&ht(t.slice(0,0))}(t))},C.compare=function(t,e){if(!_(t)||!_(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,s=Math.min(n,r);i<s;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},C.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},C.concat=function(t,e){if(!E(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return C.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=C.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var s=t[n];if(!_(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},C.byteLength=B,C.prototype._isBuffer=!0,C.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)H(this,e,e+1);return this},C.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)H(this,e,e+3),H(this,e+1,e+2);return this},C.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)H(this,e,e+7),H(this,e+1,e+6),H(this,e+2,e+5),H(this,e+3,e+4);return this},C.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?z(this,0,t):function(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return W(this,e,n);case"utf8":case"utf-8":return z(this,e,n);case"ascii":return G(this,e,n);case"latin1":case"binary":return J(this,e,n);case"base64":return q(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}.apply(this,arguments)},C.prototype.equals=function(t){if(!_(t))throw new TypeError("Argument must be a Buffer");return this===t||0===C.compare(this,t)},C.prototype.inspect=function(){var t="";return this.length>0&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(t+=" ... ")),"<Buffer "+t+">"},C.prototype.compare=function(t,e,n,r,i){if(!_(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,i>>>=0,this===t)return 0;for(var s=i-r,o=n-e,a=Math.min(s,o),h=this.slice(r,i),u=t.slice(e,n),c=0;c<a;++c)if(h[c]!==u[c]){s=h[c],o=u[c];break}return s<o?-1:o<s?1:0},C.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},C.prototype.indexOf=function(t,e,n){return N(this,t,e,n,!0)},C.prototype.lastIndexOf=function(t,e,n){return N(this,t,e,n,!1)},C.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return j(this,t,e,n);case"utf8":case"utf-8":return L(this,t,e,n);case"ascii":return M(this,t,e,n);case"latin1":case"binary":return V(this,t,e,n);case"base64":return U(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K(this,t,e,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},C.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Y=4096;function G(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function J(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function W(t,e,n){var r,i=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>i)&&(n=i);for(var s="",o=e;o<n;++o)s+=(r=t[o])<16?"0"+r.toString(16):r.toString(16);return s}function $(t,e,n){for(var r=t.slice(e,n),i="",s=0;s<r.length;s+=2)i+=String.fromCharCode(r[s]+256*r[s+1]);return i}function X(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function Z(t,e,n,r,i,s){if(!_(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function Q(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,s=Math.min(t.length-n,2);i<s;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function tt(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,s=Math.min(t.length-n,4);i<s;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function et(t,e,n,r,i,s){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function nt(t,e,n,r,i){return i||et(t,0,n,4),x(t,e,n,r,23,4),n+4}function rt(t,e,n,r,i){return i||et(t,0,n,8),x(t,e,n,r,52,8),n+8}C.prototype.slice=function(t,e){var n,r=this.length;if(t=~~t,e=void 0===e?r:~~e,t<0?(t+=r)<0&&(t=0):t>r&&(t=r),e<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),C.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=C.prototype;else{var i=e-t;n=new C(i,void 0);for(var s=0;s<i;++s)n[s]=this[s+t]}return n},C.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||X(t,e,this.length);for(var r=this[t],i=1,s=0;++s<e&&(i*=256);)r+=this[t+s]*i;return r},C.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||X(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},C.prototype.readUInt8=function(t,e){return e||X(t,1,this.length),this[t]},C.prototype.readUInt16LE=function(t,e){return e||X(t,2,this.length),this[t]|this[t+1]<<8},C.prototype.readUInt16BE=function(t,e){return e||X(t,2,this.length),this[t]<<8|this[t+1]},C.prototype.readUInt32LE=function(t,e){return e||X(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},C.prototype.readUInt32BE=function(t,e){return e||X(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},C.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||X(t,e,this.length);for(var r=this[t],i=1,s=0;++s<e&&(i*=256);)r+=this[t+s]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},C.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||X(t,e,this.length);for(var r=e,i=1,s=this[t+--r];r>0&&(i*=256);)s+=this[t+--r]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*e)),s},C.prototype.readInt8=function(t,e){return e||X(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},C.prototype.readInt16LE=function(t,e){e||X(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},C.prototype.readInt16BE=function(t,e){e||X(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},C.prototype.readInt32LE=function(t,e){return e||X(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},C.prototype.readInt32BE=function(t,e){return e||X(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},C.prototype.readFloatLE=function(t,e){return e||X(t,4,this.length),w(this,t,!0,23,4)},C.prototype.readFloatBE=function(t,e){return e||X(t,4,this.length),w(this,t,!1,23,4)},C.prototype.readDoubleLE=function(t,e){return e||X(t,8,this.length),w(this,t,!0,52,8)},C.prototype.readDoubleBE=function(t,e){return e||X(t,8,this.length),w(this,t,!1,52,8)},C.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;Z(this,t,e,n,i,0)}var s=1,o=0;for(this[e]=255&t;++o<n&&(s*=256);)this[e+o]=t/s&255;return e+n},C.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;Z(this,t,e,n,i,0)}var s=n-1,o=1;for(this[e+s]=255&t;--s>=0&&(o*=256);)this[e+s]=t/o&255;return e+n},C.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||Z(this,t,e,1,255,0),C.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},C.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||Z(this,t,e,2,65535,0),C.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):Q(this,t,e,!0),e+2},C.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||Z(this,t,e,2,65535,0),C.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):Q(this,t,e,!1),e+2},C.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||Z(this,t,e,4,4294967295,0),C.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):tt(this,t,e,!0),e+4},C.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||Z(this,t,e,4,4294967295,0),C.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):tt(this,t,e,!1),e+4},C.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);Z(this,t,e,n,i-1,-i)}var s=0,o=1,a=0;for(this[e]=255&t;++s<n&&(o*=256);)t<0&&0===a&&0!==this[e+s-1]&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+n},C.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);Z(this,t,e,n,i-1,-i)}var s=n-1,o=1,a=0;for(this[e+s]=255&t;--s>=0&&(o*=256);)t<0&&0===a&&0!==this[e+s+1]&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+n},C.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||Z(this,t,e,1,127,-128),C.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},C.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||Z(this,t,e,2,32767,-32768),C.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):Q(this,t,e,!0),e+2},C.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||Z(this,t,e,2,32767,-32768),C.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):Q(this,t,e,!1),e+2},C.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||Z(this,t,e,4,2147483647,-2147483648),C.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):tt(this,t,e,!0),e+4},C.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||Z(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),C.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):tt(this,t,e,!1),e+4},C.prototype.writeFloatLE=function(t,e,n){return nt(this,t,e,!0,n)},C.prototype.writeFloatBE=function(t,e,n){return nt(this,t,e,!1,n)},C.prototype.writeDoubleLE=function(t,e,n){return rt(this,t,e,!0,n)},C.prototype.writeDoubleBE=function(t,e,n){return rt(this,t,e,!1,n)},C.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,s=r-n;if(this===t&&n<e&&e<r)for(i=s-1;i>=0;--i)t[i+e]=this[i+n];else if(s<1e3||!C.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+s),e);return s},C.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!C.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var s;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(s=e;s<n;++s)this[s]=t;else{var o=_(t)?t:st(new C(t,r).toString()),a=o.length;for(s=0;s<n-e;++s)this[s+e]=o[s%a]}return this};var it=/[^+\/0-9A-Za-z-_]/g;function st(t,e){var n;e=e||1/0;for(var r=t.length,i=null,s=[],o=0;o<r;++o){if((n=t.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(o+1===r){(e-=3)>-1&&s.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&s.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;s.push(n)}else if(n<2048){if((e-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function ot(t){return function(t){v||m();var e,n,r,i,s,o,a=t.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");s="="===t[a-2]?2:"="===t[a-1]?1:0,o=new y(3*a/4-s),r=s>0?a-4:a;var h=0;for(e=0,n=0;e<r;e+=4,n+=3)i=g[t.charCodeAt(e)]<<18|g[t.charCodeAt(e+1)]<<12|g[t.charCodeAt(e+2)]<<6|g[t.charCodeAt(e+3)],o[h++]=i>>16&255,o[h++]=i>>8&255,o[h++]=255&i;return 2===s?(i=g[t.charCodeAt(e)]<<2|g[t.charCodeAt(e+1)]>>4,o[h++]=255&i):1===s&&(i=g[t.charCodeAt(e)]<<10|g[t.charCodeAt(e+1)]<<4|g[t.charCodeAt(e+2)]>>2,o[h++]=i>>8&255,o[h++]=255&i),o}(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(it,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function at(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function ht(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}var ut=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ipfs=e}return t.prototype.put=function(t){return this.ipfs.files.add(new C(t,"utf8")).then(function(t){return t[0].hash})},t.prototype.get=function(t){return this.ipfs.files.cat(t).then(function(t){return t.toString("utf8")})},t.prototype.remove=function(t){return Promise.resolve(t)},t.prototype.clear=function(){return Promise.resolve()},t}(),ct=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.storage={}}return t.prototype.put=function(t){var e=this;return new Promise(function(r){var i=n.createHash("sha256");i.update(t);var s=i.digest("base64");e.storage[s]=t,r(s)})},t.prototype.get=function(t){var e=this;return new Promise(function(n){n(e.storage[t])})},t.prototype.remove=function(t){var e=this;return new Promise(function(n){delete e.storage[t],n()})},t.prototype.clear=function(){var t=this;return new Promise(function(e){t.storage={},e()})},t}(),ft=!1;try{ft="[object process]"===Object.prototype.toString.call(d.process)}catch(t){}function lt(t){return ft&&e.resolve("http")&&e.resolve("https")?function(t){return new Promise(function(e,n){var r=(t.startsWith("https"),wu),i=r.get(t,function(t){(t.statusCode<200||t.statusCode>299)&&n(new Error("Failed to load page, status code: "+t.statusCode));var r=[];t.on("data",function(t){return r.push(t)}),t.on("end",function(){return e(r.join(""))})});i.on("error",function(t){return n(t)})})}(t):function(t){return new Promise(function(e,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){4===r.readyState&&(r.status>=200&&r.status<300?e(r.responseText):n(r.responseText))},r.open("GET",t,!0),r.send(null)})}(t)}var dt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.apiRoot=e}return t.prototype.get=function(t){return t.match(/^\/ip(fs|ns)\//)||(t="/ipfs/"+t),lt(this.apiRoot+t)},t.prototype.remove=function(){return Promise.resolve()},t.prototype.put=function(){return Promise.resolve()},t}();return{MerkleBTree:l,TreeNode:f,RAMStorage:ct,IPFSStorage:ut,IPFSGatewayStorage:dt}}(Su)}),ku=r(function(t,e){var n=re.Buffer;function r(t,e){for(var n in t)e[n]=t[n]}function i(t,e,r){return n(t,e,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=re:(r(re,e),e.Buffer=i),r(n,i),i.from=function(t,e,r){if("number"==typeof t)throw new TypeError("Argument must not be a number");return n(t,e,r)},i.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError("Argument must be a number");var i=n(t);return void 0!==e?"string"==typeof r?i.fill(e,r):i.fill(e):i.fill(0),i},i.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n(t)},i.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return re.SlowBuffer(t)}}),Eu=(ku.Buffer,ku.Buffer),Au=function(t){for(var e={},n=t.length,r=t.charAt(0),i=0;i<t.length;i++){var s=t.charAt(i);if(void 0!==e[s])throw new TypeError(s+" is ambiguous");e[s]=i}function o(t){if("string"!=typeof t)throw new TypeError("Expected String");if(0===t.length)return Eu.allocUnsafe(0);for(var i=[0],s=0;s<t.length;s++){var o=e[t[s]];if(void 0===o)return;for(var a=0,h=o;a<i.length;++a)h+=i[a]*n,i[a]=255&h,h>>=8;for(;h>0;)i.push(255&h),h>>=8}for(var u=0;t[u]===r&&u<t.length-1;++u)i.push(0);return Eu.from(i.reverse())}return{encode:function(e){if(0===e.length)return"";for(var i=[0],s=0;s<e.length;++s){for(var o=0,a=e[s];o<i.length;++o)a+=i[o]<<8,i[o]=a%n,a=a/n|0;for(;a>0;)i.push(a%n),a=a/n|0}for(var h="",u=0;0===e[u]&&u<e.length-1;++u)h+=r;for(var c=i.length-1;c>=0;--c)h+=t[i[c]];return h},decodeUnsafe:o,decode:function(t){var e=o(t);if(e)return e;throw new Error("Non-base"+n+" character")}}},Fu=Au("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),Cu={names:Object.freeze({sha1:17,"sha2-256":18,"sha2-512":19,"dbl-sha2-256":86,"sha3-224":23,"sha3-256":22,"sha3-384":21,"sha3-512":20,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,"murmur3-128":34,"murmur3-32":35,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"Skein256-8":45825,"Skein256-16":45826,"Skein256-24":45827,"Skein256-32":45828,"Skein256-40":45829,"Skein256-48":45830,"Skein256-56":45831,"Skein256-64":45832,"Skein256-72":45833,"Skein256-80":45834,"Skein256-88":45835,"Skein256-96":45836,"Skein256-104":45837,"Skein256-112":45838,"Skein256-120":45839,"Skein256-128":45840,"Skein256-136":45841,"Skein256-144":45842,"Skein256-152":45843,"Skein256-160":45844,"Skein256-168":45845,"Skein256-176":45846,"Skein256-184":45847,"Skein256-192":45848,"Skein256-200":45849,"Skein256-208":45850,"Skein256-216":45851,"Skein256-224":45852,"Skein256-232":45853,"Skein256-240":45854,"Skein256-248":45855,"Skein256-256":45856,"Skein512-8":45857,"Skein512-16":45858,"Skein512-24":45859,"Skein512-32":45860,"Skein512-40":45861,"Skein512-48":45862,"Skein512-56":45863,"Skein512-64":45864,"Skein512-72":45865,"Skein512-80":45866,"Skein512-88":45867,"Skein512-96":45868,"Skein512-104":45869,"Skein512-112":45870,"Skein512-120":45871,"Skein512-128":45872,"Skein512-136":45873,"Skein512-144":45874,"Skein512-152":45875,"Skein512-160":45876,"Skein512-168":45877,"Skein512-176":45878,"Skein512-184":45879,"Skein512-192":45880,"Skein512-200":45881,"Skein512-208":45882,"Skein512-216":45883,"Skein512-224":45884,"Skein512-232":45885,"Skein512-240":45886,"Skein512-248":45887,"Skein512-256":45888,"Skein512-264":45889,"Skein512-272":45890,"Skein512-280":45891,"Skein512-288":45892,"Skein512-296":45893,"Skein512-304":45894,"Skein512-312":45895,"Skein512-320":45896,"Skein512-328":45897,"Skein512-336":45898,"Skein512-344":45899,"Skein512-352":45900,"Skein512-360":45901,"Skein512-368":45902,"Skein512-376":45903,"Skein512-384":45904,"Skein512-392":45905,"Skein512-400":45906,"Skein512-408":45907,"Skein512-416":45908,"Skein512-424":45909,"Skein512-432":45910,"Skein512-440":45911,"Skein512-448":45912,"Skein512-456":45913,"Skein512-464":45914,"Skein512-472":45915,"Skein512-480":45916,"Skein512-488":45917,"Skein512-496":45918,"Skein512-504":45919,"Skein512-512":45920,"Skein1024-8":45921,"Skein1024-16":45922,"Skein1024-24":45923,"Skein1024-32":45924,"Skein1024-40":45925,"Skein1024-48":45926,"Skein1024-56":45927,"Skein1024-64":45928,"Skein1024-72":45929,"Skein1024-80":45930,"Skein1024-88":45931,"Skein1024-96":45932,"Skein1024-104":45933,"Skein1024-112":45934,"Skein1024-120":45935,"Skein1024-128":45936,"Skein1024-136":45937,"Skein1024-144":45938,"Skein1024-152":45939,"Skein1024-160":45940,"Skein1024-168":45941,"Skein1024-176":45942,"Skein1024-184":45943,"Skein1024-192":45944,"Skein1024-200":45945,"Skein1024-208":45946,"Skein1024-216":45947,"Skein1024-224":45948,"Skein1024-232":45949,"Skein1024-240":45950,"Skein1024-248":45951,"Skein1024-256":45952,"Skein1024-264":45953,"Skein1024-272":45954,"Skein1024-280":45955,"Skein1024-288":45956,"Skein1024-296":45957,"Skein1024-304":45958,"Skein1024-312":45959,"Skein1024-320":45960,"Skein1024-328":45961,"Skein1024-336":45962,"Skein1024-344":45963,"Skein1024-352":45964,"Skein1024-360":45965,"Skein1024-368":45966,"Skein1024-376":45967,"Skein1024-384":45968,"Skein1024-392":45969,"Skein1024-400":45970,"Skein1024-408":45971,"Skein1024-416":45972,"Skein1024-424":45973,"Skein1024-432":45974,"Skein1024-440":45975,"Skein1024-448":45976,"Skein1024-456":45977,"Skein1024-464":45978,"Skein1024-472":45979,"Skein1024-480":45980,"Skein1024-488":45981,"Skein1024-496":45982,"Skein1024-504":45983,"Skein1024-512":45984,"Skein1024-520":45985,"Skein1024-528":45986,"Skein1024-536":45987,"Skein1024-544":45988,"Skein1024-552":45989,"Skein1024-560":45990,"Skein1024-568":45991,"Skein1024-576":45992,"Skein1024-584":45993,"Skein1024-592":45994,"Skein1024-600":45995,"Skein1024-608":45996,"Skein1024-616":45997,"Skein1024-624":45998,"Skein1024-632":45999,"Skein1024-640":46e3,"Skein1024-648":46001,"Skein1024-656":46002,"Skein1024-664":46003,"Skein1024-672":46004,"Skein1024-680":46005,"Skein1024-688":46006,"Skein1024-696":46007,"Skein1024-704":46008,"Skein1024-712":46009,"Skein1024-720":46010,"Skein1024-728":46011,"Skein1024-736":46012,"Skein1024-744":46013,"Skein1024-752":46014,"Skein1024-760":46015,"Skein1024-768":46016,"Skein1024-776":46017,"Skein1024-784":46018,"Skein1024-792":46019,"Skein1024-800":46020,"Skein1024-808":46021,"Skein1024-816":46022,"Skein1024-824":46023,"Skein1024-832":46024,"Skein1024-840":46025,"Skein1024-848":46026,"Skein1024-856":46027,"Skein1024-864":46028,"Skein1024-872":46029,"Skein1024-880":46030,"Skein1024-888":46031,"Skein1024-896":46032,"Skein1024-904":46033,"Skein1024-912":46034,"Skein1024-920":46035,"Skein1024-928":46036,"Skein1024-936":46037,"Skein1024-944":46038,"Skein1024-952":46039,"Skein1024-960":46040,"Skein1024-968":46041,"Skein1024-976":46042,"Skein1024-984":46043,"Skein1024-992":46044,"Skein1024-1000":46045,"Skein1024-1008":46046,"Skein1024-1016":46047,"Skein1024-1024":46048}),codes:Object.freeze({17:"sha1",18:"sha2-256",19:"sha2-512",86:"dbl-sha2-256",23:"sha3-224",22:"sha3-256",21:"sha3-384",20:"sha3-512",24:"shake-128",25:"shake-256",26:"keccak-224",27:"keccak-256",28:"keccak-384",29:"keccak-512",34:"murmur3-128",35:"murmur3-32",45569:"blake2b-8",45570:"blake2b-16",45571:"blake2b-24",45572:"blake2b-32",45573:"blake2b-40",45574:"blake2b-48",45575:"blake2b-56",45576:"blake2b-64",45577:"blake2b-72",45578:"blake2b-80",45579:"blake2b-88",45580:"blake2b-96",45581:"blake2b-104",45582:"blake2b-112",45583:"blake2b-120",45584:"blake2b-128",45585:"blake2b-136",45586:"blake2b-144",45587:"blake2b-152",45588:"blake2b-160",45589:"blake2b-168",45590:"blake2b-176",45591:"blake2b-184",45592:"blake2b-192",45593:"blake2b-200",45594:"blake2b-208",45595:"blake2b-216",45596:"blake2b-224",45597:"blake2b-232",45598:"blake2b-240",45599:"blake2b-248",45600:"blake2b-256",45601:"blake2b-264",45602:"blake2b-272",45603:"blake2b-280",45604:"blake2b-288",45605:"blake2b-296",45606:"blake2b-304",45607:"blake2b-312",45608:"blake2b-320",45609:"blake2b-328",45610:"blake2b-336",45611:"blake2b-344",45612:"blake2b-352",45613:"blake2b-360",45614:"blake2b-368",45615:"blake2b-376",45616:"blake2b-384",45617:"blake2b-392",45618:"blake2b-400",45619:"blake2b-408",45620:"blake2b-416",45621:"blake2b-424",45622:"blake2b-432",45623:"blake2b-440",45624:"blake2b-448",45625:"blake2b-456",45626:"blake2b-464",45627:"blake2b-472",45628:"blake2b-480",45629:"blake2b-488",45630:"blake2b-496",45631:"blake2b-504",45632:"blake2b-512",45633:"blake2s-8",45634:"blake2s-16",45635:"blake2s-24",45636:"blake2s-32",45637:"blake2s-40",45638:"blake2s-48",45639:"blake2s-56",45640:"blake2s-64",45641:"blake2s-72",45642:"blake2s-80",45643:"blake2s-88",45644:"blake2s-96",45645:"blake2s-104",45646:"blake2s-112",45647:"blake2s-120",45648:"blake2s-128",45649:"blake2s-136",45650:"blake2s-144",45651:"blake2s-152",45652:"blake2s-160",45653:"blake2s-168",45654:"blake2s-176",45655:"blake2s-184",45656:"blake2s-192",45657:"blake2s-200",45658:"blake2s-208",45659:"blake2s-216",45660:"blake2s-224",45661:"blake2s-232",45662:"blake2s-240",45663:"blake2s-248",45664:"blake2s-256",45825:"Skein256-8",45826:"Skein256-16",45827:"Skein256-24",45828:"Skein256-32",45829:"Skein256-40",45830:"Skein256-48",45831:"Skein256-56",45832:"Skein256-64",45833:"Skein256-72",45834:"Skein256-80",45835:"Skein256-88",45836:"Skein256-96",45837:"Skein256-104",45838:"Skein256-112",45839:"Skein256-120",45840:"Skein256-128",45841:"Skein256-136",45842:"Skein256-144",45843:"Skein256-152",45844:"Skein256-160",45845:"Skein256-168",45846:"Skein256-176",45847:"Skein256-184",45848:"Skein256-192",45849:"Skein256-200",45850:"Skein256-208",45851:"Skein256-216",45852:"Skein256-224",45853:"Skein256-232",45854:"Skein256-240",45855:"Skein256-248",45856:"Skein256-256",45857:"Skein512-8",45858:"Skein512-16",45859:"Skein512-24",45860:"Skein512-32",45861:"Skein512-40",45862:"Skein512-48",45863:"Skein512-56",45864:"Skein512-64",45865:"Skein512-72",45866:"Skein512-80",45867:"Skein512-88",45868:"Skein512-96",45869:"Skein512-104",45870:"Skein512-112",45871:"Skein512-120",45872:"Skein512-128",45873:"Skein512-136",45874:"Skein512-144",45875:"Skein512-152",45876:"Skein512-160",45877:"Skein512-168",45878:"Skein512-176",45879:"Skein512-184",45880:"Skein512-192",45881:"Skein512-200",45882:"Skein512-208",45883:"Skein512-216",45884:"Skein512-224",45885:"Skein512-232",45886:"Skein512-240",45887:"Skein512-248",45888:"Skein512-256",45889:"Skein512-264",45890:"Skein512-272",45891:"Skein512-280",45892:"Skein512-288",45893:"Skein512-296",45894:"Skein512-304",45895:"Skein512-312",45896:"Skein512-320",45897:"Skein512-328",45898:"Skein512-336",45899:"Skein512-344",45900:"Skein512-352",45901:"Skein512-360",45902:"Skein512-368",45903:"Skein512-376",45904:"Skein512-384",45905:"Skein512-392",45906:"Skein512-400",45907:"Skein512-408",45908:"Skein512-416",45909:"Skein512-424",45910:"Skein512-432",45911:"Skein512-440",45912:"Skein512-448",45913:"Skein512-456",45914:"Skein512-464",45915:"Skein512-472",45916:"Skein512-480",45917:"Skein512-488",45918:"Skein512-496",45919:"Skein512-504",45920:"Skein512-512",45921:"Skein1024-8",45922:"Skein1024-16",45923:"Skein1024-24",45924:"Skein1024-32",45925:"Skein1024-40",45926:"Skein1024-48",45927:"Skein1024-56",45928:"Skein1024-64",45929:"Skein1024-72",45930:"Skein1024-80",45931:"Skein1024-88",45932:"Skein1024-96",45933:"Skein1024-104",45934:"Skein1024-112",45935:"Skein1024-120",45936:"Skein1024-128",45937:"Skein1024-136",45938:"Skein1024-144",45939:"Skein1024-152",45940:"Skein1024-160",45941:"Skein1024-168",45942:"Skein1024-176",45943:"Skein1024-184",45944:"Skein1024-192",45945:"Skein1024-200",45946:"Skein1024-208",45947:"Skein1024-216",45948:"Skein1024-224",45949:"Skein1024-232",45950:"Skein1024-240",45951:"Skein1024-248",45952:"Skein1024-256",45953:"Skein1024-264",45954:"Skein1024-272",45955:"Skein1024-280",45956:"Skein1024-288",45957:"Skein1024-296",45958:"Skein1024-304",45959:"Skein1024-312",45960:"Skein1024-320",45961:"Skein1024-328",45962:"Skein1024-336",45963:"Skein1024-344",45964:"Skein1024-352",45965:"Skein1024-360",45966:"Skein1024-368",45967:"Skein1024-376",45968:"Skein1024-384",45969:"Skein1024-392",45970:"Skein1024-400",45971:"Skein1024-408",45972:"Skein1024-416",45973:"Skein1024-424",45974:"Skein1024-432",45975:"Skein1024-440",45976:"Skein1024-448",45977:"Skein1024-456",45978:"Skein1024-464",45979:"Skein1024-472",45980:"Skein1024-480",45981:"Skein1024-488",45982:"Skein1024-496",45983:"Skein1024-504",45984:"Skein1024-512",45985:"Skein1024-520",45986:"Skein1024-528",45987:"Skein1024-536",45988:"Skein1024-544",45989:"Skein1024-552",45990:"Skein1024-560",45991:"Skein1024-568",45992:"Skein1024-576",45993:"Skein1024-584",45994:"Skein1024-592",45995:"Skein1024-600",45996:"Skein1024-608",45997:"Skein1024-616",45998:"Skein1024-624",45999:"Skein1024-632",46000:"Skein1024-640",46001:"Skein1024-648",46002:"Skein1024-656",46003:"Skein1024-664",46004:"Skein1024-672",46005:"Skein1024-680",46006:"Skein1024-688",46007:"Skein1024-696",46008:"Skein1024-704",46009:"Skein1024-712",46010:"Skein1024-720",46011:"Skein1024-728",46012:"Skein1024-736",46013:"Skein1024-744",46014:"Skein1024-752",46015:"Skein1024-760",46016:"Skein1024-768",46017:"Skein1024-776",46018:"Skein1024-784",46019:"Skein1024-792",46020:"Skein1024-800",46021:"Skein1024-808",46022:"Skein1024-816",46023:"Skein1024-824",46024:"Skein1024-832",46025:"Skein1024-840",46026:"Skein1024-848",46027:"Skein1024-856",46028:"Skein1024-864",46029:"Skein1024-872",46030:"Skein1024-880",46031:"Skein1024-888",46032:"Skein1024-896",46033:"Skein1024-904",46034:"Skein1024-912",46035:"Skein1024-920",46036:"Skein1024-928",46037:"Skein1024-936",46038:"Skein1024-944",46039:"Skein1024-952",46040:"Skein1024-960",46041:"Skein1024-968",46042:"Skein1024-976",46043:"Skein1024-984",46044:"Skein1024-992",46045:"Skein1024-1000",46046:"Skein1024-1008",46047:"Skein1024-1016",46048:"Skein1024-1024"}),defaultLengths:Object.freeze({17:20,18:32,19:64,86:32,23:28,22:32,21:48,20:64,24:32,25:64,26:28,27:32,28:48,29:64,34:32,45569:1,45570:2,45571:3,45572:4,45573:5,45574:6,45575:7,45576:8,45577:9,45578:10,45579:11,45580:12,45581:13,45582:14,45583:15,45584:16,45585:17,45586:18,45587:19,45588:20,45589:21,45590:22,45591:23,45592:24,45593:25,45594:26,45595:27,45596:28,45597:29,45598:30,45599:31,45600:32,45601:33,45602:34,45603:35,45604:36,45605:37,45606:38,45607:39,45608:40,45609:41,45610:42,45611:43,45612:44,45613:45,45614:46,45615:47,45616:48,45617:49,45618:50,45619:51,45620:52,45621:53,45622:54,45623:55,45624:56,45625:57,45626:58,45627:59,45628:60,45629:61,45630:62,45631:63,45632:64,45633:1,45634:2,45635:3,45636:4,45637:5,45638:6,45639:7,45640:8,45641:9,45642:10,45643:11,45644:12,45645:13,45646:14,45647:15,45648:16,45649:17,45650:18,45651:19,45652:20,45653:21,45654:22,45655:23,45656:24,45657:25,45658:26,45659:27,45660:28,45661:29,45662:30,45663:31,45664:32,45825:1,45826:2,45827:3,45828:4,45829:5,45830:6,45831:7,45832:8,45833:9,45834:10,45835:11,45836:12,45837:13,45838:14,45839:15,45840:16,45841:17,45842:18,45843:19,45844:20,45845:21,45846:22,45847:23,45848:24,45849:25,45850:26,45851:27,45852:28,45853:29,45854:30,45855:31,45856:32,45857:1,45858:2,45859:3,45860:4,45861:5,45862:6,45863:7,45864:8,45865:9,45866:10,45867:11,45868:12,45869:13,45870:14,45871:15,45872:16,45873:17,45874:18,45875:19,45876:20,45877:21,45878:22,45879:23,45880:24,45881:25,45882:26,45883:27,45884:28,45885:29,45886:30,45887:31,45888:32,45889:33,45890:34,45891:35,45892:36,45893:37,45894:38,45895:39,45896:40,45897:41,45898:42,45899:43,45900:44,45901:45,45902:46,45903:47,45904:48,45905:49,45906:50,45907:51,45908:52,45909:53,45910:54,45911:55,45912:56,45913:57,45914:58,45915:59,45916:60,45917:61,45918:62,45919:63,45920:64,45921:1,45922:2,45923:3,45924:4,45925:5,45926:6,45927:7,45928:8,45929:9,45930:10,45931:11,45932:12,45933:13,45934:14,45935:15,45936:16,45937:17,45938:18,45939:19,45940:20,45941:21,45942:22,45943:23,45944:24,45945:25,45946:26,45947:27,45948:28,45949:29,45950:30,45951:31,45952:32,45953:33,45954:34,45955:35,45956:36,45957:37,45958:38,45959:39,45960:40,45961:41,45962:42,45963:43,45964:44,45965:45,45966:46,45967:47,45968:48,45969:49,45970:50,45971:51,45972:52,45973:53,45974:54,45975:55,45976:56,45977:57,45978:58,45979:59,45980:60,45981:61,45982:62,45983:63,45984:64,45985:65,45986:66,45987:67,45988:68,45989:69,45990:70,45991:71,45992:72,45993:73,45994:74,45995:75,45996:76,45997:77,45998:78,45999:79,46000:80,46001:81,46002:82,46003:83,46004:84,46005:85,46006:86,46007:87,46008:88,46009:89,46010:90,46011:91,46012:92,46013:93,46014:94,46015:95,46016:96,46017:97,46018:98,46019:99,46020:100,46021:101,46022:102,46023:103,46024:104,46025:105,46026:106,46027:107,46028:108,46029:109,46030:110,46031:111,46032:112,46033:113,46034:114,46035:115,46036:116,46037:117,46038:118,46039:119,46040:120,46041:121,46042:122,46043:123,46044:124,46045:125,46046:126,46047:127,46048:128})},Tu=function t(e,n,r){n=n||[];r=r||0;var i=r;for(;e>=Iu;)n[r++]=255&e|Du,e/=128;for(;e&Pu;)n[r++]=255&e|Du,e>>>=7;n[r]=0|e;t.bytes=r-i+1;return n},Du=128,Pu=-128,Iu=Math.pow(2,31);var Ru=function t(e,n){var r,i=0,n=n||0,s=0,o=n,a=e.length;do{if(o>=a)throw t.bytes=0,new RangeError("Could not decode varint");r=e[o++],i+=s<28?(r&Bu)<<s:(r&Bu)*Math.pow(2,s),s+=7}while(r>=_u);t.bytes=o-n;return i},_u=128,Bu=127;var Hu=Math.pow(2,7),Nu=Math.pow(2,14),Ou=Math.pow(2,21),ju=Math.pow(2,28),Lu=Math.pow(2,35),Mu=Math.pow(2,42),Vu=Math.pow(2,49),Uu=Math.pow(2,56),Ku=Math.pow(2,63),qu={encode:Tu,decode:Ru,encodingLength:function(t){return t<Hu?1:t<Nu?2:t<Ou?3:t<ju?4:t<Lu?5:t<Mu?6:t<Vu?7:t<Uu?8:t<Ku?9:10}},zu=r(function(t,e){function n(t){e.decode(t)}e.names=Cu.names,e.codes=Cu.codes,e.defaultLengths=Cu.defaultLengths,e.toHexString=function(t){if(!ee(t))throw new Error("must be passed a buffer");return t.toString("hex")},e.fromHexString=function(t){return bt.from(t,"hex")},e.toB58String=function(t){if(!ee(t))throw new Error("must be passed a buffer");return Fu.encode(t)},e.fromB58String=function(t){let e=t;return ee(t)&&(e=t.toString()),bt.from(Fu.decode(e))},e.decode=function(t){if(!ee(t))throw new Error("multihash must be a Buffer");if(t.length<3)throw new Error("multihash too short. must be > 3 bytes.");let n=qu.decode(t);if(!e.isValidCode(n))throw new Error(`multihash unknown function code: 0x${n.toString(16)}`);t=t.slice(qu.decode.bytes);let r=qu.decode(t);if(r<1)throw new Error(`multihash invalid length: 0x${r.toString(16)}`);if((t=t.slice(qu.decode.bytes)).length!==r)throw new Error(`multihash length inconsistent: 0x${t.toString("hex")}`);return{code:n,name:Cu.codes[n],length:r,digest:t}},e.encode=function(t,n,r){if(!t||!n)throw new Error("multihash encode requires at least two args: digest, code");const i=e.coerceCode(n);if(!ee(t))throw new Error("digest should be a Buffer");if(null==r&&(r=t.length),r&&t.length!==r)throw new Error("digest length should be equal to specified length.");return bt.concat([bt.from(qu.encode(i)),bt.from(qu.encode(r)),t])},e.coerceCode=function(t){let n=t;if("string"==typeof t){if(!Cu.names[t])throw new Error(`Unrecognized hash function named: ${t}`);n=Cu.names[t]}if("number"!=typeof n)throw new Error(`Hash function code should be a number. Got: ${n}`);if(!Cu.codes[n]&&!e.isAppCode(n))throw new Error(`Unrecognized function code: ${n}`);return n},e.isAppCode=function(t){return t>0&&t<16},e.isValidCode=function(t){return!!e.isAppCode(t)||!!Cu.codes[t]},e.validate=n,e.prefix=function(t){return n(t),t.slice(0,2)}});zu.names,zu.codes,zu.defaultLengths,zu.toHexString,zu.fromHexString,zu.toB58String,zu.fromB58String,zu.decode,zu.encode,zu.coerceCode,zu.isAppCode,zu.isValidCode,zu.validate,zu.prefix;function Yu(t,e){if(t===e)return 0;for(var n=t.length,r=e.length,i=0,s=Math.min(n,r);i<s;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0}var Gu,Ju=Object.prototype.hasOwnProperty,Wu=Object.keys||function(t){var e=[];for(var n in t)Ju.call(t,n)&&e.push(n);return e},$u=Array.prototype.slice;function Xu(){return void 0!==Gu?Gu:Gu="foo"===function(){}.name}function Zu(t){return Object.prototype.toString.call(t)}function Qu(t){return!ee(t)&&("function"==typeof it.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}function tc(t,e){t||oc(t,!0,e,"==",ac)}var ec=/\s*function\s+([^\(\s]*)\s*/;function nc(t){if(Sa(t)){if(Xu())return t.name;var e=t.toString().match(ec);return e&&e[1]}}function rc(t){var e;this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=ic(sc((e=this).actual),128)+" "+e.operator+" "+ic(sc(e.expected),128),this.generatedMessage=!0);var n=t.stackStartFunction||oc;if(Error.captureStackTrace)Error.captureStackTrace(this,n);else{var r=new Error;if(r.stack){var i=r.stack,s=nc(n),o=i.indexOf("\n"+s);if(o>=0){var a=i.indexOf("\n",o+1);i=i.substring(a+1)}this.stack=i}}}function ic(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function sc(t){if(Xu()||!Sa(t))return oa(t);var e=nc(t);return"[Function"+(e?": "+e:"")+"]"}function oc(t,e,n,r,i){throw new rc({message:n,actual:t,expected:e,operator:r,stackStartFunction:i})}function ac(t,e){t||oc(t,!0,e,"==",ac)}function hc(t,e,n){t!=e&&oc(t,e,n,"==",hc)}function uc(t,e,n){t==e&&oc(t,e,n,"!=",uc)}function cc(t,e,n){lc(t,e,!1)||oc(t,e,n,"deepEqual",cc)}function fc(t,e,n){lc(t,e,!0)||oc(t,e,n,"deepStrictEqual",fc)}function lc(t,e,n,r){if(t===e)return!0;if(ee(t)&&ee(e))return 0===Yu(t,e);if(ma(t)&&ma(e))return t.getTime()===e.getTime();if(ya(t)&&ya(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(Qu(t)&&Qu(e)&&Zu(t)===Zu(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===Yu(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(ee(t)!==ee(e))return!1;var i=(r=r||{actual:[],expected:[]}).actual.indexOf(t);return-1!==i&&i===r.expected.indexOf(e)||(r.actual.push(t),r.expected.push(e),function(t,e,n,r){if(null===t||void 0===t||null===e||void 0===e)return!1;if(wa(t)||wa(e))return t===e;if(n&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var i=dc(t),s=dc(e);if(i&&!s||!i&&s)return!1;if(i)return t=$u.call(t),e=$u.call(e),lc(t,e,n);var o,a,h=Wu(t),u=Wu(e);if(h.length!==u.length)return!1;for(h.sort(),u.sort(),a=h.length-1;a>=0;a--)if(h[a]!==u[a])return!1;for(a=h.length-1;a>=0;a--)if(o=h[a],!lc(t[o],e[o],n,r))return!1;return!0}(t,e,n,r))}return n?t===e:t==e}function dc(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function pc(t,e,n){lc(t,e,!1)&&oc(t,e,n,"notDeepEqual",pc)}function gc(t,e,n){lc(t,e,!0)&&oc(t,e,n,"notDeepStrictEqual",gc)}function yc(t,e,n){t!==e&&oc(t,e,n,"===",yc)}function vc(t,e,n){t===e&&oc(t,e,n,"!==",vc)}function mc(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function bc(t,e,n,r){var i;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),i=function(t){var e;try{t()}catch(t){e=t}return e}(e),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),t&&!i&&oc(i,n,"Missing expected exception"+r);var s="string"==typeof r,o=!t&&ba(i),a=!t&&i&&!n;if((o&&s&&mc(i,n)||a)&&oc(i,n,"Got unwanted exception"+r),t&&i&&n&&!mc(i,n)||!t&&i)throw i}function Sc(t,e,n){bc(!0,t,e,n)}function wc(t,e,n){bc(!1,t,e,n)}function xc(t){if(t)throw t}tc.AssertionError=rc,na(rc,Error),tc.fail=oc,tc.ok=ac,tc.equal=hc,tc.notEqual=uc,tc.deepEqual=cc,tc.deepStrictEqual=fc,tc.notDeepEqual=pc,tc.notDeepStrictEqual=gc,tc.strictEqual=yc,tc.notStrictEqual=vc,tc.throws=Sc,tc.doesNotThrow=wc,tc.ifError=xc;var kc=Object.freeze({default:tc,AssertionError:rc,fail:oc,ok:ac,assert:ac,equal:hc,notEqual:uc,deepEqual:cc,deepStrictEqual:fc,notDeepEqual:pc,notDeepStrictEqual:gc,strictEqual:yc,notStrictEqual:vc,throws:Sc,doesNotThrow:wc,ifError:xc});var Ec=function(t,{className:e,symbolName:n}){const r=Symbol.for(n),i={[e]:class extends t{constructor(...t){super(...t),Object.defineProperty(this,r,{value:!0})}get[Symbol.toStringTag](){return e}}}[e];return i[`is${e}`]=(t=>!(!t||!t[r])),i},Ac=function(t,{className:e,symbolName:n,withoutNew:r}){const i=Symbol.for(n),s={[e]:function(...e){if(r&&!(this instanceof s))return new s(...e);const n=t.call(this,...e)||this;return n&&!n[i]&&Object.defineProperty(n,i,{value:!0}),n}}[e];return s.prototype=Object.create(t.prototype),s.prototype.constructor=s,Object.defineProperty(s.prototype,Symbol.toStringTag,{get:()=>e}),s[`is${e}`]=(t=>!(!t||!t[i])),s};Ec.proto=Ac;var Fc=r(function(e){!function(){var n="input is invalid type",r="object"==typeof window,i=r?window:{};i.JS_SHA3_NO_WINDOW&&(r=!1);var s=!r&&"object"==typeof self;!i.JS_SHA3_NO_NODE_JS&&"object"==typeof zo&&zo.versions&&zo.versions.node?i=t:s&&(i=self);var o=!i.JS_SHA3_NO_COMMON_JS&&e.exports,a=!i.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,h="0123456789abcdef".split(""),u=[4,1024,262144,67108864],c=[0,8,16,24],f=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],l=[224,256,384,512],d=[128,256],p=["hex","buffer","arrayBuffer","array","digest"],g={128:168,256:136};!i.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),!a||!i.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(t){return"object"==typeof t&&t.buffer&&t.buffer.constructor===ArrayBuffer});for(var y=function(t,e,n){return function(r){return new I(t,e,t).update(r)[n]()}},v=function(t,e,n){return function(r,i){return new I(t,e,i).update(r)[n]()}},m=function(t,e,n){return function(e,r,i,s){return k["cshake"+t].update(e,r,i,s)[n]()}},b=function(t,e,n){return function(e,r,i,s){return k["kmac"+t].update(e,r,i,s)[n]()}},S=function(t,e,n,r){for(var i=0;i<p.length;++i){var s=p[i];t[s]=e(n,r,s)}return t},w=function(t,e){var n=y(t,e,"hex");return n.create=function(){return new I(t,e,t)},n.update=function(t){return n.create().update(t)},S(n,y,t,e)},x=[{name:"keccak",padding:[1,256,65536,16777216],bits:l,createMethod:w},{name:"sha3",padding:[6,1536,393216,100663296],bits:l,createMethod:w},{name:"shake",padding:[31,7936,2031616,520093696],bits:d,createMethod:function(t,e){var n=v(t,e,"hex");return n.create=function(n){return new I(t,e,n)},n.update=function(t,e){return n.create(e).update(t)},S(n,v,t,e)}},{name:"cshake",padding:u,bits:d,createMethod:function(t,e){var n=g[t],r=m(t,0,"hex");return r.create=function(r,i,s){return i||s?new I(t,e,r).bytepad([i,s],n):k["shake"+t].create(r)},r.update=function(t,e,n,i){return r.create(e,n,i).update(t)},S(r,m,t,e)}},{name:"kmac",padding:u,bits:d,createMethod:function(t,e){var n=g[t],r=b(t,0,"hex");return r.create=function(r,i,s){return new R(t,e,i).bytepad(["KMAC",s],n).bytepad([r],n)},r.update=function(t,e,n,i){return r.create(t,n,i).update(e)},S(r,b,t,e)}}],k={},E=[],A=0;A<x.length;++A)for(var F=x[A],C=F.bits,T=0;T<C.length;++T){var D=F.name+"_"+C[T];if(E.push(D),k[D]=F.createMethod(C[T],F.padding),"sha3"!==F.name){var P=F.name+C[T];E.push(P),k[P]=k[D]}}function I(t,e,n){this.blocks=[],this.s=[],this.padding=e,this.outputBits=n,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(t<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=n>>5,this.extraBytes=(31&n)>>3;for(var r=0;r<50;++r)this.s[r]=0}function R(t,e,n){I.call(this,t,e,n)}I.prototype.update=function(t){if(!this.finalized){var e,r=typeof t;if("string"!==r){if("object"!==r)throw n;if(null===t)throw n;if(a&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||a&&ArrayBuffer.isView(t)))throw n;e=!0}for(var i,s,o=this.blocks,h=this.byteCount,u=t.length,f=this.blockCount,l=0,d=this.s;l<u;){if(this.reset)for(this.reset=!1,o[0]=this.block,i=1;i<f+1;++i)o[i]=0;if(e)for(i=this.start;l<u&&i<h;++l)o[i>>2]|=t[l]<<c[3&i++];else for(i=this.start;l<u&&i<h;++l)(s=t.charCodeAt(l))<128?o[i>>2]|=s<<c[3&i++]:s<2048?(o[i>>2]|=(192|s>>6)<<c[3&i++],o[i>>2]|=(128|63&s)<<c[3&i++]):s<55296||s>=57344?(o[i>>2]|=(224|s>>12)<<c[3&i++],o[i>>2]|=(128|s>>6&63)<<c[3&i++],o[i>>2]|=(128|63&s)<<c[3&i++]):(s=65536+((1023&s)<<10|1023&t.charCodeAt(++l)),o[i>>2]|=(240|s>>18)<<c[3&i++],o[i>>2]|=(128|s>>12&63)<<c[3&i++],o[i>>2]|=(128|s>>6&63)<<c[3&i++],o[i>>2]|=(128|63&s)<<c[3&i++]);if(this.lastByteIndex=i,i>=h){for(this.start=i-h,this.block=o[f],i=0;i<f;++i)d[i]^=o[i];_(d),this.reset=!0}else this.start=i}return this}},I.prototype.encode=function(t,e){var n=255&t,r=1,i=[n];for(n=255&(t>>=8);n>0;)i.unshift(n),n=255&(t>>=8),++r;return e?i.push(r):i.unshift(r),this.update(i),i.length},I.prototype.encodeString=function(t){var e,r=typeof t;if("string"!==r){if("object"!==r)throw n;if(null===t)throw n;if(a&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||a&&ArrayBuffer.isView(t)))throw n;e=!0}var i=0,s=t.length;if(e)i=s;else for(var o=0;o<t.length;++o){var h=t.charCodeAt(o);h<128?i+=1:h<2048?i+=2:h<55296||h>=57344?i+=3:(h=65536+((1023&h)<<10|1023&t.charCodeAt(++o)),i+=4)}return i+=this.encode(8*i),this.update(t),i},I.prototype.bytepad=function(t,e){for(var n=this.encode(e),r=0;r<t.length;++r)n+=this.encodeString(t[r]);var i=e-n%e,s=[];return s.length=i,this.update(s),this},I.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex,n=this.blockCount,r=this.s;if(t[e>>2]|=this.padding[3&e],this.lastByteIndex===this.byteCount)for(t[0]=t[n],e=1;e<n+1;++e)t[e]=0;for(t[n-1]|=2147483648,e=0;e<n;++e)r[e]^=t[e];_(r)}},I.prototype.toString=I.prototype.hex=function(){this.finalize();for(var t,e=this.blockCount,n=this.s,r=this.outputBlocks,i=this.extraBytes,s=0,o=0,a="";o<r;){for(s=0;s<e&&o<r;++s,++o)t=n[s],a+=h[t>>4&15]+h[15&t]+h[t>>12&15]+h[t>>8&15]+h[t>>20&15]+h[t>>16&15]+h[t>>28&15]+h[t>>24&15];o%e==0&&(_(n),s=0)}return i&&(t=n[s],a+=h[t>>4&15]+h[15&t],i>1&&(a+=h[t>>12&15]+h[t>>8&15]),i>2&&(a+=h[t>>20&15]+h[t>>16&15])),a},I.prototype.arrayBuffer=function(){this.finalize();var t,e=this.blockCount,n=this.s,r=this.outputBlocks,i=this.extraBytes,s=0,o=0,a=this.outputBits>>3;t=i?new ArrayBuffer(r+1<<2):new ArrayBuffer(a);for(var h=new Uint32Array(t);o<r;){for(s=0;s<e&&o<r;++s,++o)h[o]=n[s];o%e==0&&_(n)}return i&&(h[s]=n[s],t=t.slice(0,a)),t},I.prototype.buffer=I.prototype.arrayBuffer,I.prototype.digest=I.prototype.array=function(){this.finalize();for(var t,e,n=this.blockCount,r=this.s,i=this.outputBlocks,s=this.extraBytes,o=0,a=0,h=[];a<i;){for(o=0;o<n&&a<i;++o,++a)t=a<<2,e=r[o],h[t]=255&e,h[t+1]=e>>8&255,h[t+2]=e>>16&255,h[t+3]=e>>24&255;a%n==0&&_(r)}return s&&(t=a<<2,e=r[o],h[t]=255&e,s>1&&(h[t+1]=e>>8&255),s>2&&(h[t+2]=e>>16&255)),h},R.prototype=new I,R.prototype.finalize=function(){return this.encode(this.outputBits,!0),I.prototype.finalize.call(this)};var _=function(t){var e,n,r,i,s,o,a,h,u,c,l,d,p,g,y,v,m,b,S,w,x,k,E,A,F,C,T,D,P,I,R,_,B,H,N,O,j,L,M,V,U,K,q,z,Y,G,J,W,$,X,Z,Q,tt,et,nt,rt,it,st,ot,at,ht,ut,ct;for(r=0;r<48;r+=2)i=t[0]^t[10]^t[20]^t[30]^t[40],s=t[1]^t[11]^t[21]^t[31]^t[41],o=t[2]^t[12]^t[22]^t[32]^t[42],a=t[3]^t[13]^t[23]^t[33]^t[43],h=t[4]^t[14]^t[24]^t[34]^t[44],u=t[5]^t[15]^t[25]^t[35]^t[45],c=t[6]^t[16]^t[26]^t[36]^t[46],l=t[7]^t[17]^t[27]^t[37]^t[47],e=(d=t[8]^t[18]^t[28]^t[38]^t[48])^(o<<1|a>>>31),n=(p=t[9]^t[19]^t[29]^t[39]^t[49])^(a<<1|o>>>31),t[0]^=e,t[1]^=n,t[10]^=e,t[11]^=n,t[20]^=e,t[21]^=n,t[30]^=e,t[31]^=n,t[40]^=e,t[41]^=n,e=i^(h<<1|u>>>31),n=s^(u<<1|h>>>31),t[2]^=e,t[3]^=n,t[12]^=e,t[13]^=n,t[22]^=e,t[23]^=n,t[32]^=e,t[33]^=n,t[42]^=e,t[43]^=n,e=o^(c<<1|l>>>31),n=a^(l<<1|c>>>31),t[4]^=e,t[5]^=n,t[14]^=e,t[15]^=n,t[24]^=e,t[25]^=n,t[34]^=e,t[35]^=n,t[44]^=e,t[45]^=n,e=h^(d<<1|p>>>31),n=u^(p<<1|d>>>31),t[6]^=e,t[7]^=n,t[16]^=e,t[17]^=n,t[26]^=e,t[27]^=n,t[36]^=e,t[37]^=n,t[46]^=e,t[47]^=n,e=c^(i<<1|s>>>31),n=l^(s<<1|i>>>31),t[8]^=e,t[9]^=n,t[18]^=e,t[19]^=n,t[28]^=e,t[29]^=n,t[38]^=e,t[39]^=n,t[48]^=e,t[49]^=n,g=t[0],y=t[1],G=t[11]<<4|t[10]>>>28,J=t[10]<<4|t[11]>>>28,D=t[20]<<3|t[21]>>>29,P=t[21]<<3|t[20]>>>29,at=t[31]<<9|t[30]>>>23,ht=t[30]<<9|t[31]>>>23,K=t[40]<<18|t[41]>>>14,q=t[41]<<18|t[40]>>>14,H=t[2]<<1|t[3]>>>31,N=t[3]<<1|t[2]>>>31,v=t[13]<<12|t[12]>>>20,m=t[12]<<12|t[13]>>>20,W=t[22]<<10|t[23]>>>22,$=t[23]<<10|t[22]>>>22,I=t[33]<<13|t[32]>>>19,R=t[32]<<13|t[33]>>>19,ut=t[42]<<2|t[43]>>>30,ct=t[43]<<2|t[42]>>>30,et=t[5]<<30|t[4]>>>2,nt=t[4]<<30|t[5]>>>2,O=t[14]<<6|t[15]>>>26,j=t[15]<<6|t[14]>>>26,b=t[25]<<11|t[24]>>>21,S=t[24]<<11|t[25]>>>21,X=t[34]<<15|t[35]>>>17,Z=t[35]<<15|t[34]>>>17,_=t[45]<<29|t[44]>>>3,B=t[44]<<29|t[45]>>>3,A=t[6]<<28|t[7]>>>4,F=t[7]<<28|t[6]>>>4,rt=t[17]<<23|t[16]>>>9,it=t[16]<<23|t[17]>>>9,L=t[26]<<25|t[27]>>>7,M=t[27]<<25|t[26]>>>7,w=t[36]<<21|t[37]>>>11,x=t[37]<<21|t[36]>>>11,Q=t[47]<<24|t[46]>>>8,tt=t[46]<<24|t[47]>>>8,z=t[8]<<27|t[9]>>>5,Y=t[9]<<27|t[8]>>>5,C=t[18]<<20|t[19]>>>12,T=t[19]<<20|t[18]>>>12,st=t[29]<<7|t[28]>>>25,ot=t[28]<<7|t[29]>>>25,V=t[38]<<8|t[39]>>>24,U=t[39]<<8|t[38]>>>24,k=t[48]<<14|t[49]>>>18,E=t[49]<<14|t[48]>>>18,t[0]=g^~v&b,t[1]=y^~m&S,t[10]=A^~C&D,t[11]=F^~T&P,t[20]=H^~O&L,t[21]=N^~j&M,t[30]=z^~G&W,t[31]=Y^~J&$,t[40]=et^~rt&st,t[41]=nt^~it&ot,t[2]=v^~b&w,t[3]=m^~S&x,t[12]=C^~D&I,t[13]=T^~P&R,t[22]=O^~L&V,t[23]=j^~M&U,t[32]=G^~W&X,t[33]=J^~$&Z,t[42]=rt^~st&at,t[43]=it^~ot&ht,t[4]=b^~w&k,t[5]=S^~x&E,t[14]=D^~I&_,t[15]=P^~R&B,t[24]=L^~V&K,t[25]=M^~U&q,t[34]=W^~X&Q,t[35]=$^~Z&tt,t[44]=st^~at&ut,t[45]=ot^~ht&ct,t[6]=w^~k&g,t[7]=x^~E&y,t[16]=I^~_&A,t[17]=R^~B&F,t[26]=V^~K&H,t[27]=U^~q&N,t[36]=X^~Q&z,t[37]=Z^~tt&Y,t[46]=at^~ut&et,t[47]=ht^~ct&nt,t[8]=k^~g&v,t[9]=E^~y&m,t[18]=_^~A&C,t[19]=B^~F&T,t[28]=K^~H&O,t[29]=q^~N&j,t[38]=Q^~z&G,t[39]=tt^~Y&J,t[48]=ut^~et&rt,t[49]=ct^~nt&it,t[0]^=f[r],t[1]^=f[r+1]};if(o)e.exports=k;else{for(A=0;A<E.length;++A)i[E[A]]=k[E[A]];0}}()}),Cc=r(function(t,e){!function(n,r){var i={version:"3.0.1",x86:{},x64:{}};function s(t,e){return(65535&t)*e+(((t>>>16)*e&65535)<<16)}function o(t,e){return t<<e|t>>>32-e}function a(t){return t=s(t^=t>>>16,2246822507),t=s(t^=t>>>13,3266489909),t^=t>>>16}function h(t,e){t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]],e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]];var n=[0,0,0,0];return n[3]+=t[3]+e[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=t[2]+e[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=t[1]+e[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=t[0]+e[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]}function u(t,e){t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]],e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]];var n=[0,0,0,0];return n[3]+=t[3]*e[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=t[2]*e[3],n[1]+=n[2]>>>16,n[2]&=65535,n[2]+=t[3]*e[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=t[1]*e[3],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=t[2]*e[2],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=t[3]*e[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=t[0]*e[3]+t[1]*e[2]+t[2]*e[1]+t[3]*e[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]}function c(t,e){return 32===(e%=64)?[t[1],t[0]]:e<32?[t[0]<<e|t[1]>>>32-e,t[1]<<e|t[0]>>>32-e]:(e-=32,[t[1]<<e|t[0]>>>32-e,t[0]<<e|t[1]>>>32-e])}function f(t,e){return 0===(e%=64)?t:e<32?[t[0]<<e|t[1]>>>32-e,t[1]<<e]:[t[1]<<e-32,0]}function l(t,e){return[t[0]^e[0],t[1]^e[1]]}function d(t){return t=l(t=u(t=l(t=u(t=l(t,[0,t[0]>>>1]),[4283543511,3981806797]),[0,t[0]>>>1]),[3301882366,444984403]),[0,t[0]>>>1])}i.x86.hash32=function(t,e){t=t||"",e=e||0;for(var n=t.length%4,r=t.length-n,i=e,h=0,u=3432918353,c=461845907,f=0;f<r;f+=4)i=s(i=o(i^=h=s(h=o(h=s(h=255&t.charCodeAt(f)|(255&t.charCodeAt(f+1))<<8|(255&t.charCodeAt(f+2))<<16|(255&t.charCodeAt(f+3))<<24,u),15),c),13),5)+3864292196;switch(h=0,n){case 3:h^=(255&t.charCodeAt(f+2))<<16;case 2:h^=(255&t.charCodeAt(f+1))<<8;case 1:i^=h=s(h=o(h=s(h^=255&t.charCodeAt(f),u),15),c)}return(i=a(i^=t.length))>>>0},i.x86.hash128=function(t,e){t=t||"",e=e||0;for(var n=t.length%16,r=t.length-n,i=e,h=e,u=e,c=e,f=0,l=0,d=0,p=0,g=597399067,y=2869860233,v=951274213,m=2716044179,b=0;b<r;b+=16)f=255&t.charCodeAt(b)|(255&t.charCodeAt(b+1))<<8|(255&t.charCodeAt(b+2))<<16|(255&t.charCodeAt(b+3))<<24,l=255&t.charCodeAt(b+4)|(255&t.charCodeAt(b+5))<<8|(255&t.charCodeAt(b+6))<<16|(255&t.charCodeAt(b+7))<<24,d=255&t.charCodeAt(b+8)|(255&t.charCodeAt(b+9))<<8|(255&t.charCodeAt(b+10))<<16|(255&t.charCodeAt(b+11))<<24,p=255&t.charCodeAt(b+12)|(255&t.charCodeAt(b+13))<<8|(255&t.charCodeAt(b+14))<<16|(255&t.charCodeAt(b+15))<<24,i=o(i^=f=s(f=o(f=s(f,g),15),y),19),i=s(i+=h,5)+1444728091,h=o(h^=l=s(l=o(l=s(l,y),16),v),17),h=s(h+=u,5)+197830471,u=o(u^=d=s(d=o(d=s(d,v),17),m),15),u=s(u+=c,5)+2530024501,c=o(c^=p=s(p=o(p=s(p,m),18),g),13),c=s(c+=i,5)+850148119;switch(f=0,l=0,d=0,p=0,n){case 15:p^=t.charCodeAt(b+14)<<16;case 14:p^=t.charCodeAt(b+13)<<8;case 13:c^=p=s(p=o(p=s(p^=t.charCodeAt(b+12),m),18),g);case 12:d^=t.charCodeAt(b+11)<<24;case 11:d^=t.charCodeAt(b+10)<<16;case 10:d^=t.charCodeAt(b+9)<<8;case 9:u^=d=s(d=o(d=s(d^=t.charCodeAt(b+8),v),17),m);case 8:l^=t.charCodeAt(b+7)<<24;case 7:l^=t.charCodeAt(b+6)<<16;case 6:l^=t.charCodeAt(b+5)<<8;case 5:h^=l=s(l=o(l=s(l^=t.charCodeAt(b+4),y),16),v);case 4:f^=t.charCodeAt(b+3)<<24;case 3:f^=t.charCodeAt(b+2)<<16;case 2:f^=t.charCodeAt(b+1)<<8;case 1:i^=f=s(f=o(f=s(f^=t.charCodeAt(b),g),15),y)}return i^=t.length,i+=h^=t.length,i+=u^=t.length,h+=i+=c^=t.length,u+=i,c+=i,i=a(i),i+=h=a(h),i+=u=a(u),h+=i+=c=a(c),u+=i,c+=i,("00000000"+(i>>>0).toString(16)).slice(-8)+("00000000"+(h>>>0).toString(16)).slice(-8)+("00000000"+(u>>>0).toString(16)).slice(-8)+("00000000"+(c>>>0).toString(16)).slice(-8)},i.x64.hash128=function(t,e){t=t||"",e=e||0;for(var n=t.length%16,r=t.length-n,i=[0,e],s=[0,e],o=[0,0],a=[0,0],p=[2277735313,289559509],g=[1291169091,658871167],y=0;y<r;y+=16)o=[255&t.charCodeAt(y+4)|(255&t.charCodeAt(y+5))<<8|(255&t.charCodeAt(y+6))<<16|(255&t.charCodeAt(y+7))<<24,255&t.charCodeAt(y)|(255&t.charCodeAt(y+1))<<8|(255&t.charCodeAt(y+2))<<16|(255&t.charCodeAt(y+3))<<24],a=[255&t.charCodeAt(y+12)|(255&t.charCodeAt(y+13))<<8|(255&t.charCodeAt(y+14))<<16|(255&t.charCodeAt(y+15))<<24,255&t.charCodeAt(y+8)|(255&t.charCodeAt(y+9))<<8|(255&t.charCodeAt(y+10))<<16|(255&t.charCodeAt(y+11))<<24],i=h(u(i=h(i=c(i=l(i,o=u(o=c(o=u(o,p),31),g)),27),s),[0,5]),[0,1390208809]),s=h(u(s=h(s=c(s=l(s,a=u(a=c(a=u(a,g),33),p)),31),i),[0,5]),[0,944331445]);switch(o=[0,0],a=[0,0],n){case 15:a=l(a,f([0,t.charCodeAt(y+14)],48));case 14:a=l(a,f([0,t.charCodeAt(y+13)],40));case 13:a=l(a,f([0,t.charCodeAt(y+12)],32));case 12:a=l(a,f([0,t.charCodeAt(y+11)],24));case 11:a=l(a,f([0,t.charCodeAt(y+10)],16));case 10:a=l(a,f([0,t.charCodeAt(y+9)],8));case 9:s=l(s,a=u(a=c(a=u(a=l(a,[0,t.charCodeAt(y+8)]),g),33),p));case 8:o=l(o,f([0,t.charCodeAt(y+7)],56));case 7:o=l(o,f([0,t.charCodeAt(y+6)],48));case 6:o=l(o,f([0,t.charCodeAt(y+5)],40));case 5:o=l(o,f([0,t.charCodeAt(y+4)],32));case 4:o=l(o,f([0,t.charCodeAt(y+3)],24));case 3:o=l(o,f([0,t.charCodeAt(y+2)],16));case 2:o=l(o,f([0,t.charCodeAt(y+1)],8));case 1:i=l(i,o=u(o=c(o=u(o=l(o,[0,t.charCodeAt(y)]),p),31),g))}return i=l(i,[0,t.length]),s=h(s=l(s,[0,t.length]),i=h(i,s)),i=d(i),s=h(s=d(s),i=h(i,s)),("00000000"+(i[0]>>>0).toString(16)).slice(-8)+("00000000"+(i[1]>>>0).toString(16)).slice(-8)+("00000000"+(s[0]>>>0).toString(16)).slice(-8)+("00000000"+(s[1]>>>0).toString(16)).slice(-8)},t.exports&&(e=t.exports=i),e.murmurHash3=i}()}),Tc=(Cc.murmurHash3,Cc),Dc=r(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){e|=0;for(var n=Math.max(t.length-e,0),r=Array(n),i=0;i<n;i++)r[i]=t[e+i];return r},t.exports=e.default});n(Dc);var Pc=r(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.hasNextTick=e.hasSetImmediate=void 0,e.fallback=a,e.wrap=h;var n,r=(n=Dc)&&n.__esModule?n:{default:n};var i,s=e.hasSetImmediate="function"==typeof setImmediate&&setImmediate,o=e.hasNextTick="object"==typeof zo&&!0;function a(t){setTimeout(t,0)}function h(t){return function(e){var n=(0,r.default)(arguments,1);t(function(){e.apply(null,n)})}}i=s?setImmediate:o?Po:a,e.default=h(i)});n(Pc);Pc.hasNextTick,Pc.hasSetImmediate,Pc.fallback,Pc.wrap;var Ic=r(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=Pc)&&n.__esModule?n:{default:n};e.default=r.default,t.exports=e.default});n(Ic);var Rc=r(function(t,e){e.toCallback=(t=>(function(e,n){const r=(t,e)=>Ic(()=>{n(t,e)});let i;try{i=t(e)}catch(t){return void r(t)}r(null,i)})),e.toBuf=((t,e)=>n=>{let r=t(n,e);return bt.from(r,"hex")}),e.fromString=((t,e)=>n=>{const r=ee(n)?n.toString():n;return t(r,e)}),e.fromNumberTo32BitBuf=((t,e)=>n=>{let r=t(n,e);const i=new Array(4);for(let t=0;t<4;t++)i[t]=255&r,r>>=8;return bt.from(i)})});Rc.toCallback,Rc.toBuf,Rc.fromString,Rc.fromNumberTo32BitBuf;const _c=Rc.toCallback;var Bc={sha1:_c(t=>Su.createHash("sha1").update(t).digest()),sha2256:_c(t=>Su.createHash("sha256").update(t).digest()),sha2512:_c(t=>Su.createHash("sha512").update(t).digest())},Hc="Input must be an string, Buffer or Uint8Array";function Nc(t){return(4294967296+t).toString(16).substring(1)}var Oc={normalizeInput:function(t){var e;if(t instanceof Uint8Array)e=t;else if(t instanceof bt)e=new Uint8Array(t);else{if("string"!=typeof t)throw new Error(Hc);e=new Uint8Array(bt.from(t,"utf8"))}return e},toHex:function(t){return Array.prototype.map.call(t,function(t){return(t<16?"0":"")+t.toString(16)}).join("")},debugPrint:function(t,e,n){for(var r="\n"+t+" = ",i=0;i<e.length;i+=2){if(32===n)r+=Nc(e[i]).toUpperCase(),r+=" ",r+=Nc(e[i+1]).toUpperCase();else{if(64!==n)throw new Error("Invalid size "+n);r+=Nc(e[i+1]).toUpperCase(),r+=Nc(e[i]).toUpperCase()}i%6==4?r+="\n"+new Array(t.length+4).join(" "):i<e.length-2&&(r+=" ")}console.log(r)},testSpeed:function(t,e,n){for(var r=(new Date).getTime(),i=new Uint8Array(e),s=0;s<e;s++)i[s]=s%256;var o=(new Date).getTime();for(console.log("Generated random input in "+(o-r)+"ms"),r=o,s=0;s<n;s++){var a=t(i),h=(new Date).getTime(),u=h-r;r=h,console.log("Hashed in "+u+"ms: "+a.substring(0,20)+"..."),console.log(Math.round(e/(1<<20)/(u/1e3)*100)/100+" MB PER SECOND")}}};function jc(t,e,n){var r=t[e]+t[n],i=t[e+1]+t[n+1];r>=4294967296&&i++,t[e]=r,t[e+1]=i}function Lc(t,e,n,r){var i=t[e]+n;n<0&&(i+=4294967296);var s=t[e+1]+r;i>=4294967296&&s++,t[e]=i,t[e+1]=s}function Mc(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function Vc(t,e,n,r,i,s){var o=zc[i],a=zc[i+1],h=zc[s],u=zc[s+1];jc(qc,t,e),Lc(qc,t,o,a);var c=qc[r]^qc[t],f=qc[r+1]^qc[t+1];qc[r]=f,qc[r+1]=c,jc(qc,n,r),c=qc[e]^qc[n],f=qc[e+1]^qc[n+1],qc[e]=c>>>24^f<<8,qc[e+1]=f>>>24^c<<8,jc(qc,t,e),Lc(qc,t,h,u),c=qc[r]^qc[t],f=qc[r+1]^qc[t+1],qc[r]=c>>>16^f<<16,qc[r+1]=f>>>16^c<<16,jc(qc,n,r),c=qc[e]^qc[n],f=qc[e+1]^qc[n+1],qc[e]=f>>>31^c<<1,qc[e+1]=c>>>31^f<<1}var Uc=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Kc=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3].map(function(t){return 2*t})),qc=new Uint32Array(32),zc=new Uint32Array(32);function Yc(t,e){var n=0;for(n=0;n<16;n++)qc[n]=t.h[n],qc[n+16]=Uc[n];for(qc[24]=qc[24]^t.t,qc[25]=qc[25]^t.t/4294967296,e&&(qc[28]=~qc[28],qc[29]=~qc[29]),n=0;n<32;n++)zc[n]=Mc(t.b,4*n);for(n=0;n<12;n++)Vc(0,8,16,24,Kc[16*n+0],Kc[16*n+1]),Vc(2,10,18,26,Kc[16*n+2],Kc[16*n+3]),Vc(4,12,20,28,Kc[16*n+4],Kc[16*n+5]),Vc(6,14,22,30,Kc[16*n+6],Kc[16*n+7]),Vc(0,10,20,30,Kc[16*n+8],Kc[16*n+9]),Vc(2,12,22,24,Kc[16*n+10],Kc[16*n+11]),Vc(4,14,16,26,Kc[16*n+12],Kc[16*n+13]),Vc(6,8,18,28,Kc[16*n+14],Kc[16*n+15]);for(n=0;n<16;n++)t.h[n]=t.h[n]^qc[n]^qc[n+16]}function Gc(t,e){if(0===t||t>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(e&&e.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");for(var n={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:t},r=0;r<16;r++)n.h[r]=Uc[r];var i=e?e.length:0;return n.h[0]^=16842752^i<<8^t,e&&(Jc(n,e),n.c=128),n}function Jc(t,e){for(var n=0;n<e.length;n++)128===t.c&&(t.t+=t.c,Yc(t,!1),t.c=0),t.b[t.c++]=e[n]}function Wc(t){for(t.t+=t.c;t.c<128;)t.b[t.c++]=0;Yc(t,!0);for(var e=new Uint8Array(t.outlen),n=0;n<t.outlen;n++)e[n]=t.h[n>>2]>>8*(3&n);return e}function $c(t,e,n){n=n||64,t=Oc.normalizeInput(t);var r=Gc(n,e);return Jc(r,t),Wc(r)}var Xc={blake2b:$c,blake2bHex:function(t,e,n){var r=$c(t,e,n);return Oc.toHex(r)},blake2bInit:Gc,blake2bUpdate:Jc,blake2bFinal:Wc};function Zc(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function Qc(t,e,n,r,i,s){rf[t]=rf[t]+rf[e]+i,rf[r]=tf(rf[r]^rf[t],16),rf[n]=rf[n]+rf[r],rf[e]=tf(rf[e]^rf[n],12),rf[t]=rf[t]+rf[e]+s,rf[r]=tf(rf[r]^rf[t],8),rf[n]=rf[n]+rf[r],rf[e]=tf(rf[e]^rf[n],7)}function tf(t,e){return t>>>e^t<<32-e}var ef=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),nf=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),rf=new Uint32Array(16),sf=new Uint32Array(16);function of(t,e){var n=0;for(n=0;n<8;n++)rf[n]=t.h[n],rf[n+8]=ef[n];for(rf[12]^=t.t,rf[13]^=t.t/4294967296,e&&(rf[14]=~rf[14]),n=0;n<16;n++)sf[n]=Zc(t.b,4*n);for(n=0;n<10;n++)Qc(0,4,8,12,sf[nf[16*n+0]],sf[nf[16*n+1]]),Qc(1,5,9,13,sf[nf[16*n+2]],sf[nf[16*n+3]]),Qc(2,6,10,14,sf[nf[16*n+4]],sf[nf[16*n+5]]),Qc(3,7,11,15,sf[nf[16*n+6]],sf[nf[16*n+7]]),Qc(0,5,10,15,sf[nf[16*n+8]],sf[nf[16*n+9]]),Qc(1,6,11,12,sf[nf[16*n+10]],sf[nf[16*n+11]]),Qc(2,7,8,13,sf[nf[16*n+12]],sf[nf[16*n+13]]),Qc(3,4,9,14,sf[nf[16*n+14]],sf[nf[16*n+15]]);for(n=0;n<8;n++)t.h[n]^=rf[n]^rf[n+8]}function af(t,e){if(!(t>0&&t<=32))throw new Error("Incorrect output length, should be in [1, 32]");var n=e?e.length:0;if(e&&!(n>0&&n<=32))throw new Error("Incorrect key length, should be in [1, 32]");var r={h:new Uint32Array(ef),b:new Uint32Array(64),c:0,t:0,outlen:t};return r.h[0]^=16842752^n<<8^t,n>0&&(hf(r,e),r.c=64),r}function hf(t,e){for(var n=0;n<e.length;n++)64===t.c&&(t.t+=t.c,of(t,!1),t.c=0),t.b[t.c++]=e[n]}function uf(t){for(t.t+=t.c;t.c<64;)t.b[t.c++]=0;of(t,!0);for(var e=new Uint8Array(t.outlen),n=0;n<t.outlen;n++)e[n]=t.h[n>>2]>>8*(3&n)&255;return e}function cf(t,e,n){n=n||32,t=Oc.normalizeInput(t);var r=af(n,e);return hf(r,t),uf(r)}var ff={blake2s:cf,blake2sHex:function(t,e,n){var r=cf(t,e,n);return Oc.toHex(r)},blake2sInit:af,blake2sUpdate:hf,blake2sFinal:uf},lf={blake2b:Xc.blake2b,blake2bHex:Xc.blake2bHex,blake2bInit:Xc.blake2bInit,blake2bUpdate:Xc.blake2bUpdate,blake2bFinal:Xc.blake2bFinal,blake2s:ff.blake2s,blake2sHex:ff.blake2sHex,blake2sInit:ff.blake2sInit,blake2sUpdate:ff.blake2sUpdate,blake2sFinal:ff.blake2sFinal},df=r(function(t){const e=Rc.toCallback,n={init:lf.blake2bInit,update:lf.blake2bUpdate,digest:lf.blake2bFinal},r={init:lf.blake2sInit,update:lf.blake2sUpdate,digest:lf.blake2sFinal},i=(t,n)=>e(e=>{const r=n.init(t,null);return n.update(r,e),bt.from(n.digest(r))});t.exports=(t=>{for(let e=0;e<64;e++)t[45569+e]=i(e+1,n);for(let e=0;e<32;e++)t[45633+e]=i(e+1,r)})});const pf=Rc.toCallback,gf=Rc.toBuf,yf=Rc.fromString,vf=Rc.fromNumberTo32BitBuf;var mf={sha1:Bc.sha1,sha2256:Bc.sha2256,sha2512:Bc.sha2512,sha3512:pf(gf(Fc.sha3_512)),sha3384:pf(gf(Fc.sha3_384)),sha3256:pf(gf(Fc.sha3_256)),sha3224:pf(gf(Fc.sha3_224)),shake128:pf(gf(Fc.shake_128,256)),shake256:pf(gf(Fc.shake_256,512)),keccak224:pf(gf(Fc.keccak_224)),keccak256:pf(gf(Fc.keccak_256)),keccak384:pf(gf(Fc.keccak_384)),keccak512:pf(gf(Fc.keccak_512)),murmur3128:pf(gf(yf(Tc.x64.hash128))),murmur332:pf(vf(yf(Tc.x86.hash32))),addBlake:df,dblSha2256:(t,e)=>{Bc.sha2256(t,(t,n)=>{t&&e(t),Bc.sha2256(bt.from(n),e)})}},bf=Sf;function Sf(t,e,n,r){if("function"==typeof n&&(r=n,n=void 0),!r)throw new Error("Missing callback");Sf.digest(t,e,n,(t,i)=>{if(t)return r(t);r(null,zu.encode(i,e,n))})}Sf.Buffer=bt,Sf.multihash=zu,Sf.digest=function(t,e,n,r){if("function"==typeof n&&(r=n,n=void 0),!r)throw new Error("Missing callback");let i,s=r;n&&(s=((t,e)=>{if(t)return r(t);r(null,e.slice(0,n))}));try{i=Sf.createHash(e)}catch(t){return s(t)}i(t,s)},Sf.createHash=function(t){if(t=zu.coerceCode(t),!Sf.functions[t])throw new Error("multihash function "+t+" not yet supported");return Sf.functions[t]},Sf.functions={17:mf.sha1,18:mf.sha2256,19:mf.sha2512,20:mf.sha3512,21:mf.sha3384,22:mf.sha3256,23:mf.sha3224,24:mf.shake128,25:mf.shake256,26:mf.keccak224,27:mf.keccak256,28:mf.keccak384,29:mf.keccak512,34:mf.murmur3128,35:mf.murmur332,86:mf.dblSha2256},mf.addBlake(Sf.functions);var wf=r(function(t){!function(){var e=function(t,e){return n(t.slice(),e)};function n(t,e){"function"!=typeof e&&(e=function(t,e){return String(t).localeCompare(e)});var n=t.length;if(n<=1)return t;for(var i=new Array(n),s=1;s<n;s*=2){r(t,e,s,i);var o=t;t=i,i=o}return t}e.inplace=function(t,e){var i=n(t,e);return i!==t&&r(i,null,t.length,t),t};var r=function(t,e,n,r){var i,s,o,a,h,u=t.length,c=0,f=2*n;for(i=0;i<u;i+=f)for(o=(s=i+n)+n,s>u&&(s=u),o>u&&(o=u),a=i,h=s;;)if(a<s&&h<o)e(t[a],t[h])<=0?r[c++]=t[a++]:r[c++]=t[h++];else if(a<s)r[c++]=t[a++];else{if(!(h<o))break;r[c++]=t[h++]}};t.exports=e}()});var xf=class{constructor(t,e,n,r){this.name=t,this.code=e,this.alphabet=r,n&&r&&(this.engine=n(r))}encode(t){return this.engine.encode(t)}decode(t){return this.engine.decode(t)}isImplemented(){return this.engine}},kf=function(t){return{encode:t=>"string"==typeof t?bt.from(t).toString("hex"):t.toString("hex"),decode(e){for(let n of e)if(t.indexOf(n)<0)throw new Error("invalid base16 character");return bt.from(e,"hex")}}};function Ef(t,e){let n=t.byteLength,r=new Uint8Array(t),i=e.indexOf("=")===e.length-1;i&&(e=e.substring(0,e.length-2));let s=0,o=0,a="";for(let t=0;t<n;t++)for(o=o<<8|r[t],s+=8;s>=5;)a+=e[o>>>s-5&31],s-=5;if(s>0&&(a+=e[o<<5-s&31]),i)for(;a.length%8!=0;)a+="=";return a}var Af=function(t){return{encode:e=>Ef("string"==typeof e?bt.from(e):e,t),decode(e){for(let n of e)if(t.indexOf(n)<0)throw new Error("invalid base32 character");return function(t,e){let n=(t=t.replace(new RegExp("=","g"),"")).length,r=0,i=0,s=0,o=new Uint8Array(5*n/8|0);for(let a=0;a<n;a++)i=i<<5|e.indexOf(t[a]),(r+=5)>=8&&(o[s++]=i>>>r-8&255,r-=8);return o.buffer}(e,t)}}},Ff=function(t){const e=t.indexOf("=")>-1,n=t.indexOf("-")>-1&&t.indexOf("_")>-1;return{encode(t){let r="";r="string"==typeof t?bt.from(t).toString("base64"):t.toString("base64"),n&&(r=(r=r.replace("+","-")).replace("/","_"));const i=r.indexOf("=");return i>0&&!e&&(r=r.substring(0,i)),r},decode(e){for(let r of(n&&(e=(e=e.replace("+","-")).replace("/","_")),e))if(t.indexOf(r)<0)throw new Error("invalid base64 character");return bt.from(e,"base64")}}},Cf=r(function(t){const e=[["base1","1","","1"],["base2","0",Au,"01"],["base8","7",Au,"01234567"],["base10","9",Au,"0123456789"],["base16","f",kf,"0123456789abcdef"],["base32","b",Af,"abcdefghijklmnopqrstuvwxyz234567"],["base32pad","c",Af,"abcdefghijklmnopqrstuvwxyz234567="],["base32hex","v",Af,"0123456789abcdefghijklmnopqrstuv"],["base32hexpad","t",Af,"0123456789abcdefghijklmnopqrstuv="],["base32z","h",Af,"ybndrfg8ejkmcpqxot1uwisza345h769"],["base58flickr","Z",Au,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base58btc","z",Au,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base64","m",Ff,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",Ff,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",Ff,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",Ff,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],n=e.reduce((t,e)=>(t[e[0]]=new xf(e[0],e[1],e[2],e[3]),t),{}),r=e.reduce((t,e)=>(t[e[1]]=n[e[0]],t),{});t.exports={names:n,codes:r}}),Tf=(Cf.names,Cf.codes,r(function(t,e){(e=t.exports=r).encode=function(t,e){const n=i(t);return r(n.name,bt.from(n.encode(e)))},e.decode=function(t){ee(t)&&(t=t.toString());const e=t.substring(0,1);"string"==typeof(t=t.substring(1,t.length))&&(t=bt.from(t));const n=i(e);return n.name,bt.from(n.decode(t.toString()))},e.isEncoded=function(t){ee(t)&&(t=t.toString());const e=t.substring(0,1);try{const t=i(e);return t.name}catch(t){return!1}};const n=new Error("Unsupported encoding");function r(t,e){if(!e)throw new Error("requires an encoded buffer");const n=i(t),r=bt.from(n.code);return function(t,e){i(t).decode(e.toString())}(n.name,e),bt.concat([r,e])}function i(t){let e;if(Cf.names[t])e=Cf.names[t];else{if(!Cf.codes[t])throw n;e=Cf.codes[t]}if(!e.isImplemented())throw new Error("Base "+t+" is not implemented yet");return e}})),Df=(Tf.encode,Tf.decode,Tf.isEncoded,r(function(t,e){(e=t.exports).raw=bt.from("55","hex"),e.base1=bt.from("01","hex"),e.base2=bt.from("00","hex"),e.base8=bt.from("07","hex"),e.base10=bt.from("09","hex"),e.cbor=bt.from("51","hex"),e.protobuf=bt.from("50","hex"),e.rlp=bt.from("60","hex"),e.bencode=bt.from("63","hex"),e.multicodec=bt.from("30","hex"),e.multihash=bt.from("31","hex"),e.multiaddr=bt.from("32","hex"),e.multibase=bt.from("33","hex"),e.md4=bt.from("d4","hex"),e.md5=bt.from("d5","hex"),e.sha1=bt.from("11","hex"),e["sha2-256"]=bt.from("12","hex"),e["sha2-512"]=bt.from("13","hex"),e["dbl-sha2-256"]=bt.from("56","hex"),e["sha3-224"]=bt.from("17","hex"),e["sha3-256"]=bt.from("16","hex"),e["sha3-384"]=bt.from("15","hex"),e["sha3-512"]=bt.from("14","hex"),e["shake-128"]=bt.from("18","hex"),e["shake-256"]=bt.from("19","hex"),e["keccak-224"]=bt.from("1a","hex"),e["keccak-256"]=bt.from("1b","hex"),e["keccak-384"]=bt.from("1c","hex"),e["keccak-512"]=bt.from("1d","hex"),e.murmur3=bt.from("22","hex"),e["blake2b-8"]=bt.from("b201","hex"),e["blake2b-16"]=bt.from("b202","hex"),e["blake2b-24"]=bt.from("b203","hex"),e["blake2b-32"]=bt.from("b204","hex"),e["blake2b-40"]=bt.from("b205","hex"),e["blake2b-48"]=bt.from("b206","hex"),e["blake2b-56"]=bt.from("b207","hex"),e["blake2b-64"]=bt.from("b208","hex"),e["blake2b-72"]=bt.from("b209","hex"),e["blake2b-80"]=bt.from("b20a","hex"),e["blake2b-88"]=bt.from("b20b","hex"),e["blake2b-96"]=bt.from("b20c","hex"),e["blake2b-104"]=bt.from("b20d","hex"),e["blake2b-112"]=bt.from("b20e","hex"),e["blake2b-120"]=bt.from("b20f","hex"),e["blake2b-128"]=bt.from("b210","hex"),e["blake2b-136"]=bt.from("b211","hex"),e["blake2b-144"]=bt.from("b212","hex"),e["blake2b-152"]=bt.from("b213","hex"),e["blake2b-160"]=bt.from("b214","hex"),e["blake2b-168"]=bt.from("b215","hex"),e["blake2b-176"]=bt.from("b216","hex"),e["blake2b-184"]=bt.from("b217","hex"),e["blake2b-192"]=bt.from("b218","hex"),e["blake2b-200"]=bt.from("b219","hex"),e["blake2b-208"]=bt.from("b21a","hex"),e["blake2b-216"]=bt.from("b21b","hex"),e["blake2b-224"]=bt.from("b21c","hex"),e["blake2b-232"]=bt.from("b21d","hex"),e["blake2b-240"]=bt.from("b21e","hex"),e["blake2b-248"]=bt.from("b21f","hex"),e["blake2b-256"]=bt.from("b220","hex"),e["blake2b-264"]=bt.from("b221","hex"),e["blake2b-272"]=bt.from("b222","hex"),e["blake2b-280"]=bt.from("b223","hex"),e["blake2b-288"]=bt.from("b224","hex"),e["blake2b-296"]=bt.from("b225","hex"),e["blake2b-304"]=bt.from("b226","hex"),e["blake2b-312"]=bt.from("b227","hex"),e["blake2b-320"]=bt.from("b228","hex"),e["blake2b-328"]=bt.from("b229","hex"),e["blake2b-336"]=bt.from("b22a","hex"),e["blake2b-344"]=bt.from("b22b","hex"),e["blake2b-352"]=bt.from("b22c","hex"),e["blake2b-360"]=bt.from("b22d","hex"),e["blake2b-368"]=bt.from("b22e","hex"),e["blake2b-376"]=bt.from("b22f","hex"),e["blake2b-384"]=bt.from("b230","hex"),e["blake2b-392"]=bt.from("b231","hex"),e["blake2b-400"]=bt.from("b232","hex"),e["blake2b-408"]=bt.from("b233","hex"),e["blake2b-416"]=bt.from("b234","hex"),e["blake2b-424"]=bt.from("b235","hex"),e["blake2b-432"]=bt.from("b236","hex"),e["blake2b-440"]=bt.from("b237","hex"),e["blake2b-448"]=bt.from("b238","hex"),e["blake2b-456"]=bt.from("b239","hex"),e["blake2b-464"]=bt.from("b23a","hex"),e["blake2b-472"]=bt.from("b23b","hex"),e["blake2b-480"]=bt.from("b23c","hex"),e["blake2b-488"]=bt.from("b23d","hex"),e["blake2b-496"]=bt.from("b23e","hex"),e["blake2b-504"]=bt.from("b23f","hex"),e["blake2b-512"]=bt.from("b240","hex"),e["blake2s-8"]=bt.from("b241","hex"),e["blake2s-16"]=bt.from("b242","hex"),e["blake2s-24"]=bt.from("b243","hex"),e["blake2s-32"]=bt.from("b244","hex"),e["blake2s-40"]=bt.from("b245","hex"),e["blake2s-48"]=bt.from("b246","hex"),e["blake2s-56"]=bt.from("b247","hex"),e["blake2s-64"]=bt.from("b248","hex"),e["blake2s-72"]=bt.from("b249","hex"),e["blake2s-80"]=bt.from("b24a","hex"),e["blake2s-88"]=bt.from("b24b","hex"),e["blake2s-96"]=bt.from("b24c","hex"),e["blake2s-104"]=bt.from("b24d","hex"),e["blake2s-112"]=bt.from("b24e","hex"),e["blake2s-120"]=bt.from("b24f","hex"),e["blake2s-128"]=bt.from("b250","hex"),e["blake2s-136"]=bt.from("b251","hex"),e["blake2s-144"]=bt.from("b252","hex"),e["blake2s-152"]=bt.from("b253","hex"),e["blake2s-160"]=bt.from("b254","hex"),e["blake2s-168"]=bt.from("b255","hex"),e["blake2s-176"]=bt.from("b256","hex"),e["blake2s-184"]=bt.from("b257","hex"),e["blake2s-192"]=bt.from("b258","hex"),e["blake2s-200"]=bt.from("b259","hex"),e["blake2s-208"]=bt.from("b25a","hex"),e["blake2s-216"]=bt.from("b25b","hex"),e["blake2s-224"]=bt.from("b25c","hex"),e["blake2s-232"]=bt.from("b25d","hex"),e["blake2s-240"]=bt.from("b25e","hex"),e["blake2s-248"]=bt.from("b25f","hex"),e["blake2s-256"]=bt.from("b260","hex"),e["skein256-8"]=bt.from("b301","hex"),e["skein256-16"]=bt.from("b302","hex"),e["skein256-24"]=bt.from("b303","hex"),e["skein256-32"]=bt.from("b304","hex"),e["skein256-40"]=bt.from("b305","hex"),e["skein256-48"]=bt.from("b306","hex"),e["skein256-56"]=bt.from("b307","hex"),e["skein256-64"]=bt.from("b308","hex"),e["skein256-72"]=bt.from("b309","hex"),e["skein256-80"]=bt.from("b30a","hex"),e["skein256-88"]=bt.from("b30b","hex"),e["skein256-96"]=bt.from("b30c","hex"),e["skein256-104"]=bt.from("b30d","hex"),e["skein256-112"]=bt.from("b30e","hex"),e["skein256-120"]=bt.from("b30f","hex"),e["skein256-128"]=bt.from("b310","hex"),e["skein256-136"]=bt.from("b311","hex"),e["skein256-144"]=bt.from("b312","hex"),e["skein256-152"]=bt.from("b313","hex"),e["skein256-160"]=bt.from("b314","hex"),e["skein256-168"]=bt.from("b315","hex"),e["skein256-176"]=bt.from("b316","hex"),e["skein256-184"]=bt.from("b317","hex"),e["skein256-192"]=bt.from("b318","hex"),e["skein256-200"]=bt.from("b319","hex"),e["skein256-208"]=bt.from("b31a","hex"),e["skein256-216"]=bt.from("b31b","hex"),e["skein256-224"]=bt.from("b31c","hex"),e["skein256-232"]=bt.from("b31d","hex"),e["skein256-240"]=bt.from("b31e","hex"),e["skein256-248"]=bt.from("b31f","hex"),e["skein256-256"]=bt.from("b320","hex"),e["skein512-8"]=bt.from("b321","hex"),e["skein512-16"]=bt.from("b322","hex"),e["skein512-24"]=bt.from("b323","hex"),e["skein512-32"]=bt.from("b324","hex"),e["skein512-40"]=bt.from("b325","hex"),e["skein512-48"]=bt.from("b326","hex"),e["skein512-56"]=bt.from("b327","hex"),e["skein512-64"]=bt.from("b328","hex"),e["skein512-72"]=bt.from("b329","hex"),e["skein512-80"]=bt.from("b32a","hex"),e["skein512-88"]=bt.from("b32b","hex"),e["skein512-96"]=bt.from("b32c","hex"),e["skein512-104"]=bt.from("b32d","hex"),e["skein512-112"]=bt.from("b32e","hex"),e["skein512-120"]=bt.from("b32f","hex"),e["skein512-128"]=bt.from("b330","hex"),e["skein512-136"]=bt.from("b331","hex"),e["skein512-144"]=bt.from("b332","hex"),e["skein512-152"]=bt.from("b333","hex"),e["skein512-160"]=bt.from("b334","hex"),e["skein512-168"]=bt.from("b335","hex"),e["skein512-176"]=bt.from("b336","hex"),e["skein512-184"]=bt.from("b337","hex"),e["skein512-192"]=bt.from("b338","hex"),e["skein512-200"]=bt.from("b339","hex"),e["skein512-208"]=bt.from("b33a","hex"),e["skein512-216"]=bt.from("b33b","hex"),e["skein512-224"]=bt.from("b33c","hex"),e["skein512-232"]=bt.from("b33d","hex"),e["skein512-240"]=bt.from("b33e","hex"),e["skein512-248"]=bt.from("b33f","hex"),e["skein512-256"]=bt.from("b340","hex"),e["skein512-264"]=bt.from("b341","hex"),e["skein512-272"]=bt.from("b342","hex"),e["skein512-280"]=bt.from("b343","hex"),e["skein512-288"]=bt.from("b344","hex"),e["skein512-296"]=bt.from("b345","hex"),e["skein512-304"]=bt.from("b346","hex"),e["skein512-312"]=bt.from("b347","hex"),e["skein512-320"]=bt.from("b348","hex"),e["skein512-328"]=bt.from("b349","hex"),e["skein512-336"]=bt.from("b34a","hex"),e["skein512-344"]=bt.from("b34b","hex"),e["skein512-352"]=bt.from("b34c","hex"),e["skein512-360"]=bt.from("b34d","hex"),e["skein512-368"]=bt.from("b34e","hex"),e["skein512-376"]=bt.from("b34f","hex"),e["skein512-384"]=bt.from("b350","hex"),e["skein512-392"]=bt.from("b351","hex"),e["skein512-400"]=bt.from("b352","hex"),e["skein512-408"]=bt.from("b353","hex"),e["skein512-416"]=bt.from("b354","hex"),e["skein512-424"]=bt.from("b355","hex"),e["skein512-432"]=bt.from("b356","hex"),e["skein512-440"]=bt.from("b357","hex"),e["skein512-448"]=bt.from("b358","hex"),e["skein512-456"]=bt.from("b359","hex"),e["skein512-464"]=bt.from("b35a","hex"),e["skein512-472"]=bt.from("b35b","hex"),e["skein512-480"]=bt.from("b35c","hex"),e["skein512-488"]=bt.from("b35d","hex"),e["skein512-496"]=bt.from("b35e","hex"),e["skein512-504"]=bt.from("b35f","hex"),e["skein512-512"]=bt.from("b360","hex"),e["skein1024-8"]=bt.from("b361","hex"),e["skein1024-16"]=bt.from("b362","hex"),e["skein1024-24"]=bt.from("b363","hex"),e["skein1024-32"]=bt.from("b364","hex"),e["skein1024-40"]=bt.from("b365","hex"),e["skein1024-48"]=bt.from("b366","hex"),e["skein1024-56"]=bt.from("b367","hex"),e["skein1024-64"]=bt.from("b368","hex"),e["skein1024-72"]=bt.from("b369","hex"),e["skein1024-80"]=bt.from("b36a","hex"),e["skein1024-88"]=bt.from("b36b","hex"),e["skein1024-96"]=bt.from("b36c","hex"),e["skein1024-104"]=bt.from("b36d","hex"),e["skein1024-112"]=bt.from("b36e","hex"),e["skein1024-120"]=bt.from("b36f","hex"),e["skein1024-128"]=bt.from("b370","hex"),e["skein1024-136"]=bt.from("b371","hex"),e["skein1024-144"]=bt.from("b372","hex"),e["skein1024-152"]=bt.from("b373","hex"),e["skein1024-160"]=bt.from("b374","hex"),e["skein1024-168"]=bt.from("b375","hex"),e["skein1024-176"]=bt.from("b376","hex"),e["skein1024-184"]=bt.from("b377","hex"),e["skein1024-192"]=bt.from("b378","hex"),e["skein1024-200"]=bt.from("b379","hex"),e["skein1024-208"]=bt.from("b37a","hex"),e["skein1024-216"]=bt.from("b37b","hex"),e["skein1024-224"]=bt.from("b37c","hex"),e["skein1024-232"]=bt.from("b37d","hex"),e["skein1024-240"]=bt.from("b37e","hex"),e["skein1024-248"]=bt.from("b37f","hex"),e["skein1024-256"]=bt.from("b380","hex"),e["skein1024-264"]=bt.from("b381","hex"),e["skein1024-272"]=bt.from("b382","hex"),e["skein1024-280"]=bt.from("b383","hex"),e["skein1024-288"]=bt.from("b384","hex"),e["skein1024-296"]=bt.from("b385","hex"),e["skein1024-304"]=bt.from("b386","hex"),e["skein1024-312"]=bt.from("b387","hex"),e["skein1024-320"]=bt.from("b388","hex"),e["skein1024-328"]=bt.from("b389","hex"),e["skein1024-336"]=bt.from("b38a","hex"),e["skein1024-344"]=bt.from("b38b","hex"),e["skein1024-352"]=bt.from("b38c","hex"),e["skein1024-360"]=bt.from("b38d","hex"),e["skein1024-368"]=bt.from("b38e","hex"),e["skein1024-376"]=bt.from("b38f","hex"),e["skein1024-384"]=bt.from("b390","hex"),e["skein1024-392"]=bt.from("b391","hex"),e["skein1024-400"]=bt.from("b392","hex"),e["skein1024-408"]=bt.from("b393","hex"),e["skein1024-416"]=bt.from("b394","hex"),e["skein1024-424"]=bt.from("b395","hex"),e["skein1024-432"]=bt.from("b396","hex"),e["skein1024-440"]=bt.from("b397","hex"),e["skein1024-448"]=bt.from("b398","hex"),e["skein1024-456"]=bt.from("b399","hex"),e["skein1024-464"]=bt.from("b39a","hex"),e["skein1024-472"]=bt.from("b39b","hex"),e["skein1024-480"]=bt.from("b39c","hex"),e["skein1024-488"]=bt.from("b39d","hex"),e["skein1024-496"]=bt.from("b39e","hex"),e["skein1024-504"]=bt.from("b39f","hex"),e["skein1024-512"]=bt.from("b3a0","hex"),e["skein1024-520"]=bt.from("b3a1","hex"),e["skein1024-528"]=bt.from("b3a2","hex"),e["skein1024-536"]=bt.from("b3a3","hex"),e["skein1024-544"]=bt.from("b3a4","hex"),e["skein1024-552"]=bt.from("b3a5","hex"),e["skein1024-560"]=bt.from("b3a6","hex"),e["skein1024-568"]=bt.from("b3a7","hex"),e["skein1024-576"]=bt.from("b3a8","hex"),e["skein1024-584"]=bt.from("b3a9","hex"),e["skein1024-592"]=bt.from("b3aa","hex"),e["skein1024-600"]=bt.from("b3ab","hex"),e["skein1024-608"]=bt.from("b3ac","hex"),e["skein1024-616"]=bt.from("b3ad","hex"),e["skein1024-624"]=bt.from("b3ae","hex"),e["skein1024-632"]=bt.from("b3af","hex"),e["skein1024-640"]=bt.from("b3b0","hex"),e["skein1024-648"]=bt.from("b3b1","hex"),e["skein1024-656"]=bt.from("b3b2","hex"),e["skein1024-664"]=bt.from("b3b3","hex"),e["skein1024-672"]=bt.from("b3b4","hex"),e["skein1024-680"]=bt.from("b3b5","hex"),e["skein1024-688"]=bt.from("b3b6","hex"),e["skein1024-696"]=bt.from("b3b7","hex"),e["skein1024-704"]=bt.from("b3b8","hex"),e["skein1024-712"]=bt.from("b3b9","hex"),e["skein1024-720"]=bt.from("b3ba","hex"),e["skein1024-728"]=bt.from("b3bb","hex"),e["skein1024-736"]=bt.from("b3bc","hex"),e["skein1024-744"]=bt.from("b3bd","hex"),e["skein1024-752"]=bt.from("b3be","hex"),e["skein1024-760"]=bt.from("b3bf","hex"),e["skein1024-768"]=bt.from("b3c0","hex"),e["skein1024-776"]=bt.from("b3c1","hex"),e["skein1024-784"]=bt.from("b3c2","hex"),e["skein1024-792"]=bt.from("b3c3","hex"),e["skein1024-800"]=bt.from("b3c4","hex"),e["skein1024-808"]=bt.from("b3c5","hex"),e["skein1024-816"]=bt.from("b3c6","hex"),e["skein1024-824"]=bt.from("b3c7","hex"),e["skein1024-832"]=bt.from("b3c8","hex"),e["skein1024-840"]=bt.from("b3c9","hex"),e["skein1024-848"]=bt.from("b3ca","hex"),e["skein1024-856"]=bt.from("b3cb","hex"),e["skein1024-864"]=bt.from("b3cc","hex"),e["skein1024-872"]=bt.from("b3cd","hex"),e["skein1024-880"]=bt.from("b3ce","hex"),e["skein1024-888"]=bt.from("b3cf","hex"),e["skein1024-896"]=bt.from("b3d0","hex"),e["skein1024-904"]=bt.from("b3d1","hex"),e["skein1024-912"]=bt.from("b3d2","hex"),e["skein1024-920"]=bt.from("b3d3","hex"),e["skein1024-928"]=bt.from("b3d4","hex"),e["skein1024-936"]=bt.from("b3d5","hex"),e["skein1024-944"]=bt.from("b3d6","hex"),e["skein1024-952"]=bt.from("b3d7","hex"),e["skein1024-960"]=bt.from("b3d8","hex"),e["skein1024-968"]=bt.from("b3d9","hex"),e["skein1024-976"]=bt.from("b3da","hex"),e["skein1024-984"]=bt.from("b3db","hex"),e["skein1024-992"]=bt.from("b3dc","hex"),e["skein1024-1000"]=bt.from("b3dd","hex"),e["skein1024-1008"]=bt.from("b3de","hex"),e["skein1024-1016"]=bt.from("b3df","hex"),e["skein1024-1024"]=bt.from("b3e0","hex"),e.ip4=bt.from("04","hex"),e.ip6=bt.from("29","hex"),e.tcp=bt.from("06","hex"),e.udp=bt.from("0111","hex"),e.dccp=bt.from("21","hex"),e.sctp=bt.from("84","hex"),e.udt=bt.from("012d","hex"),e.utp=bt.from("012e","hex"),e.ipfs=bt.from("01a5","hex"),e.http=bt.from("01e0","hex"),e.https=bt.from("01bb","hex"),e.quic=bt.from("01cc","hex"),e.ws=bt.from("01dd","hex"),e.onion=bt.from("01bc","hex"),e["p2p-circuit"]=bt.from("0122","hex"),e["git-raw"]=bt.from("78","hex"),e["dag-pb"]=bt.from("70","hex"),e["dag-cbor"]=bt.from("71","hex"),e["git-raw"]=bt.from("78","hex"),e["eth-block"]=bt.from("90","hex"),e["eth-block-list"]=bt.from("91","hex"),e["eth-tx-trie"]=bt.from("92","hex"),e["eth-tx"]=bt.from("93","hex"),e["eth-tx-receipt-trie"]=bt.from("94","hex"),e["eth-tx-receipt"]=bt.from("95","hex"),e["eth-state-trie"]=bt.from("96","hex"),e["eth-account-snapshot"]=bt.from("97","hex"),e["eth-storage-trie"]=bt.from("98","hex"),e["bitcoin-block"]=bt.from("b0","hex"),e["bitcoin-tx"]=bt.from("b1","hex"),e["zcash-block"]=bt.from("c0","hex"),e["zcash-tx"]=bt.from("c1","hex"),e["stellar-block"]=bt.from("d0","hex"),e["stellar-tx"]=bt.from("d1","hex"),e["torrent-info"]=bt.from("7b","hex"),e["torrent-file"]=bt.from("7c","hex"),e["ed25519-pub"]=bt.from("ed","hex")})),Pf={numberToBuffer:Rf,bufferToNumber:If,varintBufferEncode:function(t){return bt.from(qu.encode(If(t)))},varintBufferDecode:function(t){return Rf(qu.decode(t))}};function If(t){return parseInt(t.toString("hex"),16)}function Rf(t){let e=t.toString(16);return e.length%2==1&&(e="0"+e),bt.from(e,"hex")}const _f=Pf.varintBufferEncode,Bf={};var Hf=Bf;for(let t in Df){let e=Df[t];Bf[t]=_f(e)}const Nf={};var Of=Nf;for(let t in Df){Nf[Df[t].toString("hex")]=t}var jf=r(function(t,e){(e=t.exports).addPrefix=((t,e)=>{let n;if(ee(t))n=Pf.varintBufferEncode(t);else{if(!Hf[t])throw new Error("multicodec not recognized");n=Hf[t]}return bt.concat([n,e])}),e.rmPrefix=(t=>(qu.decode(t),t.slice(qu.decode.bytes))),e.getCodec=(t=>{const e=Pf.varintBufferDecode(t),n=Of[e.toString("hex")];if(void 0===n)throw new Error("Code `0x"+e.toString("hex")+"` not found");return n}),e.getCodeVarint=(t=>{const e=Hf[t];if(void 0===e)throw new Error("Codec `"+t+"` not found");return e}),e.addCodec=((t,e)=>{Hf[t]=Pf.varintBufferEncode(e),Of[e.toString("hex")]=t})}),Lf=(jf.addPrefix,jf.rmPrefix,jf.getCodec,jf.getCodeVarint,jf.addCodec,{checkCIDComponents:function(t){if(null==t)return"null values are not valid CIDs";if(0!==t.version&&1!==t.version)return"Invalid version, must be a number equal to 1 or 0";if("string"!=typeof t.codec)return"codec must be string";if(!ee(t.multihash))return"multihash must be a Buffer";try{zu.validate(t.multihash)}catch(t){let e=t.message;return e||(e="Multihash validation failed"),e}}});const Mf=zu;class Vf{constructor(t,e,n){if(Vf.isCID(t)){let e=t;return this.version=e.version,this.codec=e.codec,void(this.multihash=bt.from(e.multihash))}if("string"==typeof t)if(Tf.isEncoded(t)){const r=Tf.decode(t);t=parseInt(r.slice(0,1).toString("hex"),16),e=jf.getCodec(r.slice(1)),n=jf.rmPrefix(r.slice(1))}else e="dag-pb",n=zu.fromB58String(t),t=0;else if(ee(t)){const r=t.slice(0,1),i=parseInt(r.toString("hex"),16);if(0===i||1===i){const r=t;t=i,e=jf.getCodec(r.slice(1)),n=jf.rmPrefix(r.slice(1))}else e="dag-pb",n=t,t=0}this.codec=e,this.version=t,this.multihash=n,Vf.validateCID(this)}get buffer(){switch(this.version){case 0:return this.multihash;case 1:return bt.concat([bt.from("01","hex"),bt.from(Hf[this.codec]),this.multihash]);default:throw new Error("unsupported version")}}get prefix(){return bt.concat([bt.from(`0${this.version}`,"hex"),Hf[this.codec],Mf.prefix(this.multihash)])}toV0(){if("dag-pb"!==this.codec)throw new Error("Cannot convert a non dag-pb CID to CIDv0");return new Vf(0,this.codec,this.multihash)}toV1(){return new Vf(1,this.codec,this.multihash)}toBaseEncodedString(t){switch(t=t||"base58btc",this.version){case 0:if("base58btc"!==t)throw new Error("not supported with CIDv0, to support different bases, please migrate the instance do CIDv1, you can do that through cid.toV1()");return zu.toB58String(this.multihash);case 1:return Tf.encode(t,this.buffer).toString();default:throw new Error("Unsupported version")}}toJSON(){return{codec:this.codec,version:this.version,hash:this.multihash}}equals(t){return this.codec===t.codec&&this.version===t.version&&this.multihash.equals(t.multihash)}static isCID(t){return!Lf.checkCIDComponents(t)}static validateCID(t){let e=Lf.checkCIDComponents(t);if(e)throw new Error(e)}}Vf.codecs=Df;var Uf=Vf,Kf=["int32","int64","uint32","uint64","sint32","sint64","bool","fixed64","sfixed64","double","fixed32","sfixed32","float"],qf=function(t){for(var e={};t.length;)switch(t[0]){case"[":case",":t.shift();var n=t.shift();if("("===n&&(n=t.shift(),t.shift()),"="!==t[0])throw new Error("Unexpected token in field options: "+t[0]);if(t.shift(),"]"===t[0])throw new Error("Unexpected ] in field option");e[n]=t.shift();break;case"]":return t.shift(),e;default:throw new Error("Unexpected token in field options: "+t[0])}throw new Error("No closing tag for field options")},zf=function(t){for(var e={name:null,type:null,tag:-1,map:null,oneof:null,required:!1,repeated:!1,options:{}};t.length;)switch(t[0]){case"=":t.shift(),e.tag=Number(t.shift());break;case"map":if(e.type="map",e.map={from:null,to:null},t.shift(),"<"!==t[0])throw new Error("Unexpected token in map type: "+t[0]);if(t.shift(),e.map.from=t.shift(),","!==t[0])throw new Error("Unexpected token in map type: "+t[0]);if(t.shift(),e.map.to=t.shift(),">"!==t[0])throw new Error("Unexpected token in map type: "+t[0]);t.shift(),e.name=t.shift();break;case"repeated":case"required":case"optional":var n=t.shift();e.required="required"===n,e.repeated="repeated"===n,e.type=t.shift(),e.name=t.shift();break;case"[":e.options=qf(t);break;case";":if(null===e.name)throw new Error("Missing field name");if(null===e.type)throw new Error("Missing type in message field: "+e.name);if(-1===e.tag)throw new Error("Missing tag number in message field: "+e.name);return t.shift(),e;default:throw new Error("Unexpected token in message field: "+t[0])}throw new Error("No ; found for message field")},Yf=function(t){for(var e={enums:[],messages:[],fields:[],extends:[],extensions:null};t.length;)switch(t[0]){case"map":case"repeated":case"optional":case"required":e.fields.push(zf(t));break;case"enum":e.enums.push(Qf(t));break;case"message":e.messages.push(Wf(t));break;case"extensions":e.extensions=Jf(t);break;case"oneof":t.shift();var n=t.shift();if("{"!==t[0])throw new Error("Unexpected token in oneof: "+t[0]);for(t.shift();"}"!==t[0];){t.unshift("optional");var r=zf(t);r.oneof=n,e.fields.push(r)}t.shift();break;case"extend":e.extends.push(Gf(t));break;case";":t.shift();break;case"reserved":case"option":for(t.shift();";"!==t[0];)t.shift();break;default:t.unshift("optional"),e.fields.push(zf(t))}return e},Gf=function(t){return{name:t[1],message:Wf(t)}},Jf=function(t){t.shift();var e=Number(t.shift());if(isNaN(e))throw new Error("Invalid from in extensions definition");if("to"!==t.shift())throw new Error("Expected keyword 'to' in extensions definition");var n=t.shift();if("max"===n&&(n=536870911),n=Number(n),isNaN(n))throw new Error("Invalid to in extensions definition");if(";"!==t.shift())throw new Error("Missing ; in extensions definition");return{from:e,to:n}},Wf=function(t){t.shift();var e=1,n=[],r={name:t.shift(),enums:[],extends:[],messages:[],fields:[]};if("{"!==t[0])throw new Error("Expected { but found "+t[0]);for(t.shift();t.length;){if("{"===t[0]?e++:"}"===t[0]&&e--,!e)return t.shift(),n=Yf(n),r.enums=n.enums,r.messages=n.messages,r.fields=n.fields,r.extends=n.extends,r.extensions=n.extensions,r;n.push(t.shift())}if(e)throw new Error("No closing tag for message")},$f=function(t){t.shift();var e=t.shift();if(";"!==t[0])throw new Error("Expected ; but found "+t[0]);return t.shift(),e},Xf=function(t){if(t.shift(),"="!==t[0])throw new Error("Expected = but found "+t[0]);t.shift();var e=t.shift();switch(e){case'"proto2"':e=2;break;case'"proto3"':e=3;break;default:throw new Error("Expected protobuf syntax version but found "+e)}if(";"!==t[0])throw new Error("Expected ; but found "+t[0]);return t.shift(),e},Zf=function(t){if(t.length<4)throw new Error("Invalid enum value: "+t.slice(0,3).join(" "));if("="!==t[1])throw new Error("Expected = but found "+t[1]);if(";"!==t[3]&&"["!==t[3])throw new Error("Expected ; or [ but found "+t[1]);var e=t.shift();t.shift();var n={value:null,options:{}};return n.value=Number(t.shift()),"["===t[0]&&(n.options=qf(t)),t.shift(),{name:e,val:n}},Qf=function(t){t.shift();var e={},n={name:t.shift(),values:{},options:{}};if("{"!==t[0])throw new Error("Expected { but found "+t[0]);for(t.shift();t.length;){if("}"===t[0])return t.shift(),";"===t[0]&&t.shift(),n;if("option"!==t[0]){var r=Zf(t);n.values[r.name]=r.val}else e=tl(t),n.options[e.name]=e.value}throw new Error("No closing tag for enum")},tl=function(t){for(var e=null,n=null,r=function(t){return"true"===t||"false"!==t&&t.replace(/^"+|"+$/gm,"")};t.length;){if(";"===t[0])return t.shift(),{name:e,value:n};switch(t[0]){case"option":t.shift();var i="("===t[0];if(i&&t.shift(),e=t.shift(),i){if(")"!==t[0])throw new Error("Expected ) but found "+t[0]);t.shift()}"."===t[0][0]&&(e+=t.shift());break;case"=":if(t.shift(),null===e)throw new Error("Expected key for option with value: "+t[0]);if(n=r(t.shift()),"optimize_for"===e&&!/^(SPEED|CODE_SIZE|LITE_RUNTIME)$/.test(n))throw new Error("Unexpected value for option optimize_for: "+n);"{"===n&&(n=el(t));break;default:throw new Error("Unexpected token in option: "+t[0])}}},el=function(t){for(var e=function(t){return"true"===t||"false"!==t&&t.replace(/^"+|"+$/gm,"")},n={};t.length;){if("}"===t[0])return t.shift(),n;var r="("===t[0];r&&t.shift();var i=t.shift();if(r){if(")"!==t[0])throw new Error("Expected ) but found "+t[0]);t.shift()}var s=null;switch(t[0]){case":":if(void 0!==n[i])throw new Error("Duplicate option map key "+i);t.shift(),"{"===(s=e(t.shift()))&&(s=el(t)),n[i]=s,";"===t[0]&&t.shift();break;case"{":if(t.shift(),s=el(t),void 0===n[i]&&(n[i]=[]),!Array.isArray(n[i]))throw new Error("Duplicate option map key "+i);n[i].push(s);break;default:throw new Error("Unexpected token in option map: "+t[0])}}throw new Error("No closing tag for option map")},nl=function(t){t.shift();var e=t.shift().replace(/^"+|"+$/gm,"");if(";"!==t[0])throw new Error("Unexpected token: "+t[0]+'. Expected ";"');return t.shift(),e},rl=function(t){t.shift();var e={name:t.shift(),methods:[],options:{}};if("{"!==t[0])throw new Error("Expected { but found "+t[0]);for(t.shift();t.length;){if("}"===t[0])return t.shift(),";"===t[0]&&t.shift(),e;switch(t[0]){case"option":var n=tl(t);if(void 0!==e.options[n.name])throw new Error("Duplicate option "+n.name);e.options[n.name]=n.value;break;case"rpc":e.methods.push(il(t));break;default:throw new Error("Unexpected token in service: "+t[0])}}throw new Error("No closing tag for service")},il=function(t){t.shift();var e={name:t.shift(),input_type:null,output_type:null,client_streaming:!1,server_streaming:!1,options:{}};if("("!==t[0])throw new Error("Expected ( but found "+t[0]);if(t.shift(),"stream"===t[0]&&(t.shift(),e.client_streaming=!0),e.input_type=t.shift(),")"!==t[0])throw new Error("Expected ) but found "+t[0]);if(t.shift(),"returns"!==t[0])throw new Error("Expected returns but found "+t[0]);if(t.shift(),"("!==t[0])throw new Error("Expected ( but found "+t[0]);if(t.shift(),"stream"===t[0]&&(t.shift(),e.server_streaming=!0),e.output_type=t.shift(),")"!==t[0])throw new Error("Expected ) but found "+t[0]);if(t.shift(),";"===t[0])return t.shift(),e;if("{"!==t[0])throw new Error("Expected { but found "+t[0]);for(t.shift();t.length;){if("}"===t[0])return t.shift(),";"===t[0]&&t.shift(),e;if("option"!==t[0])throw new Error("Unexpected token in rpc options: "+t[0]);var n=tl(t);if(void 0!==e.options[n.name])throw new Error("Duplicate option "+n.name);e.options[n.name]=n.value}throw new Error("No closing tag for rpc")},sl=function(t){for(var e,n,r,i=(e=t.toString(),r=function(t){return t.trim()},e.replace(/([;,{}()=:[\]<>]|\/\*|\*\/)/g," $1 ").split(/\n/).map(r).filter(Boolean).map(function(t){var e=t.indexOf("//");return e>-1?t.slice(0,e):t}).map(r).filter(Boolean).join("\n").split(/\s+|\n+/gm).filter((n=!1,function(t){return"/*"===t?(n=!0,!1):"*/"===t?(n=!1,!1):!n}))),s=0;s<i.length;s++){var o;if(/^("|')([^'"]*)$/.test(i[s]))for(o=1===i[s].length?s+1:s;o<i.length;o++)if(/^([^'"]*)("|')$/.test(i[o])){i=i.slice(0,s).concat(i.slice(s,o+1).join("")).concat(i.slice(o+1));break}}for(var a={syntax:3,package:null,imports:[],enums:[],messages:[],options:{},extends:[]},h=!0;i.length;){switch(i[0]){case"package":a.package=$f(i);break;case"syntax":if(!h)throw new Error("Protobuf syntax version should be first thing in file");a.syntax=Xf(i);break;case"message":a.messages.push(Wf(i));break;case"enum":a.enums.push(Qf(i));break;case"option":var u=tl(i);if(a.options[u.name])throw new Error("Duplicate option "+u.name);a.options[u.name]=u.value;break;case"import":a.imports.push(nl(i));break;case"extend":a.extends.push(Gf(i));break;case"service":a.services||(a.services=[]),a.services.push(rl(i));break;default:throw new Error("Unexpected token: "+i[0])}h=!1}return a.extends.forEach(function(t){a.messages.forEach(function(e){e.name===t.name&&t.message.fields.forEach(function(t){if(!e.extensions||t.tag<e.extensions.from||t.tag>e.extensions.to)throw new Error(e.name+" does not declare "+t.tag+" as an extension number");e.fields.push(t)})})}),a.messages.forEach(function(t){t.fields.forEach(function(e){var n,r,i,s;if(e.options&&"true"===e.options.packed&&-1===Kf.indexOf(e.type)){if(-1===e.type.indexOf(".")){if(t.enums&&t.enums.some(function(t){return t.name===e.type}))return}else{if((n=e.type.split(".")).length>2)throw new Error("what is this?");if(r=n[0],i=n[1],a.messages.some(function(t){if(t.name===r)return s=t,t}),s&&s.enums&&s.enums.some(function(t){return t.name===i}))return}throw new Error("Fields of type "+e.type+' cannot be declared [packed=true]. Only repeated fields of primitive numeric types (types which use the varint, 32-bit, or 64-bit wire types) can be declared "packed". See https://developers.google.com/protocol-buffers/docs/encoding#optional')}})}),a},ol=function(t,e){var n=t.repeated?"repeated":t.required?"required":"optional";"map"===t.type&&(n="map<"+t.map.from+","+t.map.to+">"),t.oneof&&(n="");var r=Object.keys(t.options||{}).map(function(e){return e+" = "+t.options[e]}).join(",");return r&&(r=" ["+r+"]"),e.push((n?n+" ":"")+("map"===t.map?"":t.type+" ")+t.name+" = "+t.tag+r+";"),e},al=function(t,e){e.push("message "+t.name+" {"),t.enums||(t.enums=[]),t.enums.forEach(function(t){e.push(hl(t,[]))}),t.messages||(t.messages=[]),t.messages.forEach(function(t){e.push(al(t,[]))});var n={};return t.fields||(t.fields=[]),t.fields.forEach(function(t){t.oneof?(n[t.oneof]||(n[t.oneof]=[]),n[t.oneof].push(ol(t,[]))):e.push(ol(t,[]))}),Object.keys(n).forEach(function(t){n[t].unshift("oneof "+t+" {"),n[t].push("}"),e.push(n[t])}),e.push("}",""),e},hl=function(t,e){e.push("enum "+t.name+" {"),t.options||(t.options={});var n=cl(t.options,[]);return n.length>1&&e.push(n.slice(0,-1)),Object.keys(t.values).map(function(n){var r=ul(t.values[n]);e.push([n+" = "+r+";"])}),e.push("}",""),e},ul=function(t,e){var n=Object.keys(t.options||{}).map(function(e){return e+" = "+t.options[e]}).join(",");return n&&(n=" ["+n+"]"),t.value+n},cl=function(t,e){var n=Object.keys(t);return n.forEach(function(n){var r=t[n];~n.indexOf(".")&&(n="("+n+")");var i=typeof r;"object"===i?(r=fl(r,[])).length&&e.push("option "+n+" = {",r,"};"):("string"===i&&"optimize_for"!==n&&(r='"'+r+'"'),e.push("option "+n+" = "+r+";"))}),n.length>0&&e.push(""),e},fl=function(t,e){return Object.keys(t).forEach(function(n){var r=t[n],i=typeof r;"object"===i?Array.isArray(r)?r.forEach(function(t){(t=fl(t,[])).length&&e.push(n+" {",t,"}")}):(r=fl(r,[])).length&&e.push(n+" {",r,"}"):("string"===i&&(r='"'+r+'"'),e.push(n+": "+r))}),e},ll=function(t,e){var n="rpc "+t.name+"(";t.client_streaming&&(n+="stream "),n+=t.input_type+") returns (",t.server_streaming&&(n+="stream "),n+=t.output_type+")",t.options||(t.options={});var r=cl(t.options,[]);return r.length>1?e.push(n+" {",r.slice(0,-1),"}"):e.push(n+";"),e},dl=function(t){return function(e){return Array.isArray(e)?e.map(dl(t+"  ")).join("\n"):t+e}},pl=sl,gl=sl,yl=function(t){var e=[];return e.push('syntax = "proto'+t.syntax+'";',""),t.package&&e.push("package "+t.package+";",""),t.options||(t.options={}),cl(t.options,e),t.enums||(t.enums=[]),t.enums.forEach(function(t){hl(t,e)}),t.messages||(t.messages=[]),t.messages.forEach(function(t){al(t,e)}),t.services&&t.services.forEach(function(t){!function(t,e){e.push("service "+t.name+" {"),t.options||(t.options={}),cl(t.options,e),t.methods||(t.methods=[]),t.methods.forEach(function(t){e.push(ll(t,[]))}),e.push("}","")}(t,e)}),e.map(dl("")).join("\n")};pl.parse=gl,pl.stringify=yl;var vl=function t(e,n,r){e=e>=0?2*e:-2*e-1;var i=qu.encode(e,n,r);return t.bytes=qu.encode.bytes,i},ml=function t(e,n){var r=qu.decode(e,n);return t.bytes=qu.decode.bytes,1&r?(r+1)/-2:r/2},bl=function(t){return qu.encodingLength(t>=0?2*t:-2*t-1)},Sl=r(function(t,e){var n,r,i,s=ku.Buffer,o=function(t,e,n,r){return e.bytes=n.bytes=0,{type:t,encode:e,decode:n,encodingLength:r}};e.make=o,e.bytes=(n=function(t){return s.isBuffer(t)?t.length:s.byteLength(t)},o(2,r=function(t,e,i){var o=i,a=n(t);return qu.encode(a,e,i),i+=qu.encode.bytes,s.isBuffer(t)?t.copy(e,i):e.write(t,i,a),i+=a,r.bytes=i-o,e},i=function(t,e){var n=e,r=qu.decode(t,e);e+=qu.decode.bytes;var s=t.slice(e,e+r);return e+=s.length,i.bytes=e-n,s},function(t){var e=n(t);return qu.encodingLength(e)+e})),e.string=function(){var t=function(e,n,r){var i=r,o=s.byteLength(e);return qu.encode(o,n,r,"utf-8"),r+=qu.encode.bytes,n.write(e,r,o),r+=o,t.bytes=r-i,n},e=function(t,n){var r=n,i=qu.decode(t,n);n+=qu.decode.bytes;var s=t.toString("utf-8",n,n+i);return n+=i,e.bytes=n-r,s};return o(2,t,e,function(t){var e=s.byteLength(t);return qu.encodingLength(e)+e})}(),e.bool=function(){var t=function(e,n,r){return n[r]=e?1:0,t.bytes=1,n},e=function(t,n){var r=t[n]>0;return e.bytes=1,r};return o(0,t,e,function(t){return 1})}(),e.int32=function(){var t=function(e,n){var r=qu.decode(e,n);return t.bytes=qu.decode.bytes,r>2147483647?r-4294967296:r};return o(0,qu.encode,t,function(t){return qu.encodingLength(t<0?t+4294967296:t)})}(),e.int64=function(){var t=function(e,n){var r=qu.decode(e,n);if(r>=Math.pow(2,63)){for(var i=9;255===e[n+i-1];)i--;i=i||9;var o=s.allocUnsafe(i);e.copy(o,0,n,n+i),o[i-1]=127&o[i-1],r=-1*qu.decode(o,0),t.bytes=10}else t.bytes=qu.decode.bytes;return r},e=function(t,n,r){if(t<0){var i=r+9;for(qu.encode(-1*t,n,r),n[r+=qu.encode.bytes-1]=128|n[r];r<i-1;)n[++r]=255;n[i]=1,e.bytes=10}else qu.encode(t,n,r),e.bytes=qu.encode.bytes;return n};return o(0,e,t,function(t){return t<0?10:qu.encodingLength(t)})}(),e.sint32=e.sint64=o(0,vl,ml,bl),e.uint32=e.uint64=e.enum=e.varint=o(0,qu.encode,qu.decode,qu.encodingLength),e.fixed64=e.sfixed64=function(){var t=function(e,n,r){return e.copy(n,r),t.bytes=8,n},e=function(t,n){var r=t.slice(n,n+8);return e.bytes=8,r};return o(1,t,e,function(t){return 8})}(),e.double=function(){var t=function(e,n,r){return n.writeDoubleLE(e,r),t.bytes=8,n},e=function(t,n){var r=t.readDoubleLE(n);return e.bytes=8,r};return o(1,t,e,function(t){return 8})}(),e.fixed32=function(){var t=function(e,n,r){return n.writeUInt32LE(e,r),t.bytes=4,n},e=function(t,n){var r=t.readUInt32LE(n);return e.bytes=4,r};return o(5,t,e,function(t){return 4})}(),e.sfixed32=function(){var t=function(e,n,r){return n.writeInt32LE(e,r),t.bytes=4,n},e=function(t,n){var r=t.readInt32LE(n);return e.bytes=4,r};return o(5,t,e,function(t){return 4})}(),e.float=function(){var t=function(e,n,r){return n.writeFloatLE(e,r),t.bytes=4,n},e=function(t,n){var r=t.readFloatLE(n);return e.bytes=4,r};return o(5,t,e,function(t){return 4})}()}),wl=(Sl.make,Sl.bytes,Sl.string,Sl.bool,Sl.int32,Sl.int64,Sl.sint32,Sl.sint64,Sl.uint32,Sl.uint64,Sl.varint,Sl.fixed64,Sl.sfixed64,Sl.fixed32,Sl.sfixed32,function(t){return null!==t&&void 0!==t&&("number"!=typeof t||!isNaN(t))}),xl=wl;var kl=function(t,e,n){switch(t){case 0:return qu.decode(e,n),n+qu.decode.bytes;case 1:return n+8;case 2:var r=qu.decode(e,n);return n+qu.decode.bytes+r;case 3:case 4:throw new Error("Groups are not supported");case 5:return n+4;default:throw new Error("Unknown wire type: "+t)}},El=function(t,e){if(t.map)return{};if(t.repeated)return[];switch(t.type){case"string":return null!=e?e:"";case"bool":return"true"===e;case"float":case"double":case"sfixed32":case"fixed32":case"varint":case"enum":case"uint64":case"uint32":case"int64":case"int32":case"sint64":case"sint32":return parseInt(e||0,10);default:return null}},Al=function(t,e,n){for(var r=[],i={},s=[],o=[],a=0;a<n.length;a++){var h=t.fields[a];i[h.tag]=a;var u=h.options&&h.options.default,c=e(h.type,t.id,!1);o[a]=[u,c&&c.values],t.fields[a].packed=h.repeated&&h.options&&h.options.packed&&"false"!==h.options.packed,h.required&&r.push(h.name),h.oneof&&s.push(h.name)}function f(t,e,n,r,i,o){var a=e.name;if(e.oneof)for(var h=Object.keys(n),u=0;u<h.length;u++)s.indexOf(h[u])>-1&&delete n[h[u]];if(t.message){var c=qu.decode(r,i);i+=qu.decode.bytes;var f=t.decode(r,i,i+c);e.map?(n[a]=n[a]||{},n[a][f.key]=f.value):e.repeated?(n[a]=n[a]||[],n[a].push(f)):n[a]=f}else e.repeated?(n[a]=n[a]||[],n[a].push(t.decode(r,i))):n[a]=t.decode(r,i);return i+=t.decode.bytes}return function e(a,h,u){if(null==h&&(h=0),null==u&&(u=a.length),!(u<=a.length&&h<=a.length))throw new Error("Decoded message is not valid");for(var c,l=h,d={};;){if(u<=h){var p,g,y="",v=0;for(v=0;v<r.length;v++)if(y=r[v],!xl(d[y]))throw new Error("Decoded message is not valid, missing required field: "+y);for(v=0;v<n.length;v++)if(c=t.fields[v],g=o[v][0],p=o[v][1],y=c.name,!xl(d[y])){var m=!1;if(c.oneof)for(var b=Object.keys(d),S=0;S<b.length;S++)if(s.indexOf(b[S])>-1){m=!0;break}m||(p?c.repeated?d[y]=[]:(g=g&&p[g]?p[g].value:p[Object.keys(p)[0]].value,d[y]=parseInt(g||0,10)):d[y]=El(c,g))}return e.bytes=h-l,d}var w=qu.decode(a,h);h+=qu.decode.bytes;var x=i[w>>3];if(null!=x){var k=n[x];if((c=t.fields[x]).packed){var E=qu.decode(a,h);for(E+=h+=qu.decode.bytes;h<E;)h=f(k,c,d,a,h)}else h=f(k,c,d,a,h)}else h=kl(7&w,a,h)}}},Fl=wl;var Cl=function(t,e,n,r,i){for(var s=Object.keys(r),o=n.length,a={},h=0;h<o;h++){a[h]={p:qu.encode(t.fields[h].tag<<3|2),h:qu.encode(t.fields[h].tag<<3|n[h].type)};var u=t.fields[h];t.fields[h].packed=u.repeated&&u.options&&u.options.packed&&"false"!==u.options.packed}function c(t,e,n,r,i,s){var o=0;if(!i)for(o=0;o<n.length;o++)t[e++]=n[o];return r.message&&(qu.encode(r.encodingLength(s),t,e),e+=qu.encode.bytes),r.encode(s,t,e),e+r.encode.bytes}return function e(h,u,f){null==f&&(f=0),null==u&&(u=bt.allocUnsafe(i(h)));var l=f,d=Object.keys(h),p=0,g=!1;for(p=0;p<s.length;p++){var y=s[p],v=r[p];if(d.indexOf(v)>-1){if(g)throw new Error("only one of the properties defined in oneof "+y+" can be set");g=!0}}for(p=0;p<o;p++){var m=n[p],b=t.fields[p],S=h[b.name],w=0;if(Fl(S)){var x,k=a[p].p,E=a[p].h,A=b.packed;if(b.map){var F=Object.keys(S);for(w=0;w<F.length;w++)F[w]={key:F[w],value:S[F[w]]};S=F}if(A){var C=0;for(w=0;w<S.length;w++)Fl(S[w])&&(C+=m.encodingLength(S[w]));if(C){for(w=0;w<E.length;w++)u[f++]=k[w];qu.encode(C,u,f),f+=qu.encode.bytes}}if(b.repeated)for(w=0;w<S.length;w++)x=S[w],Fl(x)&&(f=c(u,f,E,m,A,x));else f=c(u,f,E,m,A,S)}else if(b.required)throw new Error(b.name+" is required")}return e.bytes=f-l,u}},Tl=wl;var Dl=function(t,e,n){for(var r=Object.keys(n),i=e.length,s=new Array(i),o=0;o<t.fields.length;o++){s[o]=qu.encodingLength(t.fields[o].tag<<3|e[o].type);var a=t.fields[o];t.fields[o].packed=a.repeated&&a.options&&a.options.packed&&"false"!==a.options.packed}return function(o){var a=0,h=0,u=0;for(h=0;h<r.length;h++){var c=r[h],f=n[c],l=!1;for(u=0;u<f.length;u++)if(Tl(o[f[u]])){if(l)throw new Error("only one of the properties defined in oneof "+c+" can be set");l=!0}}for(h=0;h<i;h++){var d,p=e[h],g=t.fields[h],y=o[g.name],v=s[h];if(Tl(y)){if(g.map){var m=Object.keys(y);for(u=0;u<m.length;u++)m[u]={key:m[u],value:y[m[u]]};y=m}if(g.packed){var b=0;for(u=0;u<y.length;u++)Tl(y[u])&&(b+=d=p.encodingLength(y[u]),p.message&&(b+=qu.encodingLength(d)));b&&(a+=v+b+qu.encodingLength(b))}else if(g.repeated)for(u=0;u<y.length;u++)Tl(y[u])&&(a+=v+(d=p.encodingLength(y[u]))+(p.message?qu.encodingLength(d):0));else a+=v+(d=p.encodingLength(y))+(p.message?qu.encodingLength(d):0)}else if(g.required)throw new Error(g.name+" is required")}return a}},Pl=function(t,e){var n={},r={},i={},s=function(t,e){t.enums&&t.enums.forEach(function(t){t.id=e+(e?".":"")+t.name,r[t.id]=t,s(t,t.id)}),t.messages&&t.messages.forEach(function(r){r.id=e+(e?".":"")+r.name,n[r.id]=r,r.fields.forEach(function(r){if(r.map){var i="Map_"+r.map.from+"_"+r.map.to,s={name:i,enums:[],messages:[],fields:[{name:"key",type:r.map.from,tag:1,repeated:!1,required:!0},{name:"value",type:r.map.to,tag:2,repeated:!1,required:!1}],extensions:null,id:e+(e?".":"")+i};n[s.id]||(n[s.id]=s,t.messages.push(s)),r.type=i,r.repeated=!0}}),s(r,r.id)})};s(t,"");var o=function(t,e){t.messages.forEach(function(n){e[n.name]=a(n.name,t.id)}),t.enums.forEach(function(t){e[t.name]=function(t){if(!t)return null;var e={};return Object.keys(t).forEach(function(n){e[n]=t[n].value}),e}(t.values)}),e.type=2,e.message=!0,e.name=t.name;var n={};t.fields.forEach(function(t){t.oneof&&(n[t.oneof]||(n[t.oneof]=[]),n[t.oneof].push(t.name))});var r=t.fields.map(function(e){return a(e.type,t.id)}),i=Dl(t,r,n),s=Cl(t,a,r,n,i),o=Al(t,a,r);return s.bytes=o.bytes=0,e.buffer=!0,e.encode=s,e.decode=o,e.encodingLength=i,e},a=function(t,s,a){if(e&&e[t])return e[t];if(Sl[t])return Sl[t];var h,u,c=(s?s+"."+t:t).split(".").map(function(e,n,r){return r.slice(0,n).concat(t).join(".")}).reverse().reduce(function(t,e){return t||n[e]||r[e]},null);if(!1===a)return c;if(!c)throw new Error("Could not resolve "+t);return c.values?(h=c,u=Object.keys(h.values||[]).map(function(t){return parseInt(h.values[t].value,10)}),Sl.make(0,function t(e,n,r){if(!u.length||-1===u.indexOf(e))throw new Error("Invalid enum value: "+e);return qu.encode(e,n,r),t.bytes=qu.encode.bytes,n},function t(e,n){var r=qu.decode(e,n);if(!u.length||-1===u.indexOf(r))throw new Error("Invalid enum value: "+r);return t.bytes=qu.decode.bytes,r},qu.encodingLength)):i[c.id]||o(c,i[c.id]={})};return(t.enums||[]).concat((t.messages||[]).map(function(t){return a(t.id)}))},Il=function(t,e){if(e||(e={}),!t)throw new Error("Pass in a .proto string or a protobuf-schema parsed object");var n="object"!=typeof t||ee(t)?pl.parse(t):t,r=function(){var t=this;Pl(n,e.encodings||{}).forEach(function(e){t[e.name]=function(t){if(!t)return null;var e={};return Object.keys(t).forEach(function(n){e[n]=t[n].value}),e}(e.values)||e})};return r.prototype.toString=function(){return pl.stringify(n)},r.prototype.toJSON=function(){return n},new r};var Rl=function(t,e,n,r){r(null,new Hl(t,e,n))},_l=r(function(t,e){t.exports.createDagLinkFromB58EncodedHash=function(t){return new Hl(t.name?t.name:t.Name,t.size?t.size:t.Size,t.hash||t.Hash||t.multihash)}}),Bl=(_l.createDagLinkFromB58EncodedHash,kc&&tc||kc),Hl=r(function(t,e){(e=t.exports=Ec(class{constructor(t,e,n){Bl(n,"A link requires a multihash to point to"),this._name=t||"",this._size=e,"string"==typeof n?this._multihash=zu.fromB58String(n):ee(n)&&(this._multihash=n)}toString(){return`DAGLink <${zu.toB58String(this.multihash)} - name: "${this.name}", size: ${this.size}>`}toJSON(){return{name:this.name,size:this.size,multihash:zu.toB58String(this._multihash)}}get name(){return this._name}set name(t){throw new Error("Can't set property: 'name' is immutable")}get size(){return this._size}set size(t){throw new Error("Can't set property: 'size' is immutable")}get multihash(){return this._multihash}set multihash(t){throw new Error("Can't set property: 'multihash' is immutable")}},{className:"DAGLink",symbolName:"@ipld/js-ipld-dag-pb/daglink"})).create=Rl,e.util=_l}),Nl=(Hl.create,Hl.util,r(function(t,e){const n=Il("// An IPFS MerkleDAG Link\nmessage PBLink {\n\n  // multihash of the target object\n  optional bytes Hash = 1;\n\n  // utf string name. should be unique per object\n  optional string Name = 2;\n\n  // cumulative size of target object\n  optional uint64 Tsize = 3;\n}\n\n// An IPFS MerkleDAG Node\nmessage PBNode {\n\n  // refs to other objects\n  repeated PBLink Links = 2;\n\n  // opaque user data\n  optional bytes Data = 1;\n}");(e=t.exports).serialize=function(t,e){let r;!Xl.isDAGNode(t)&&t.links&&(t.links=t.links.map(t=>Hl.isDAGLink(t)?t:Hl.util.createDagLinkFromB58EncodedHash(t)));try{r=n.PBNode.encode(function(t){const e={};return t.data&&t.data.length>0?e.Data=t.data:e.Data=null,t.links&&t.links.length>0?e.Links=t.links.map(t=>({Hash:t.multihash,Name:t.name,Tsize:t.size})):e.Links=null,e}(t))}catch(t){return e(t)}e(null,r)},e.deserialize=function(t,e){const r=n.PBNode.decode(t),i=r.Links.map(t=>new Hl(t.Name,t.Tsize,t.Hash)),s=null==r.Data?bt.alloc(0):bt.from(r.Data);Xl.create(s,i,e)},e.cid=function(t,e){if(t.multihash)return e(null,new Uf(t.multihash));e(new Error("not valid dagPB node"))}})),Ol=(Nl.serialize,Nl.deserialize,Nl.cid,r(function(t,e){(e=t.exports).cloneData=function(t){let e;return t.data&&t.data.length>0?(e=bt.alloc(t.data.length),t.data.copy(e)):e=bt.alloc(0),e},e.cloneLinks=function(t){return t.links.slice()},e.linkSort=function(t,e){const n=bt.from(t.name||""),r=bt.from(e.name||"");return n.compare(r)},e.toDAGLink=function(t){return new Hl("",t.size,t.multihash)}}));Ol.cloneData,Ol.cloneLinks,Ol.linkSort,Ol.toDAGLink;const jl=Nl.serialize,Ll=Ol.linkSort;var Ml=function(t,e,n,r){if("function"==typeof t?(r=t,t=void 0):"string"==typeof t&&(t=bt.from(t)),"function"==typeof e&&(r=e,e=[]),"function"==typeof n&&(r=n,n=void 0),!ee(t))return r(new Error("Passed 'data' is not a buffer or a string!"));n||(n="sha2-256");const i=e.map(t=>Hl.isDAGLink(t)?t:Hl.util.createDagLinkFromB58EncodedHash(t)),s=wf(i,Ll);jl({data:t,links:s},(e,i)=>{if(e)return r(e);bf(i,n,(e,n)=>{if(e)return r(e);const o=new Xl(t,s,i,n);r(null,o)})})};const Vl=Ol.cloneLinks,Ul=Ol.cloneData;var Kl=function(t,e){const n=Ul(t),r=Vl(t);Ml(n,r,e)};const ql=Ol.cloneLinks,zl=Ol.cloneData,Yl=Ol.toDAGLink;var Gl=function(t,e,n){const r=ql(t),i=zl(t);if(Hl.isDAGLink(e));else if(Xl.isDAGNode(e))e=Yl(e);else{e.multihash=e.multihash||e.hash;try{e=new Hl(e.name,e.size,e.multihash)}catch(t){return n(t)}}r.push(e),Ml(i,r,n)};const Jl=Ol.cloneLinks,Wl=Ol.cloneData;var $l=function(t,e,n){const r=Wl(t);let i=Jl(t);if("string"==typeof e)i=i.filter(t=>t.name!==e);else{if(!ee(e))return n(new Error("second arg needs to be a name or multihash"),null);i=i.filter(t=>!t.multihash.equals(e))}Ml(r,i,n)},Xl=r(function(t,e){(e=t.exports=Ec(class{constructor(t,e,n,r){Bl(n,"DAGNode needs its serialized format"),Bl(r,"DAGNode needs its multihash"),"string"==typeof r&&(r=zu.fromB58String(r)),this._data=t||bt.alloc(0),this._links=e||[],this._serialized=n,this._multihash=r,this._size=this.links.reduce((t,e)=>t+e.size,this.serialized.length),this._json={data:this.data,links:this.links.map(t=>t.toJSON()),multihash:zu.toB58String(this.multihash),size:this.size}}toJSON(){return this._json}toString(){return`DAGNode <${zu.toB58String(this.multihash)} - data: "${this.data.toString()}", links: ${this.links.length}, size: ${this.size}>`}get data(){return this._data}set data(t){throw new Error("Can't set property: 'data' is immutable")}get links(){return this._links}set links(t){throw new Error("Can't set property: 'links' is immutable")}get serialized(){return this._serialized}set serialized(t){throw new Error("Can't set property: 'serialized' is immutable")}get size(){return this._size}set size(t){throw new Error("Can't set property: 'size' is immutable")}get multihash(){return this._multihash}set multihash(t){throw new Error("Can't set property: 'multihash' is immutable")}},{className:"DAGNode",symbolName:"@ipld/js-ipld-dag-pb/dagnode"})).create=Ml,e.clone=Kl,e.addLink=Gl,e.rmLink=$l}),Zl=(Xl.create,Xl.clone,Xl.addLink,Xl.rmLink,Array.isArray);var Ql=function(){},td=r(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return function(){if(null!==t){var e=t;t=null,e.apply(this,arguments)}}},t.exports=e.default});n(td);var ed=r(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}},t.exports=e.default});n(ed);var nd=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},rd=r(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return function(){var e=(0,r.default)(arguments),n=e.pop();t.call(this,e,n)}};var n,r=(n=Dc)&&n.__esModule?n:{default:n};t.exports=e.default});n(rd);var id=r(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,r.default)(function(e,r){var i;try{i=t.apply(this,e)}catch(t){return r(t)}(0,n.default)(i)&&"function"==typeof i.then?i.then(function(t){o(r,null,t)},function(t){o(r,t.message?t:new Error(t))}):r(null,i)})};var n=s(nd),r=s(rd),i=s(Pc);function s(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){try{t(e,n)}catch(t){(0,i.default)(a,t)}}function a(t){throw t}t.exports=e.default});n(id);var sd=r(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.isAsync=void 0;var n,r=(n=id)&&n.__esModule?n:{default:n};var i="function"==typeof Symbol;function s(t){return i&&"AsyncFunction"===t[Symbol.toStringTag]}e.default=function(t){return s(t)?(0,r.default)(t):t},e.isAsync=s});n(sd);sd.isAsync;var od=r(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if(e=(0,i.default)(e||r.default),!(0,n.default)(t))return e(new Error("First argument to waterfall must be an array of functions"));if(!t.length)return e();var h=0;function u(e){var n=(0,a.default)(t[h++]);e.push((0,o.default)(c)),n.apply(null,e)}function c(n){if(n||h===t.length)return e.apply(null,arguments);u((0,s.default)(arguments,1))}u([])};var n=h(Zl),r=h(Ql),i=h(td),s=h(Dc),o=h(ed),a=h(sd);function h(t){return t&&t.__esModule?t:{default:t}}t.exports=e.default});n(od);var ad=r(function(t,e){(e=t.exports).multicodec="dag-pb",e.resolve=((t,e,n)=>{od([e=>Nl.deserialize(t,e),(t,r)=>{if(!e)return n(null,{value:t,remainderPath:""});const i=e.split("/");if("Links"===i[0]){let e="";if(!i[1])return r(null,{value:t.links.map(t=>t.toJSON()),remainderPath:""});const n={};t.links.forEach((t,e)=>{const r=t.toJSON();n[e]={hash:r.multihash,name:r.name,size:r.size},n[r.name]=r.multihash});let s=n[i[1]];"Hash"===i[2]?s={"/":s.hash}:"Tsize"===i[2]?s={"/":s.size}:"Name"===i[2]&&(s={"/":s.name}),r(null,{value:s,remainderPath:e=i.slice(3).join("/")})}else"Data"===i[0]?r(null,{value:t.data,remainderPath:""}):r(new Error("path not available"))}],n)}),e.tree=((t,e,n)=>{"function"==typeof e&&(n=e,e={}),e=e||{},Nl.deserialize(t,(t,e)=>{if(t)return n(t);const r=[];r.push("Links"),e.links.forEach((t,e)=>{r.push(`Links/${e}/Name`),r.push(`Links/${e}/Tsize`),r.push(`Links/${e}/Hash`)}),r.push("Data"),n(null,r)})}),e.isLink=((t,n,r)=>{e.resolve(t,n,(t,e)=>{if(t)return r(t);if(e.remainderPath.length>0)return r(new Error("path out of scope"));if("object"==typeof e.value&&e.value["/"]){let n;try{n=Uf.isCID(new Uf(e.value["/"]))}catch(t){n=!1}if(n)return r(null,e.value)}r(null,!1)})})}),hd=(ad.multicodec,ad.resolve,ad.tree,ad.isLink,{DAGNode:Xl,DAGLink:Hl,resolver:ad,util:Nl}),ud=["https://identi.fi","https://ipfs.io","https://ipfs.infura.io","https://www.eternum.io"],cd=200,fd=function(){function t(e,n){var r,i=this;if(qn(this,t),e){this.ipfs=e,this.storage=new xu.IPFSStorage(e),this.identitiesBySearchKey=new xu.MerkleBTree(this.storage,cd),this.identitiesByTrustDistance=new xu.MerkleBTree(this.storage,cd),this.messagesByTimestamp=new xu.MerkleBTree(this.storage,cd),this.messagesByDistance=new xu.MerkleBTree(this.storage,cd),this.viewpoint=n||["keyID",Ns.getDefaultKey().keyID];var s=new Ws({attrs:[this.viewpoint]});s.data.trustDistance=0,this.ready=new Is((r=Ks(Us.mark(function t(e,n){return Us.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i._setSentRcvdIndexes(s);case 3:return t.next=5,i._addIdentityToIndexes(s);case 5:e(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n(t.t0);case 11:case"end":return t.stop()}},t,i,[[0,8]])})),function(t,e){return r.apply(this,arguments)}))}}return t.create=function(){var e=Ks(Us.mark(function e(n,r){var i;return Us.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=new t(n,r),e.next=3,i.ready;case 3:return e.abrupt("return",i);case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),t.getMsgIndexKey=function(t){var e=parseInt(t.distance);return(e=("00"+(e=Ys(e)?99:e)).substring(e.toString().length))+":"+Math.floor(Date.parse(t.timestamp||t.signedData.timestamp)/1e3)+":"+(t.ipfs_hash||t.hash).substr(0,9)},t.getIdentityIndexKeys=function(t,e){for(var n=[],r=t.data.attrs,i=0;i<r.length;i+=1){var s=t.data.hasOwnProperty("trustDistance")?t.data.trustDistance:parseInt(r[i].dist);s=("00"+(s=Ys(s)?99:s)).substring(s.toString().length);var o=r[i].val||r[i][1],a=r[i].name||r[i][0],h=encodeURIComponent(o),u=encodeURIComponent(o.toLowerCase()),c=encodeURIComponent(a),f=s+":"+h+":"+c,l=s+":"+u+":"+c;if(n.push(f),f!==l&&n.push(l),o.indexOf(" ")>-1)for(var d=o.toLowerCase().split(" "),p=0;p<d.length;p+=1){var g=s+":"+encodeURIComponent(d[p])+":"+c+":"+e.substr(0,9);n.push(g)}if(f.match(/^http(s)?:\/\/.+\/[a-zA-Z0-9_]+$/)){var y=f.split("/");n.push(y[y.length-1])}}return n},t.load=function(){var e=Ks(Us.mark(function e(n,r){var i;return Us.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=new t,e.next=3,i.init(n,r);case 3:return e.abrupt("return",i);case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),t.prototype.init=function(){var t=Ks(Us.mark(function t(e){var n,r,i,s,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ud,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e4;return Us.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=!1,void 0===e&&(n=!0,e="/ipns/Qmbb1DRwd75rZk5TotTXJYzDSJL6BaNT1DAQ6VbKcKLhbs"),"string"!=typeof a){t.next=6;break}this.storage=new xu.IPFSGatewayStorage(a),t.next=53;break;case 6:if(!Array.isArray(a)){t.next=47;break}r=void 0,i=0;case 9:if(!(i<a.length)){t.next=40;break}return s=void 0,o=""+a[i]+e,t.prev=12,t.next=15,Ns.timeoutPromise(rt(o,{timeout:h}).catch(function(){}),h);case 15:(s=t.sent)||console.log("fetching "+o+" timed out"),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(12),console.log("fetching "+o+" failed:",t.t0);case 22:if(s&&s.ok&&200===s.status||!n){t.next=34;break}return o=a[i]+"/ipfs/QmPxLM631zJQ12tUDWs55LkGqqroFZKHeLjAZ2XwL9Miu3",t.prev=24,t.next=27,Ns.timeoutPromise(rt(o,{timeout:h}).catch(function(){}),h);case 27:(s=t.sent)?e="/ipfs/QmPxLM631zJQ12tUDWs55LkGqqroFZKHeLjAZ2XwL9Miu3":console.log("fetching "+o+" timed out"),t.next=34;break;case 31:t.prev=31,t.t1=t.catch(24),console.log("fetching "+o+" failed:",t.t1);case 34:if(!s||!s.ok||200!==s.status){t.next=37;break}return r=a[i],t.abrupt("break",40);case 37:i++,t.next=9;break;case 40:if(!r){t.next=44;break}this.storage=new xu.IPFSGatewayStorage(r),t.next=45;break;case 44:throw"Could not load index via given ipfs gateways";case 45:t.next=53;break;case 47:if("object"!==(void 0===a?"undefined":yi(a))){t.next=52;break}this.storage=new xu.IPFSStorage(a),this.ipfs=a,t.next=53;break;case 52:throw"ipfs param must be a gateway url, array of urls or a js-ipfs object";case 53:return t.next=55,xu.MerkleBTree.getByHash(e+"/identities_by_distance",this.storage,cd);case 55:return this.identitiesByTrustDistance=t.sent,t.next=58,xu.MerkleBTree.getByHash(e+"/identities_by_searchkey",this.storage,cd);case 58:return this.identitiesBySearchKey=t.sent,t.next=61,xu.MerkleBTree.getByHash(e+"/messages_by_timestamp",this.storage,cd);case 61:return this.messagesByTimestamp=t.sent,t.abrupt("return",!0);case 63:case"end":return t.stop()}},t,this,[[12,19],[24,31]])}));return function(e){return t.apply(this,arguments)}}(),t.prototype.save=function(){var t=Ks(Us.mark(function t(){var e,n,r,i,s,o=this;return Us.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=void 0,t.next=4,this.ipfs.files.add([{path:"messages_by_distance",content:bt.from(this.messagesByDistance.rootNode.serialize())},{path:"messages_by_timestamp",content:bt.from(this.messagesByTimestamp.rootNode.serialize())},{path:"identities_by_searchkey",content:bt.from(this.identitiesBySearchKey.rootNode.serialize())},{path:"identities_by_distance",content:bt.from(this.identitiesByTrustDistance.rootNode.serialize())}]);case 4:for(n=t.sent,r=[],i=0;i<n.length;i+=1)r.push({Name:n[i].path,Hash:n[i].hash,Size:n[i].size});return t.next=9,new Is(function(t,e){hd.DAGNode.create(bt.from("\b"),r,function(n,r){n&&e(n),t(o.ipfs.object.put(r))})});case 9:if(!(n=t.sent)._json.multihash){t.next=18;break}if(e=n._json.multihash,!this.ipfs.name){t.next=18;break}return console.log("publishing index",e),t.next=16,this.ipfs.name.publish(e,{});case 16:s=t.sent,console.log("published index",s);case 18:return t.abrupt("return",e);case 21:t.prev=21,t.t0=t.catch(0),console.log("error publishing index",t.t0);case 24:case"end":return t.stop()}},t,this,[[0,21]])}));return function(){return t.apply(this,arguments)}}(),t.prototype._setSentRcvdIndexes=function(){var t=Ks(Us.mark(function t(e){return Us.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.sentIndex){t.next=8;break}if(!e.data.sent){t.next=7;break}return t.next=4,xu.MerkleBTree.getByHash(e.data.sent,this.storage,cd);case 4:e.sentIndex=t.sent,t.next=8;break;case 7:e.sentIndex=new xu.MerkleBTree(this.storage,cd);case 8:if(e.receivedIndex){t.next=16;break}if(!e.data.received){t.next=15;break}return t.next=12,xu.MerkleBTree.getByHash(e.data.received,this.storage,cd);case 12:e.receivedIndex=t.sent,t.next=16;break;case 15:e.receivedIndex=new xu.MerkleBTree(this.storage,cd);case 16:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),t.prototype.getViewpoint=function(){var t=Ks(Us.mark(function t(){var e,n,r;return Us.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.identitiesByTrustDistance.searchText("00",1);case 2:if(!(e=t.sent).length){t.next=11;break}return t.next=6,this.storage.get(e[0].value);case 6:return n=t.sent,r=new Ws(JSON.parse(n)),t.next=10,this._setSentRcvdIndexes(r);case 10:return t.abrupt("return",r);case 11:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),t.prototype.get=function(){var t=Ks(Us.mark(function t(e,n){var r,i,s;return Us.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e){t.next=2;break}throw"Value is undefined";case 2:return void 0===n&&(n=Ns.guessTypeOf(e)),t.next=5,this.identitiesBySearchKey.get(encodeURIComponent(e)+":"+encodeURIComponent(n));case 5:if(!(r=t.sent)){t.next=14;break}return t.next=9,this.storage.get(r);case 9:return i=t.sent,s=new Ws(JSON.parse(i)),t.next=13,this._setSentRcvdIndexes(s);case 13:return t.abrupt("return",s);case 14:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),t.prototype._getMsgs=function(){var t=Ks(Us.mark(function t(e,n,r){var i,s;return Us.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.searchText("",n,r,!0);case 2:return i=t.sent,s=[],i.forEach(function(t){var e=Zs.fromJws(t.value.jws);e.cursor=t.key,e.authorPos=t.value.author_pos,e.authorNeg=t.value.author_neg,e.recipientPos=t.value.recipient_pos,e.recipientNeg=t.value.recipient_neg,e.authorTrustDistance=t.value.distance,e.authorName=t.value.author_name,e.recipientName=t.value.recipient_name,s.push(e)}),t.abrupt("return",s);case 6:case"end":return t.stop()}},t,this)}));return function(e,n,r){return t.apply(this,arguments)}}(),t.prototype._addIdentityToIndexes=function(){var e=Ks(Us.mark(function e(n){var r,i,s,o,a,h,u,c;return Us.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.sentIndex||!n.receivedIndex){e.next=14;break}if(!n.sentIndex.rootNode.hash||!n.receivedIndex.rootNode.hash){e.next=6;break}n.data.sent=n.sentIndex.rootNode.hash,n.data.received=n.receivedIndex.rootNode.hash,e.next=14;break;case 6:return e.next=8,this.ipfs.files.add(new bt(n.sentIndex.rootNode.serialize(),"utf8"));case 8:return r=e.sent,n.data.sent=r[0].hash,e.next=12,this.ipfs.files.add(new bt(n.receivedIndex.rootNode.serialize(),"utf8"));case 12:i=e.sent,n.data.received=i[0].hash;case 14:return s=new this.ipfs.types.Buffer(Kn(n.data)),e.next=17,this.ipfs.files.add(s);case 17:o=e.sent,a=o.length?o[0].hash:"",h=t.getIdentityIndexKeys(n,a.substr(2)),u=0;case 21:if(!(u<h.length)){e.next=30;break}return c=h[u],e.next=25,this.identitiesByTrustDistance.put(c,a);case 25:return e.next=27,this.identitiesBySearchKey.put(c.substr(c.indexOf(":")+1),a);case 27:u++,e.next=21;break;case 30:return e.abrupt("return",{hash:a});case 31:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.prototype.getSentMsgs=function(){var t=Ks(Us.mark(function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return Us.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.sentIndex){t.next=4;break}return t.next=3,xu.MerkleBTree.getByHash(e.data.sent,this.storage,cd);case 3:e.sentIndex=t.sent;case 4:return t.abrupt("return",this._getMsgs(e.sentIndex,n,r));case 5:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),t.prototype.getReceivedMsgs=function(){var t=Ks(Us.mark(function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return Us.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.receivedIndex){t.next=4;break}return t.next=3,xu.MerkleBTree.getByHash(e.data.received,this.storage,cd);case 3:e.receivedIndex=t.sent;case 4:return t.abrupt("return",this._getMsgs(e.receivedIndex,n,r));case 5:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),t.prototype.publishMessage=function(){var t=Ks(Us.mark(function t(e){var n,r,i,s,o,a,h=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Us.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n={},!this.ipfs){t.next=15;break}return r=new this.ipfs.types.Buffer(e.jws),t.next=5,this.ipfs.files.add(r);case 5:return i=t.sent,n.hash=i,t.next=9,this.ipfs.pubsub.publish("identifi",i);case 9:if(!h){t.next=13;break}return t.next=12,this.addMessage(e);case 12:n.indexUri=t.sent;case 13:t.next=26;break;case 15:return s=Kn({jws:e.jws,hash:e.getHash()}),t.next=18,rt("https://identi.fi/api/messages",{method:"POST",headers:{"Content-Type":"application/json"},body:s});case 18:if(!(o=t.sent).status||201!==o.status){t.next=26;break}return t.t0=JSON,t.next=23,o.text();case 23:t.t1=t.sent,a=t.t0.parse.call(t.t0,t.t1),n.hash=a.ipfs_hash;case 26:return t.abrupt("return",n);case 27:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),t.prototype.getAttributeTrustDistance=function(){var t=Ks(Us.mark(function t(e){var n;return Us.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(Ns.isUniqueType(e[0])){t.next=2;break}return t.abrupt("return",99);case 2:return t.next=4,this.get(e[1],e[0]);case 4:return n=t.sent,t.abrupt("return",n&&n.data.trustDistance?n.data.trustDistance:99);case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),t.prototype.getMsgTrustDistance=function(){var t=Ks(Us.mark(function t(e){var n,r,i;return Us.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=99,r=0;case 2:if(!(r<e.signedData.author.length)){t.next=14;break}if(!Ns.attributeEquals(e.signedData.author[r],this.viewpoint)){t.next=7;break}return t.abrupt("return",0);case 7:return t.next=9,this.getAttributeTrustDistance(e.signedData.author[r]);case 9:(i=t.sent)<n&&(n=i);case 11:r++,t.next=2;break;case 14:return t.abrupt("return",n);case 15:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),t.prototype._updateIdentityIndexesByMsg=function(){var e=Ks(Us.mark(function e(n){var r,i,s,o,a,h,u,c,f,l,d,p,g,y;return Us.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=[],i=[],s=0;case 3:if(!(s<n.signedData.recipient.length)){e.next=12;break}return o=n.signedData.recipient[s],e.next=7,this.get(o[1],o[0]);case 7:(a=e.sent)&&r.push(a);case 9:s++,e.next=3;break;case 12:h=0;case 13:if(!(h<n.signedData.author.length)){e.next=22;break}return u=n.signedData.author[h],e.next=17,this.get(u[1],u[0]);case 17:(c=e.sent)&&i.push(c);case 19:h++,e.next=13;break;case 22:r.length||((f=new Ws({attrs:n.signedData.recipient})).sentIndex=new xu.MerkleBTree(this.storage,cd),f.receivedIndex=new xu.MerkleBTree(this.storage,cd),n.isPositive()&&(f.data.trustDistance=n.distance+1),r.push(f)),l=(l=t.getMsgIndexKey(n)).substr(l.indexOf(":")+1),d=0;case 26:if(!(d<r.length)){e.next=35;break}return p=r[d],e.next=30,p.receivedIndex.put(l,n);case 30:return e.next=32,this._addIdentityToIndexes(p);case 32:d++,e.next=26;break;case 35:g=0;case 36:if(!(g<i.length)){e.next=45;break}return y=i[g],e.next=40,y.sentIndex.put(l,n);case 40:return e.next=42,this._addIdentityToIndexes(y);case 42:g++,e.next=36;break;case 45:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.prototype.addMessage=function(){var e=Ks(Us.mark(function e(n){var r,i,s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Us.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.ipfs){e.next=17;break}return e.next=3,this.getMsgTrustDistance(n);case 3:if(n.distance=e.sent,99!==n.distance){e.next=6;break}return e.abrupt("return");case 6:return r=t.getMsgIndexKey(n),e.next=9,this.messagesByDistance.put(r,n);case 9:return r=r.substr(r.indexOf(":")+1),e.next=12,this.messagesByTimestamp.put(r,n);case 12:if(i=e.sent,!s){e.next=16;break}return e.next=16,this._updateIdentityIndexesByMsg(n);case 16:return e.abrupt("return",i);case 17:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.prototype.search=function(){var t=Ks(Us.mark(function t(e,n){var r,i,s,o,a,h,u,c,f,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,d=arguments[3],p=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20;return Us.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r={},i=d?yo(d.substring(0,d.indexOf(":"))):0,s=i;case 3:if(!(s<=p)){t.next=42;break}return o=s===i,a=("00"+s).substring(s.toString().length),console.log(a+":"+encodeURIComponent(e),l,o?d:void 0),t.next=9,this.identitiesByTrustDistance.searchText(a+":"+encodeURIComponent(e),l,d);case 9:h=t.sent,console.log("r",h);case 11:if(!(h&&h.length&&_s(r).length<l)){t.next=39;break}u=0;case 13:if(!(u<h.length&&_s(r).length<l)){t.next=32;break}if(!h[u].value||r.hasOwnProperty(h[u].value)){t.next=29;break}return t.prev=15,t.t0=JSON,t.next=19,this.storage.get("/ipfs/"+h[u].value);case 19:t.t1=t.sent,c=t.t0.parse.call(t.t0,t.t1),(f=new Ws(c)).cursor=h[u].key,r[h[u].value]=f,t.next=29;break;case 26:t.prev=26,t.t2=t.catch(15),console.error(t.t2);case 29:u++,t.next=13;break;case 32:return console.log(a+":"+encodeURIComponent(e),l,h[h.length-1].key),t.next=35,this.identitiesBySearchKey.searchText(a+":"+encodeURIComponent(e),l,h[h.length-1].key);case 35:h=t.sent,console.log("r",h),t.next=11;break;case 39:s++,t.next=3;break;case 42:return t.abrupt("return",no(r));case 43:case"end":return t.stop()}},t,this,[[15,26]])}));return function(e,n){return t.apply(this,arguments)}}(),t}();return{VERSION:"0.0.55",APIClient:Mn,Message:Zs,Identity:Ws,Index:fd,util:Ns}});
